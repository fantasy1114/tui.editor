!function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};e[a][0].call(d.exports,function(t){var n=e[a][1][t];return i(n?n:t)},d,d.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){"use strict";tui.util.defineNamespace("tui.component.colorpicker",{domutil:t("./src/js/core/domutil"),domevent:t("./src/js/core/domevent"),Collection:t("./src/js/core/collection"),View:t("./src/js/core/view"),Drag:t("./src/js/core/drag"),create:t("./src/js/factory"),Palette:t("./src/js/palette"),Slider:t("./src/js/slider"),colorutil:t("./src/js/colorutil"),svgvml:t("./src/js/svgvml")})},{"./src/js/colorutil":2,"./src/js/core/collection":3,"./src/js/core/domevent":4,"./src/js/core/domutil":5,"./src/js/core/drag":6,"./src/js/core/view":7,"./src/js/factory":8,"./src/js/palette":10,"./src/js/slider":11,"./src/js/svgvml":12}],2:[function(t,e,n){"use strict";var o=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,i={leadingZero:function(t,e){var n="",o=0;if((t+"").length>e)return t+"";for(;e-1>o;o+=1)n+="0";return(n+t).slice(-1*e)},isValidRGB:function(t){return o.test(t)},hexToRGB:function(t){var e,n,o;return!!i.isValidRGB(t)&&(t=t.substring(1),e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),o=parseInt(t.substr(4,2),16),[e,n,o])},rgbToHEX:function(t,e,n){var o="#"+i.leadingZero(t.toString(16),2)+i.leadingZero(e.toString(16),2)+i.leadingZero(n.toString(16),2);return!!i.isValidRGB(o)&&o},rgbToHSV:function(t,e,n){var o,i,r,a,s,l;if(t/=255,e/=255,n/=255,o=Math.max(t,e,n),i=Math.min(t,e,n),s=o,l=o-i,a=0===o?0:l/o,o===i)r=0;else{switch(o){case t:r=(e-n)/l+(n>e?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return[Math.round(360*r),Math.round(100*a),Math.round(100*s)]},hsvToRGB:function(t,e,n){var o,i,r,a,s,l,c,d;if(t=Math.max(0,Math.min(360,t)),e=Math.max(0,Math.min(100,e)),n=Math.max(0,Math.min(100,n)),e/=100,n/=100,0===e)return o=i=r=n,[Math.round(255*o),Math.round(255*i),Math.round(255*r)];switch(t/=60,a=Math.floor(t),s=t-a,l=n*(1-e),c=n*(1-e*s),d=n*(1-e*(1-s)),a){case 0:o=n,i=d,r=l;break;case 1:o=c,i=n,r=l;break;case 2:o=l,i=n,r=d;break;case 3:o=l,i=c,r=n;break;case 4:o=d,i=l,r=n;break;default:o=n,i=l,r=c}return[Math.round(255*o),Math.round(255*i),Math.round(255*r)]}};e.exports=i},{}],3:[function(t,e,n){(function(t){"use strict";function n(t){this.items={},this.length=0,a(t)&&(this.getItemID=t)}var o=t.tui.util,i=o.forEachOwnProperties,r=o.forEachArray,a=o.isFunction,s=o.isObject,l=Array.prototype.slice;n.and=function(t){var e;return t=l.call(arguments),e=t.length,function(n){for(var o=0;e>o;o+=1)if(!t[o].call(null,n))return!1;return!0}},n.or=function(t){var e;return t=l.call(arguments),e=t.length,function(n){for(var o=1,i=t[0].call(null,n);e>o;o+=1)i=i||t[o].call(null,n);return i}},n.merge=function(t){var e=l.call(arguments),i={},a=new n(e[0].getItemID),s=o.extend;return r(e,function(t){s(i,t.items)}),a.items=i,a.length=o.keys(a.items).length,a},n.prototype.getItemID=function(t){return t._id+""},n.prototype.add=function(t){var e,n;return arguments.length>1?void r(l.call(arguments),function(t){this.add(t)},this):(e=this.getItemID(t),n=this.items,n[e]||(this.length+=1),void(n[e]=t))},n.prototype.remove=function(t){var e,n,i=[];return this.length?arguments.length>1?i=o.map(l.call(arguments),function(t){return this.remove(t)},this):(e=this.items,s(t)&&(t=this.getItemID(t)),e[t]?(this.length-=1,n=e[t],delete e[t],n):i):i},n.prototype.clear=function(){this.items={},this.length=0},n.prototype.has=function(t){var e,n;return!!this.length&&(e=a(t),n=!1,e?this.each(function(e){return t(e)===!0?(n=!0,!1):void 0}):(t=s(t)?this.getItemID(t):t,n=o.isExisty(this.items[t])),n)},n.prototype.doWhenHas=function(t,e,n){var i=this.items[t];o.isExisty(i)&&e.call(n||this,i)},n.prototype.find=function(t){var e=new n;return this.hasOwnProperty("getItemID")&&(e.getItemID=this.getItemID),this.each(function(n){t(n)===!0&&e.add(n)}),e},n.prototype.groupBy=function(t,e){var i,r,a={},s=o.isFunction,l=s(t),c=this.getItemID;if(o.isArray(t)){if(o.forEachArray(t,function(t){a[t+""]=new n(c)}),!e)return a;t=e,l=!0}return this.each(function(e){l?r=t(e):(r=e[t],s(r)&&(r=r.apply(e))),i=a[r],i||(i=a[r]=new n(c)),i.add(e)}),a},n.prototype.single=function(){var t;return this.each(function(e){return t=e,!1},this),t},n.prototype.sort=function(t){var e=[];return this.each(function(t){e.push(t)}),a(t)&&(e=e.sort(t)),e},n.prototype.each=function(t,e){i(this.items,t,e||this)},n.prototype.toArray=function(){return this.length?o.map(this.items,function(t){return t}):[]},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,n){(function(t){"use strict";var n=t.tui.util,o=n.browser,i="_evt",r={START:["touchstart","mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},a={on:function(t,e,o,i){return n.isString(e)?void n.forEach(e.split(" "),function(e){a._on(t,e,o,i)}):void n.forEachOwnProperties(e,function(e,n){a._on(t,n,e,o)})},_on:function(t,e,o,r){var s,l,c;s=e+n.stamp(o)+(r?"_"+n.stamp(r):""),t[i]&&t[i][s]||(l=function(e){o.call(r||t,e||window.event)},c=l,"addEventListener"in t?"mouseenter"===e||"mouseleave"===e?(l=function(e){e=e||window.event,a._checkMouse(t,e)&&c(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",l,!1)):("mousewheel"===e&&t.addEventListener("DOMMouseScroll",l,!1),t.addEventListener(e,l,!1)):"attachEvent"in t&&t.attachEvent("on"+e,l),t[i]=t[i]||{},t[i][s]=l)},off:function(t,e,o,i){return n.isString(e)?void n.forEach(e.split(" "),function(e){a._off(t,e,o,i)}):void n.forEachOwnProperties(e,function(e,n){a._off(t,n,e,o)})},_off:function(t,e,o,r){var a=e+n.stamp(o)+(r?"_"+n.stamp(r):""),s=t[i]&&t[i][a];if(s){if("removeEventListener"in t)"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",s,!1):("mousewheel"===e&&t.removeEventListener("DOMMouseScroll",s,!1),t.removeEventListener(e,s,!1));else if("detachEvent"in t)try{t.detachEvent("on"+e,s)}catch(l){}if(delete t[i][a],!n.keys(t[i]).length)return n.browser.msie&&n.browser.version<9?void(t[i]=null):void delete t[i]}},once:function(t,e,o,i){function r(){o.apply(i||t,arguments),s._off(t,e,r,i)}var s=this;return n.isObject(e)?void n.forEachOwnProperties(e,function(e,n){a.once(t,n,e,o)}):void a.on(t,e,r,i)},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){a.preventDefault(t),a.stopPropagation(t)},disableScrollPropagation:function(t){a.on(t,"mousewheel MozMousePixelScroll",a.stopPropagation)},disableClickPropagation:function(t){a.on(t,r.START.join(" ")+" click dblclick",a.stopPropagation)},getMousePosition:function(t,e){var n;return e?(n=e.getBoundingClientRect(),[t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop]):[t.clientX,t.clientY]},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(o){return!1}return n!==t},trigger:function(t,e,o){var i=/(mouse|click)/;n.isUndefined(o)&&i.exec(e)&&(o=a.mouseEvent(e)),t.dispatchEvent?t.dispatchEvent(o):t.fireEvent&&t.fireEvent("on"+e,o)},mouseEvent:function(t,e){var i,r;return r=n.extend({bubbles:!0,cancelable:"mousemove"!==t,view:window,wheelDelta:0,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0},e),o.msie&&o.version<9&&delete r.wheelDelta,"function"==typeof document.createEvent?(i=document.createEvent("MouseEvents"),i.initMouseEvent(t,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,document.body.parentNode)):document.createEventObject&&(i=document.createEventObject(),n.forEach(r,function(t,e){i[e]=t},this),i.button={0:1,1:4,2:2}[i.button]||i.button),i},getMouseButton:function(t){var e,n="0,1,3,5,7",o="2,6",i="4";return document.implementation.hasFeature("MouseEvents","2.0")?t.button:(e=t.button+"",~n.indexOf(e)?0:~o.indexOf(e)?2:~i.indexOf(e)?1:void 0)}};e.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,n){(function(n){"use strict";function o(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var i,r=t("./domevent"),a=t("./collection"),s=n.tui.util,l="_pos",c=/^auto$|^$|%/;i={appendHTMLElement:function(t,e,n){var o;return n=n||"",o=document.createElement(t),o.className=n,e?e.appendChild(o):document.body.appendChild(o),o},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},get:function(t){return document.getElementById(t)},_matcher:function(t,e){var n=/^\./,o=/^#/;return n.test(e)?i.hasClass(t,e.replace(".","")):o.test(e)?t.id===e.replace("#",""):t.nodeName.toLowerCase()===e.toLowerCase()},find:function(t,e,n){function o(t,e){for(var s,d=t.childNodes,h=0,u=d.length;u>h;h+=1)if(s=d[h],"#text"!==s.nodeName)if(i._matcher(s,e)){if((c&&n(s)||!c)&&r.push(s),l){a=!0;break}}else if(s.childNodes.length>0&&(o(s,e),a))break}var r=[],a=!1,l=s.isUndefined(n)||n===!1,c=s.isFunction(n);return s.isString(e)&&(e=i.get(e)),e=e||window.document.body,o(e,t),l?r[0]||null:r},closest:function(t,e){var n=t.parentNode;if(i._matcher(t,e))return t;for(;n&&n!==window.document.body;){if(i._matcher(n,e))return n;n=n.parentNode}},text:function(t){var e="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)e+=i.text(t)}else if(3===o||4===o)return t.nodeValue}else for(;t[n];n+=1)e+=i.text(t[n]);return e},setData:function(t,e,n){return"dataset"in t?void(t.dataset[e]=n):void t.setAttribute("data-"+e,n)},getData:function(t,e){return"dataset"in t?t.dataset[e]:t.getAttribute("data-"+e)},hasClass:function(t,e){var n;return s.isUndefined(t.classList)?(n=i.getClass(t),n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)):t.classList.contains(e)},addClass:function(t,e){var n;s.isUndefined(t.classList)?i.hasClass(t,e)||(n=i.getClass(t),i.setClass(t,(n?n+" ":"")+e)):s.forEachArray(e.split(" "),function(e){t.classList.add(e)})},setClass:function(t,e){s.isUndefined(t.className.baseVal)?t.className=e:t.className.baseVal=e},removeClass:function(t,e){var n="";s.isUndefined(t.classList)?(n=(" "+i.getClass(t)+" ").replace(" "+e+" "," "),i.setClass(t,o(n))):t.classList.remove(e)},getClass:function(t){return t&&t.className?s.isUndefined(t.className.baseVal)?t.className:t.className.baseVal:""},getStyle:function(t,e){var n,o=t.style[e]||t.currentStyle&&t.currentStyle[e];return o&&"auto"!==o||!document.defaultView||(n=document.defaultView.getComputedStyle(t,null),o=n?n[e]:null),"auto"===o?null:o},getComputedStyle:function(t){var e=document.defaultView;return e&&e.getComputedStyle?document.defaultView.getComputedStyle(t):{getPropertyValue:function(e){var n=/(\-([a-z]){1})/g;return"float"===e&&(e="styleFloat"),n.test(e)&&(e=e.replace(n,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null}}},setPosition:function(t,e,n){e=s.isUndefined(e)?0:e,n=s.isUndefined(n)?0:n,t[l]=[e,n],t.style.left=e+"px",t.style.top=n+"px"},getPosition:function(t,e){var n,o,i;return e&&(t[l]=null),t[l]?t[l]:(n=0,o=0,(c.test(t.style.left)||c.test(t.style.top))&&"getBoundingClientRect"in t?(i=t.getBoundingClientRect(),n=i.left,o=i.top):(n=parseFloat(t.style.left||0),o=parseFloat(t.style.top||0)),[n,o])},getSize:function(t){var e,n=i.getStyle(t,"width"),o=i.getStyle(t,"height");return(c.test(n)||c.test(o))&&"getBoundingClientRect"in t?(e=t.getBoundingClientRect(),n=e.width,o=e.height):(n=parseFloat(n||0),o=parseFloat(o||0)),[n,o]},testProp:function(t){for(var e=document.documentElement.style,n=0,o=t.length;o>n;n+=1)if(t[n]in e)return t[n];return!1},getFormData:function(t){var e=new a(function(){return this.length}),n=function(t){return!t.disabled},o={};return e.add.apply(e,i.find("input",t,n).concat(i.find("select",t,n)).concat(i.find("textarea",t,n))),e=e.groupBy(function(t){return t&&t.getAttribute("name")||"_other"}),s.forEach(e,function(t,e){"_other"!==e&&t.each(function(n){var r=n.nodeName.toLowerCase(),a=n.type,l=[];"radio"===a?l=[t.find(function(t){return t.checked}).toArray().pop()]:"checkbox"===a?l=t.find(function(t){return t.checked}).toArray():"select"===r?t.find(function(t){return!!t.childNodes.length}).each(function(t){l=l.concat(i.find("option",t,function(t){return t.selected}))}):l=t.find(function(t){return""!==t.value}).toArray(),l=s.map(l,function(t){return t.value}),l.length?1===l.length&&(l=l[0]):l="",o[e]=l})}),o}};var d=i.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),h="onselectstart"in document,u="";i.disableTextSelection=function(){return h?function(){r.on(window,"selectstart",r.preventDefault)}:function(){var t=document.documentElement.style;u=t[d],t[d]="none"}}(),i.enableTextSelection=function(){return h?function(){r.off(window,"selectstart",r.preventDefault)}:function(){document.documentElement.style[d]=u}}(),i.disableImageDrag=function(){r.on(window,"dragstart",r.preventDefault)},i.enableImageDrag=function(){r.off(window,"dragstart",r.preventDefault)},e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./collection":3,"./domevent":4}],6:[function(t,e,n){(function(n){"use strict";function o(t,e){a.on(e,"mousedown",this._onMouseDown,this),this.options=i.extend({distance:10},t),this.container=e,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}var i=n.tui.util,r=t("./domutil"),a=t("./domevent");o.prototype.destroy=function(){a.off(this.container,"mousedown",this._onMouseDown,this),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},o.prototype._toggleDragEvent=function(t){var e,o,i=this.container;t?(e="on",o="disable"):(e="off",o="enable"),r[o+"TextSelection"](i),r[o+"ImageDrag"](i),a[e](n.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)},o.prototype._getEventData=function(t){return{target:t.target||t.srcElement,originEvent:t}},o.prototype._onMouseDown=function(t){0===a.getMouseButton(t)&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(t),this._toggleDragEvent(!0))},o.prototype._onMouseMove=function(t){var e=this.options.distance;return a.preventDefault(t),this._isMoved=!0,this._distance<e?void(this._distance+=1):this._dragStartFired||(this._dragStartFired=!0,this.invoke("dragStart",this._dragStartEventData))?void this.fire("drag",this._getEventData(t)):void this._toggleDragEvent(!1)},o.prototype._onMouseUp=function(t){return this._toggleDragEvent(!1),this._isMoved?(this._isMoved=!1,void this.fire("dragEnd",this._getEventData(t))):void this.fire("click",this._getEventData(t))},i.CustomEvents.mixin(o),e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./domevent":4,"./domutil":5}],7:[function(t,e,n){(function(n){"use strict";function o(t,e){var n=i.stamp(this);t=t||{},i.isUndefined(e)&&(e=r.appendHTMLElement("div")),r.addClass(e,"tui-view-"+n),this.id=n,this.container=e,this.childs=new a(function(t){return i.stamp(t)}),this.parent=null}var i=n.tui.util,r=t("./domutil"),a=t("./collection");o.prototype.addChild=function(t,e){e&&e.call(t,this),t.parent=this,this.childs.add(t)},o.prototype.removeChild=function(t,e){var n=i.isNumber(t)?this.childs.items[t]:t;t=i.stamp(n),e&&e.call(n,this),this.childs.remove(t)},o.prototype.render=function(){this.childs.each(function(t){t.render()})},o.prototype.recursive=function(t,e){i.isFunction(t)&&(e||t(this),this.childs.each(function(e){e.recursive(t)}))},o.prototype.resize=function(){for(var t=Array.prototype.slice.call(arguments),e=this.parent;e;)i.isFunction(e._onResize)&&e._onResize.apply(e,t),e=e.parent},o.prototype._beforeDestroy=function(){},o.prototype._destroy=function(){this._beforeDestroy(),this.childs.clear(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},o.prototype.destroy=function(t){this.childs.each(function(t){t.destroy(!0),t._destroy()}),t||this._destroy()},o.prototype.getViewBound=function(){var t=this.container,e=r.getPosition(t),n=r.getSize(t);return{x:e[0],y:e[1],width:n[0],height:n[1]}},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./collection":3,"./domutil":5}],8:[function(t,e,n){(function(n){"use strict";function o(t){alert(t)}function i(t){var e;return this instanceof i?(t=this.options=r.extend({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail"},t),t.container?(e=this.layout=new s(t,t.container),this.palette=new l(t,e.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new c(t,e.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),e.addChild(this.palette),e.addChild(this.slider),void this.render(t.color)):void o("Colorpicker(): need container option.")):new i(t)}var r=n.tui.util,a=t("./colorutil"),s=t("./layout"),l=t("./palette"),c=t("./slider");i.prototype._onSelectColorInPalette=function(t){var e=t.color,n=this.options;return a.isValidRGB(e)?void(n.color!==e&&(n.color=e,this.render(e),this.fire("selectColor",{color:e,origin:"palette"}))):void this.render()},i.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},i.prototype._onSelectColorInSlider=function(t){var e=t.color,n=this.options;n.color!==e&&(n.color=e,this.palette.render(e),this.fire("selectColor",{color:e,origin:"slider"}))},i.prototype.setColor=function(t){a.isValidRGB(t)||o("Colorpicker#setColor(): need valid hex string color value"),this.options.color=t,this.render(t)},i.prototype.getColor=function(){return this.options.color},i.prototype.toggle=function(t){this.layout.container.style.display=t?"block":"none"},i.prototype.render=function(t){this.layout.render(t||this.options.color)},i.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},r.CustomEvents.mixin(i),e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./colorutil":2,"./layout":9,"./palette":10,"./slider":11}],9:[function(t,e,n){(function(n){"use strict";function o(t,e){this.options=i.extend({cssPrefix:"tui-colorpicker-"},t),e=r.appendHTMLElement("div",e,this.options.cssPrefix+"container"),a.call(this,t,e),this.render()}var i=n.tui.util,r=t("./core/domutil"),a=t("./core/view");i.inherit(o,a),o.prototype.render=function(t){this.recursive(function(e){e.render(t)},!0)},e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core/domutil":5,"./core/view":7}],10:[function(t,e,n){(function(n){"use strict";function o(t,e){this.options=i.extend({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},t),e=r.appendHTMLElement("div",e,this.options.cssPrefix+"palette-container"),s.call(this,t,e)}var i=n.tui.util,r=t("./core/domutil"),a=t("./core/domevent"),s=t("./core/view"),l=t("../template/palette");i.inherit(o,s),o.prototype._onClick=function(t){var e=this.options,n=t.srcElement||t.target,o={};return r.hasClass(n,e.cssPrefix+"palette-button")?(o.color=n.value,void this.fire("_selectColor",o)):void(r.hasClass(n,e.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider"))},o.prototype._onChange=function(t){var e=this.options,n=t.srcElement||t.target,o={};return r.hasClass(n,e.cssPrefix+"palette-hex")?(o.color=n.value,void this.fire("_selectColor",o)):void 0},o.prototype._beforeDestroy=function(){this._toggleEvent(!1)},o.prototype._toggleEvent=function(t){var e,n=this.options,o=this.container,i=a[t?"on":"off"];i(o,"click",this._onClick,this),e=r.find("."+n.cssPrefix+"palette-hex",o),e&&i(e,"change",this._onChange,this)},o.prototype.render=function(t){var e=this.options,n="";this._toggleEvent(!1),n=l.layout.replace("{{colorList}}",i.map(e.preset,function(n){var o=l.item.replace(/{{color}}/g,n);return o=o.replace("{{selected}}",n===t?" "+e.cssPrefix+"selected":"")}).join("")),n=n.replace(/{{cssPrefix}}/g,e.cssPrefix).replace("{{detailTxt}}",e.detailTxt).replace(/{{color}}/g,t),this.container.innerHTML=n,this._toggleEvent(!0)},i.CustomEvents.mixin(o),e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../template/palette":13,"./core/domevent":4,"./core/domutil":5,"./core/view":7}],11:[function(t,e,n){(function(n){"use strict";function o(t,e){e=r.appendHTMLElement("div",e,t.cssPrefix+"slider-container"),e.style.display="none",c.call(this,t,e),this.options=i.extend({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},t),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new d({distance:0},e),this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}var i=n.tui.util,r=t("./core/domutil"),a=t("./core/domevent"),s=t("./svgvml"),l=t("./colorutil"),c=t("./core/view"),d=t("./core/drag"),h=t("../template/slider"),u=[-7,112],f=[-3,115],p=359.99;i.inherit(o,c),o.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},o.prototype.toggle=function(t){this.container.style.display=t?"block":"none"},o.prototype.isVisible=function(){return"block"===this.container.style.display},o.prototype.render=function(t){var e,n,o=this,i=o.container,a=o.options,s=h.layout;s=s.replace(/{{slider}}/,h.slider),s=s.replace(/{{huebar}}/,h.huebar),s=s.replace(/{{cssPrefix}}/g,a.cssPrefix),o.container.innerHTML=s,o.sliderHandleElement=r.find("."+a.cssPrefix+"slider-handle",i),o.huebarHandleElement=r.find("."+a.cssPrefix+"huebar-handle",i),o.baseColorElement=r.find("."+a.cssPrefix+"slider-basecolor",i),e=l.hexToRGB(t),n=l.rgbToHSV.apply(null,e),this.moveHue(n[0],!0),this.moveSaturationAndValue(n[1],n[2],!0)},o.prototype._moveColorSliderHandle=function(t,e,n){var o,i=this.sliderHandleElement;e=Math.max(u[0],e),e=Math.min(u[1],e),t=Math.max(u[0],t),t=Math.min(u[1],t),s.setTranslateXY(i,t,e),o=e>50?"white":"black",s.setStrokeColor(i,o),n||this.fire("_selectColor",{color:l.rgbToHEX.apply(null,this.getRGB())})},o.prototype.moveSaturationAndValue=function(t,e,n){var o,i,r,a;t=t||0,e=e||0,o=Math.abs(u[0]),i=u[1],r=t*i/100-o,a=i-e*i/100-o,this._moveColorSliderHandle(r,a,n)},o.prototype._moveColorSliderByPosition=function(t,e){var n=u[0];this._moveColorSliderHandle(t+n,e+n)},o.prototype.getSaturationAndValue=function(){var t,e,n=Math.abs(u[0]),o=n+u[1],i=s.getTranslateXY(this.sliderHandleElement);return t=(i[1]+n)/o*100,e=100-(i[0]+n)/o*100,[t,e]},o.prototype._moveHueHandle=function(t,e){var n,o,i=this.huebarHandleElement,r=this.baseColorElement;t=Math.max(f[0],t),t=Math.min(f[1],t),s.setTranslateY(i,t),n=l.hsvToRGB(this.getHue(),100,100),o=l.rgbToHEX.apply(null,n),s.setGradientColorStop(r,o),e||this.fire("_selectColor",{color:l.rgbToHEX.apply(null,this.getRGB())})},o.prototype.moveHue=function(t,e){var n,o,i=0;n=Math.abs(f[0]),o=n+f[1],t=t||0,i=o*t/p-n,this._moveHueHandle(i,e)},o.prototype._moveHueByPosition=function(t){var e=f[0];this._moveHueHandle(t+e)},o.prototype.getHue=function(){var t,e,n=this.huebarHandleElement,o=s.getTranslateXY(n);return t=Math.abs(f[0]),e=t+f[1],(o[0]+t)*p/e},o.prototype.getHSV=function(){var t=this.getSaturationAndValue(),e=this.getHue();return[e].concat(t)},o.prototype.getRGB=function(){return l.hsvToRGB.apply(null,this.getHSV())},o.prototype._prepareColorSliderForMouseEvent=function(t){var e,n=this.options,o=r.closest(t.target,"."+n.cssPrefix+"slider-part");return e=this._dragDataCache={isColorSlider:r.hasClass(o,n.cssPrefix+"slider-left"),parentElement:o}},o.prototype._onClick=function(t){var e=this._prepareColorSliderForMouseEvent(t),n=a.getMousePosition(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(n[0],n[1]):this._moveHueByPosition(n[1]),this._dragDataCache=null},o.prototype._onDragStart=function(t){this._prepareColorSliderForMouseEvent(t)},o.prototype._onDrag=function(t){var e=this._dragDataCache,n=a.getMousePosition(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(n[0],n[1]):this._moveHueByPosition(n[1])},o.prototype._onDragEnd=function(){this._dragDataCache=null},i.CustomEvents.mixin(o),e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../template/slider":14,"./colorutil":2,"./core/domevent":4,"./core/domutil":5,"./core/drag":6,"./core/view":7,"./svgvml":12}],12:[function(t,e,n){(function(t){"use strict";var n=t.tui.util,o=/[\.\-0-9]+/g,i=-6,r={isOldBrowser:function(){var t=r._isOldBrowser;return n.isExisty(t)||(r._isOldBrowser=t=n.browser.msie&&n.browser.version<9),t},getTranslateXY:function(t){var e;return r.isOldBrowser()?(e=t.style,[parseFloat(e.top),parseFloat(e.left)]):(e=t.getAttribute("transform"))?(e=e.match(o),[parseFloat(e[1]),parseFloat(e[0])]):[0,0]},setTranslateXY:function(t,e,n){r.isOldBrowser()?(t.style.left=e+"px",t.style.top=n+"px"):t.setAttribute("transform","translate("+e+","+n+")")},setTranslateY:function(t,e){r.isOldBrowser()?t.style.top=e+"px":t.setAttribute("transform","translate("+i+","+e+")")},setStrokeColor:function(t,e){r.isOldBrowser()?t.strokecolor=e:t.setAttribute("stroke",e)},setGradientColorStop:function(t,e){r.isOldBrowser()?t.color=e:t.setAttribute("stop-color",e)}};e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e,n){"use strict";var o=['<ul class="{{cssPrefix}}clearfix">{{colorList}}</ul>','<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join("\n"),i='<li><input class="{{cssPrefix}}palette-button{{selected}}" type="button" style="background-color:{{color}};color:{{color}}" title="{{color}}" value="{{color}}" /></li>';e.exports={layout:o,item:i}},{}],14:[function(t,e,n){(function(t){"use strict";var n=t.tui.util,o=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join("\n"),i=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color)"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black)"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join("\n"),r=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join("\n"),a=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g)"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join("\n"),s=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join("\n"),l=n.browser.msie&&n.browser.version<9;l&&t.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),e.exports={layout:o,slider:l?r:i,huebar:l?s:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o;n(1),n(2),n(3),n(4),n(5),n(7),n(13),n(14),o=n(22),$.fn.tuiEditor=function(){var t,e,n,i=$.makeArray(arguments);if(n=this[0])if(t=i[0]||{},e=$.data(n,"tuiEditor")){if("string"==typeof t)return e[t].apply(e,i.slice(1))}else t.el=n,e=o.factory(t),$.data(n,"tuiEditor",e);return this},window.tui=window.tui||{},window.tui.Editor=o},function(t,e){"use strict";CodeMirror.overlayMode=function(t,e,n){return{startState:function(){return{base:CodeMirror.startState(t),overlay:CodeMirror.startState(e),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:CodeMirror.copyState(t,n.base),overlay:CodeMirror.copyState(e,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(o,i){return(o!=i.streamSeen||Math.min(i.basePos,i.overlayPos)<o.start)&&(i.streamSeen=o,
i.basePos=i.overlayPos=o.start),o.start==i.basePos&&(i.baseCur=t.token(o,i.base),i.basePos=o.pos),o.start==i.overlayPos&&(o.pos=o.start,i.overlayCur=e.token(o,i.overlay),i.overlayPos=o.pos),o.pos=Math.min(i.basePos,i.overlayPos),null==i.overlayCur?i.baseCur:null!=i.baseCur&&i.overlay.combineTokens||n&&null==i.overlay.combineTokens?i.baseCur+" "+i.overlayCur:i.overlayCur},indent:t.indent&&function(e,n){return t.indent(e.base,n)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(n){t.blankLine&&t.blankLine(n.base),e.blankLine&&e.blankLine(n.overlay)}}}},function(t,e){"use strict";CodeMirror.defineMode("markdown",function(t,e){function n(e){if(CodeMirror.findModeByName){var n=CodeMirror.findModeByName(e);n&&(e=n.mime||n.mimes[0])}var o=CodeMirror.getMode(t,e);return"null"==o.name?null:o}function o(t,e,n){return e.f=e.inline=n,n(t,e)}function i(t){return!t||!/\S/.test(t.string)}function r(t){return t.linkTitle=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,w||t.f!=s||(t.f=u,t.block=a),t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine=null,null}function a(t,r){var a=t.sol(),s=r.list!==!1,c=r.indentedCode;r.indentedCode=!1,s&&(r.indentationDiff>=0&&(r.indentationDiff<4&&(r.indentation-=r.indentationDiff),r.list=null),r.indentation>0?(r.list=null,r.listDepth=Math.floor(r.indentation/4)+1):(r.list=!1,r.listDepth=0));var h=null;if(r.indentationDiff>=4)return t.skipToEnd(),c||i(r.prevLine)?(r.indentation-=4,r.indentedCode=!0,T):null;if(t.eatSpace())return null;if((h=t.match(V))&&h[1].length<=6)return r.header=h[1].length,e.highlightFormatting&&(r.formatting="header"),r.f=r.inline,d(r);if(!(i(r.prevLine)||r.quote||s||c)&&(h=t.match(j)))return r.header="="==h[0].charAt(0)?1:2,e.highlightFormatting&&(r.formatting="header"),r.f=r.inline,d(r);if(t.eat(">"))return r.quote=a?1:r.quote+1,e.highlightFormatting&&(r.formatting="quote"),t.eatSpace(),d(r);if("["===t.peek())return o(t,r,m);if(t.match(H,!0))return r.hr=!0,N;if((i(r.prevLine)||s)&&(t.match(F,!1)||t.match(U,!1))){var u=null;return t.match(F,!0)?u="ul":(t.match(U,!0),u="ol"),r.indentation=t.column()+t.current().length,r.list=!0,r.listDepth++,e.taskLists&&t.match(W,!1)&&(r.taskList=!0),r.f=r.inline,e.highlightFormatting&&(r.formatting=["list","list-"+u]),d(r)}return e.fencedCodeBlocks&&(h=t.match(q,!0))?(r.fencedChars=h[1],r.localMode=n(h[2]),r.localMode&&(r.localState=r.localMode.startState()),r.f=r.block=l,e.highlightFormatting&&(r.formatting="code-block"),r.code=!0,d(r)):o(t,r,r.inline)}function s(t,e){var n=C.token(t,e.htmlState);return(w&&null===e.htmlState.tagStart&&!e.htmlState.context&&e.htmlState.tokenize.isInText||e.md_inside&&t.current().indexOf(">")>-1)&&(e.f=u,e.block=a,e.htmlState=null),n}function l(t,e){return t.sol()&&e.fencedChars&&t.match(e.fencedChars,!1)?(e.localMode=e.localState=null,e.f=e.block=c,null):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),T)}function c(t,n){t.match(n.fencedChars),n.block=a,n.f=u,n.fencedChars=null,e.highlightFormatting&&(n.formatting="code-block"),n.code=!0;var o=d(n);return n.code=!1,o}function d(t){var n=[];if(t.formatting){n.push(B),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var o=0;o<t.formatting.length;o++)n.push(B+"-"+t.formatting[o]),"header"===t.formatting[o]&&n.push(B+"-"+t.formatting[o]+"-"+t.header),"quote"===t.formatting[o]&&(!e.maxBlockquoteDepth||e.maxBlockquoteDepth>=t.quote?n.push(B+"-"+t.formatting[o]+"-"+t.quote):n.push("error"))}if(t.taskOpen)return n.push("meta"),n.length?n.join(" "):null;if(t.taskClosed)return n.push("property"),n.length?n.join(" "):null;if(t.linkHref?n.push(R,"url"):(t.strong&&n.push(O),t.em&&n.push(P),t.strikethrough&&n.push(D),t.linkText&&n.push(L),t.code&&n.push(T)),t.header&&(n.push(E),n.push(E+"-"+t.header)),t.quote&&(n.push(k),!e.maxBlockquoteDepth||e.maxBlockquoteDepth>=t.quote?n.push(k+"-"+t.quote):n.push(k+"-"+e.maxBlockquoteDepth)),t.list!==!1){var i=(t.listDepth-1)%3;i?1===i?n.push(x):n.push(S):n.push(M)}return t.trailingSpaceNewLine?n.push("trailing-space-new-line"):t.trailingSpace&&n.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),n.length?n.join(" "):null}function h(t,e){if(t.match(K,!0))return d(e)}function u(t,n){var o=n.text(t,n);if("undefined"!=typeof o)return o;if(n.list)return n.list=null,d(n);if(n.taskList){var i="x"!==t.match(W,!0)[1];return i?n.taskOpen=!0:n.taskClosed=!0,e.highlightFormatting&&(n.formatting="task"),n.taskList=!1,d(n)}if(n.taskOpen=!1,n.taskClosed=!1,n.header&&t.match(/^#+$/,!0))return e.highlightFormatting&&(n.formatting="header"),d(n);var r=t.sol(),a=t.next();if("\\"===a&&(t.next(),e.highlightFormatting)){var s=d(n);return s?s+" formatting-escape":"formatting-escape"}if(n.linkTitle){n.linkTitle=!1;var l=a;"("===a&&(l=")"),l=(l+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var c="^\\s*(?:[^"+l+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(t.match(new RegExp(c),!0))return R}if("`"===a){var h=n.formatting;e.highlightFormatting&&(n.formatting="code");var u=d(n),g=t.pos;t.eatWhile("`");var m=1+t.pos-g;return n.code?m===b?(n.code=!1,u):(n.formatting=h,d(n)):(b=m,n.code=!0,d(n))}if(n.code)return d(n);if("!"===a&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),$;if("["===a&&t.match(/.*\](\(.*\)| ?\[.*\])/,!1))return n.linkText=!0,e.highlightFormatting&&(n.formatting="link"),d(n);if("]"===a&&n.linkText&&t.match(/\(.*\)| ?\[.*\]/,!1)){e.highlightFormatting&&(n.formatting="link");var s=d(n);return n.linkText=!1,n.inline=n.f=p,s}if("<"===a&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=f,e.highlightFormatting&&(n.formatting="link");var s=d(n);return s?s+=" ":s="",s+A}if("<"===a&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=f,e.highlightFormatting&&(n.formatting="link");var s=d(n);return s?s+=" ":s="",s+I}if("<"===a&&t.match(/^\/\w*?>/))return n.md_inside=!1,"tag";var v=!1;if(!e.underscoresBreakWords&&"_"===a&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var y=t.pos-2;if(y>=0){var _=t.string.charAt(y);"_"!==_&&_.match(/(\w)/,!1)&&(v=!0)}}if("*"===a||"_"===a&&!v)if(r&&" "===t.peek());else{if(n.strong===a&&t.eat(a)){e.highlightFormatting&&(n.formatting="strong");var u=d(n);return n.strong=!1,u}if(!n.strong&&t.eat(a))return n.strong=a,e.highlightFormatting&&(n.formatting="strong"),d(n);if(n.em===a){e.highlightFormatting&&(n.formatting="em");var u=d(n);return n.em=!1,u}if(!n.em)return n.em=a,e.highlightFormatting&&(n.formatting="em"),d(n)}else if(" "===a&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return d(n);t.backUp(1)}if(e.strikethrough)if("~"===a&&t.eatWhile(a)){if(n.strikethrough){e.highlightFormatting&&(n.formatting="strikethrough");var u=d(n);return n.strikethrough=!1,u}if(t.match(/^[^\s]/,!1))return n.strikethrough=!0,e.highlightFormatting&&(n.formatting="strikethrough"),d(n)}else if(" "===a&&t.match(/^~~/,!0)){if(" "===t.peek())return d(n);t.backUp(2)}return" "===a&&(t.match(/ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),d(n)}function f(t,n){var o=t.next();if(">"===o){n.f=n.inline=u,e.highlightFormatting&&(n.formatting="link");var i=d(n);return i?i+=" ":i="",i+A}return t.match(/^[^>]+/,!0),A}function p(t,n){if(t.eatSpace())return null;var o=t.next();return"("===o||"["===o?(n.f=n.inline=g("("===o?")":"]"),e.highlightFormatting&&(n.formatting="link-string"),n.linkHref=!0,d(n)):"error"}function g(t){return function(n,o){var i=n.next();if(i===t){o.f=o.inline=u,e.highlightFormatting&&(o.formatting="link-string");var r=d(o);return o.linkHref=!1,r}return n.match(_(t),!0)&&n.backUp(1),o.linkHref=!0,d(o)}}function m(t,n){return t.match(/^[^\]]*\]:/,!1)?(n.f=v,t.next(),e.highlightFormatting&&(n.formatting="link"),n.linkText=!0,d(n)):o(t,n,u)}function v(t,n){if(t.match(/^\]:/,!0)){n.f=n.inline=y,e.highlightFormatting&&(n.formatting="link");var o=d(n);return n.linkText=!1,o}return t.match(/^[^\]]+/,!0),L}function y(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=u,R+" url")}function _(t){return Y[t]||(t=(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),Y[t]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+t+")")),Y[t]}var w=CodeMirror.modes.hasOwnProperty("xml"),C=CodeMirror.getMode(t,w?{name:"xml",htmlMode:!0}:"text/plain");void 0===e.highlightFormatting&&(e.highlightFormatting=!1),void 0===e.maxBlockquoteDepth&&(e.maxBlockquoteDepth=0),void 0===e.underscoresBreakWords&&(e.underscoresBreakWords=!0),void 0===e.taskLists&&(e.taskLists=!1),void 0===e.strikethrough&&(e.strikethrough=!1);var b=0,E="header",T="comment",k="quote",M="variable-2",x="variable-3",S="keyword",N="hr",$="tag",B="formatting",A="link",I="link",L="link",R="string",P="em",O="strong",D="strikethrough",H=/^([*\-_])(?:\s*\1){2,}\s*$/,F=/^[*\-+]\s+/,U=/^[0-9]+([.)])\s+/,W=/^\[(x| )\](?=\s)/,V=e.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,j=/^ *(?:\={1,}|-{1,})\s*$/,K=/^[^#!\[\]*_\\<>` "'(~]+/,q=new RegExp("^("+(e.fencedCodeBlocks===!0?"~~~+|```+":e.fencedCodeBlocks)+")[ \\t]*([\\w+#]*)"),Y=[],G={startState:function(){return{f:a,prevLine:null,thisLine:null,block:a,htmlState:null,indentation:0,inline:u,text:h,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t["this"],block:t.block,htmlState:t.htmlState&&CodeMirror.copyState(C,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?CodeMirror.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkTitle:t.linkTitle,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,header:t.header,hr:t.hr,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedChars:t.fencedChars}},token:function(t,e){if(e.formatting=!1,t!=e.thisLine){var n=e.header||e.hr;if(e.header=0,e.hr=!1,t.match(/^\s*$/,!0)||n){if(r(e),!n)return null;e.prevLine=null}e.prevLine=e.thisLine,e.thisLine=t,e.taskList=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.f=e.block;var o=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((o-e.indentation)/4);i>4&&(i=4);var a=e.indentation+i;if(e.indentationDiff=a-e.indentation,e.indentation=a,o>0)return null}return e.f(t,e)},innerMode:function(t){return t.block==s?{state:t.htmlState,mode:C}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:G}},blankLine:r,getType:d,fold:"markdown"};return G},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown")},function(t,e){"use strict";CodeMirror.defineMode("gfm",function(t,e){function n(t){return t.code=!1,null}var o=0,i={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(t){return{code:t.code,codeBlock:t.codeBlock,ateSpace:t.ateSpace}},token:function(t,e){if(e.combineTokens=null,e.codeBlock)return t.match(/^```+/)?(e.codeBlock=!1,null):(t.skipToEnd(),null);if(t.sol()&&(e.code=!1),t.sol()&&t.match(/^```+/))return t.skipToEnd(),e.codeBlock=!0,null;if("`"===t.peek()){t.next();var n=t.pos;t.eatWhile("`");var i=1+t.pos-n;return e.code?i===o&&(e.code=!1):(o=i,e.code=!0),null}return e.code?(t.next(),null):t.eatSpace()?(e.ateSpace=!0,null):((t.sol()||e.ateSpace)&&(e.ateSpace=!1),t.next(),null)},blankLine:n},r={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:"```",strikethrough:!0};for(var a in e)r[a]=e[a];return r.name="markdown",CodeMirror.overlayMode(CodeMirror.getMode(t,r),i)},"markdown"),CodeMirror.defineMIME("text/x-gfm","gfm")},function(t,e){"use strict";var n=/^(\s*)(>[> ]*|[*+-]\s(?:\[(?:x|\s)\]\s)?|(\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(\s*)/,o=/^(\s*)(>[> ]*|[*+-]\s(?:\[(?:x|\s)\]\s)?|(\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(\s*)$/,i=/^ *(`{3,}|~{3,})[ \.]*\S+ */,r=/[*+-]\s/;CodeMirror.commands.subListIndentTab=function(t){if(t.getOption("disableInput"))return CodeMirror.Pass;for(var e=t.listSelections(),n=0;n<e.length;n++){var i=e[n].head,r=t.getLine(i.line),a=r.substr(0,i.ch);o.test(a)?t.replaceRange("\t"+r,{line:i.line,ch:0},{line:i.line,ch:r.length}):t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")}},CodeMirror.commands.newlineAndIndentContinue=function(t){if(t.getOption("disableInput"))return CodeMirror.Pass;for(var e=t.listSelections(),a=[],s=0;s<e.length;s++){var l,c=e[s].head,d=t.getStateAfter(c.line),h=d.base.list!==!1,u=0!==d.base.quote,f=t.getLine(c.line),p=i.test(f),g=n.exec(f);if(!e[s].empty()||!h&&!u&&!p||!g&&!p)return void t.execCommand("newlineAndIndent");if(p&&(l=t.getCursor(),l.line!==c.line||l.ch!==f.length))return void t.execCommand("newlineAndIndent");if(o.test(f))t.replaceRange("",{line:c.line,ch:0},{line:c.line,ch:c.ch+1}),a[s]="\n";else if(p)a[s]="\n\n```";else{var m,v=g[1],y=g[5];m=v.length===c.ch?"":r.test(g[2])||g[2].indexOf(">")>=0?g[2]:parseInt(g[3],10)+1+g[4],a[s]="\n"+v+m+y}}t.replaceSelections(a),p&&t.setCursor(c.line+1,0)}},function(t,e,n){"use strict";var o=n(6),i=/^\s*\* \[[xX ]\] [^\n]*/gm,r=/^\s*\* \[[xX]\] [^\n]*/gm;o.defineExtension("taskCounter",function(t){t.getTaskCount=function(){var e,n;return t.isViewOnly()?n=t.preview.$el.find(".task-list-item").length:t.isMarkdownMode()?(e=t.mdEditor.getValue().match(i),n=e?e.length:0):n=t.wwEditor.get$Body().find(".task-list-item").length,n},t.getCheckedTaskCount=function(){var e,n;return t.isViewOnly()?n=t.preview.$el.find(".task-list-item.checked").length:t.isMarkdownMode()?(e=t.mdEditor.getValue().match(r),n=e?e.length:0):n=t.wwEditor.get$Body().find(".task-list-item.checked").length,n}})},function(t,e){"use strict";function n(){this.exts=new o.Map}var o=tui.util;n.prototype.defineExtension=function(t,e){this.exts.set(t,e)},n.prototype.applyExtension=function(t,e){var n=this;e&&e.forEach(function(e){n.exts.has(e)&&n.exts.get(e)(t)})},t.exports=new n},function(t,e,n){"use strict";var o=n(6),i=n(8),r=n(9),a=n(10);o.defineExtension("scrollFollow",function(t){var e,n,o,s,l=!1,c=!0,d="tui-scrollfollow",h={active:"자동 스크롤 끄기",inActive:"자동 스크롤 켜기"};t.isViewOnly()||(s=t.getCodeMirror(),e=new r(s,t.preview),n=new i(e,s,t.preview.$el),"default"===t.getUI().name&&(o=new a({className:d,command:"scrollFollowToggle",tooltip:h.active,$el:$('<button class="active '+d+' tui-toolbar-icons" type="button"></button>')}),t.getUI().toolbar.addButton(o),"wysiwyg"===t.currentMode&&o.$el.hide(),t.on("changeModeToWysiwyg",function(){o.$el.hide()}),t.on("changeModeToMarkdown",function(){o.$el.show()}),t.addCommand("markdown",{name:"scrollFollowToggle",exec:function(){c=!c,c?(o.$el.addClass("active"),o.tooltip=h.active):(o.$el.removeClass("active"),o.tooltip=h.inActive)}})),s.on("change",function(){l=!1,e.makeSectionList()}),t.on("previewRenderAfter",function(){e.sectionMatch(),n.syncToPreview(),l=!0}),s.on("scroll",function(){c&&l&&n.syncToPreview()}))})},function(t,e){"use strict";function n(t,e,n){this.sectionManager=t,this.cm=e,this.$previewContainerEl=n,this.$contents=this.$previewContainerEl.find(".tui-editor-contents"),this._currentTimeoutId=null}var o=20;n.prototype._getEditorSectionHeight=function(t){var e;return e=this.cm.heightAtLine(t.end,"local"),e-=this.cm.heightAtLine(t.start>0?t.start-1:0,"local")},n.prototype._getEditorLineHeightGapInSection=function(t,e){var n;return n=this.cm.heightAtLine(e,"local"),n-=this.cm.heightAtLine(t.start>0?t.start-1:0,"local"),Math.max(n,0)},n.prototype._getEditorSectionScrollRatio=function(t,e){var n,o=t.end===t.start;return n=o?0:this._getEditorLineHeightGapInSection(t,e)/this._getEditorSectionHeight(t)},n.prototype._getScrollFactorsOfEditor=function(){var t,e,n,o,i,r=this.cm,a=r.getScrollInfo();return o=a.height-a.top<=a.clientHeight,o?i={isEditorBottom:o}:(t=r.coordsChar({left:a.left,top:a.top},"local").line,e=this.sectionManager.sectionByLine(t),n=this._getEditorSectionScrollRatio(e,t),i={section:e,sectionRatio:n}),i},n.prototype._getScrollTopForPreview=function(){var t,e,n,i;return e=this._getScrollFactorsOfEditor(),n=e.section,i=e.sectionRatio,e.isEditorBottom?t=this.$contents.height():n.$previewSectionEl&&(t=n.$previewSectionEl[0].offsetTop,t+=n.$previewSectionEl.height()*i-o),t=t&&Math.max(t,0)},n.prototype.syncToPreview=function(){var t=this,e=this._getScrollTopForPreview();this._animateRun(this.$previewContainerEl.scrollTop(),e,function(e){t.$previewContainerEl.scrollTop(e)})},n.prototype._animateRun=function(t,e,n){function o(){var s,l=Date.now(),c=(l-r)/200;c<1?(s=t+i*Math.cos((1-c)*Math.PI/2),n(Math.ceil(s)),a._currentTimeoutId=setTimeout(o,1)):(n(e),a._currentTimeoutId=null)}var i=e-t,r=Date.now(),a=this;this._currentTimeoutId&&clearTimeout(this._currentTimeoutId),o()},t.exports=n},function(t,e){"use strict";function n(t,e){this.cm=t,this.preview=e,this.$previewContent=e.$el.find(".tui-editor-contents"),this._sectionList=null,this._currentSection=null}function o(){return this.nodeType===Node.ELEMENT_NODE}var i=/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/,r=/^ *(?:={1,}|-{1,})\s*$/,a=/^ *(`{3,}|~{3,})[ ]*$/,s=/^ *(`{3,}|~{3,})[ \.]*(\S+)? */,l=/\s/g;n.prototype._addNewSection=function(t,e){var n=this._makeSectionData(t,e);this._sectionList.push(n),this._currentSection=n},n.prototype.getSectionList=function(){return this._sectionList},n.prototype._makeSectionData=function(t,e){return{start:t,end:e,$previewSectionEl:null}},n.prototype._updateCurrentSectionEnd=function(t){this._currentSection.end=t},n.prototype._eachLineState=function(t){var e,n,o,i,r,a,s=!0,l=!1,c=!1,d="";for(o=this.cm.getDoc().lineCount(),n=0;n<o;n+=1){if(e=!1,i=this.cm.getLine(n),r=this.cm.getLine(n+1)||"",a=this.cm.getLine(n-1)||"",!l||i&&this._isTableCode(i)?!l&&this._isTable(i,r)&&(l=!0):l=!1,c&&this._isCodeBlockEnd(a)?c=!1:!c&&this._isCodeBlockStart(i)&&(c=this._doFollowedLinesHaveCodeBlockEnd(n,o)),this._isAtxHeader(i)?e=!0:c||l||!this._isSeTextHeader(i,r)||(e=!0),s){if(d+=i.trim(),!d)continue;s=!1}t(e,n)}},n.prototype._doFollowedLinesHaveCodeBlockEnd=function(t,e){var n,o=!1;for(n=t+1;n<e;n+=1)if(this._isCodeBlockEnd(this.cm.getLine(n))){o=!0;break}return o},n.prototype._isCodeBlockStart=function(t){return s.test(t)},n.prototype._isCodeBlockEnd=function(t){return a.test(t)},n.prototype._isTable=function(t,e){return this._isTableCode(t)&&this._isTableAligner(e)},n.prototype._isTableCode=function(t){return/(^\S?.*\|.*)/.test(t)},n.prototype._isTableAligner=function(t){return/(\s*[-:]+\s*\|)+/.test(t)},n.prototype._isAtxHeader=function(t){return i.test(t)},n.prototype._isSeTextHeader=function(t,e){return""!==t.replace(l,"")&&e&&r.test(e)},n.prototype.makeSectionList=function(){var t=this;this._sectionList=[],this._eachLineState(function(e,n){e||!t._sectionList.length?t._addNewSection(n,n):t._updateCurrentSectionEnd(n)})},n.prototype.sectionMatch=function(){var t;this._sectionList&&(t=this._getPreviewSections(),this._matchPreviewSectionsWithSectionlist(t))},n.prototype._matchPreviewSectionsWithSectionlist=function(t){var e=this;t.forEach(function(t,n){var o;e._sectionList[n]&&(o=$('<div class="content-id-'+n+'"></div>'),e._sectionList[n].$previewSectionEl=$(t).wrapAll(o).parent())})},n.prototype._getPreviewSections=function(){var t=0,e=[];return e[0]=[],this.$previewContent.contents().filter(o).each(function(n,o){o.tagName.match(/H1|H2|H3|H4|H5|H6/)&&e[t].length&&(e.push([]),t+=1),e[t].push(o)}),e},n.prototype.sectionByLine=function(t){var e,n=this._sectionList,o=n.length;for(e=0;e<o&&!(t<=n[e].end);e+=1);return e===o&&(e=o-1),n[e]},t.exports=n},function(t,e,n){"use strict";function o(t){i.call(this,{tagName:"button",className:t.className+" tui-toolbar-icons",rootElement:t.$el}),this._setOptions(t),this.render(),this.attachEvents({click:"_onClick"}),t.tooltip&&this.attachEvents({mouseover:"_onOver",mouseout:"_onOut"})}var i=n(11),r=n(12),a=tui.util,s=new r;o.prototype=a.extend({},i.prototype),o.prototype._setOptions=function(t){this.command=t.command,this.event=t.event,this.text=t.text,this.tooltip=t.tooltip,this.style=t.style},o.prototype.render=function(){this.$el.text(this.text),this.$el.attr("type","button"),this.style&&this.$el.attr("style",this.style)},o.prototype._onClick=function(){this.command?this.trigger("command",this.command):this.trigger("event",this.event),this.trigger("clicked")},o.prototype._onOver=function(){s.show(this.$el,this.tooltip)},o.prototype._onOut=function(){s.hide()},t.exports=o},function(t,e){"use strict";function n(t){t=o.extend({tagName:"div"},t||{}),this.tagName=t.tagName,this.className=t.className,this.$el=null,this._initID(),this.setRootElement(t.rootElement)}var o=tui.util,i=0;n.prototype.on=function(t,e){var n=this;o.isObject(t)?o.forEach(t,function(t,e){n._addEvent(e,t)}):this._addEvent(t,e)},n.prototype._addEvent=function(t,e){var n=this._parseEventType(t),o=n[0],i=n[1];i?this.$el.on(o,i,e):this.$el.on(o,e)},n.prototype.off=function(t,e){var n,o,i;t?(n=this._parseEventType(t),o=n[0],i=n[1],i?this.$el.off(o,i,e):this.$el.off(o,e)):this.$el.off()},n.prototype._parseEventType=function(t){var e=t.split(" "),n=e.shift(),o=e.join(" ");return[n,o]},n.prototype.attachEvents=function(t){var e,n=this,i=t||this.events;i&&o.forEach(i,function(t,i){if(!n[t])throw new Error("UIController#attachEvents: "+t+"란 메서드가 없습니다.");i=n.getEventNameWithNamespace(i),e=o.bind(n[t],n),n.on(i,e)})},n.prototype.detachEvents=function(){this.$el.off(".uicEvent"+this.id)},n.prototype.setRootElement=function(t){var e=this.className,n=this.tagName;t||(e=e||"uic"+this.id,t=$("<"+n+' class="'+e+'"/>')),this.$el=t},n.prototype.trigger=function(){this.$el.trigger.apply(this.$el,arguments)},n.prototype._initID=function(){this.id=i,i+=1},n.prototype.getEventNameWithNamespace=function(t){var e=t.split(" ");return e[0]+=".uicEvent"+this.id,e.join(" ")},n.prototype.addUIC=function(t,e){e?this.$el.find(e).append(t.$el):this.$el.append(t.$el)},n.prototype.remove=function(){this.detachEvents(),this.$el.remove()},n.prototype.destroy=function(){var t=this;this.remove(),this.detachEvents(),o.forEachOwnProperties(this,function(e,n){t[n]=null})},n.extend=function(t){var e=o.defineClass(this,t);return e.extend=n.extend,e},t.exports=n},function(t,e){"use strict";function n(){this.$el=$(o),this.$el.appendTo("body"),this.$el.hide()}var o='<div class="tui-tooltip"><div class="arrow"></div><span class="text"></span></span></div>';n.prototype.show=function(t,e){this.$el.css({top:t.offset().top+t.height()+13,left:t.offset().left+3}).find(".text").html(e).end().show()},n.prototype.hide=function(){this.$el.hide()},t.exports=n},function(t,e,n){"use strict";function o(t){var e,n,o,i,r,a,s;s="tui-color",t.eventManager.addEventType("colorButtonClicked"),t.getUI().toolbar.addButton({className:s,event:"colorButtonClicked",tooltip:"글자색상"},2),n=t.getUI().toolbar.$el.find("button."+s),e=$("<div />"),r=$('<div><button type="button" class="te-apply-button">입력</button></div>'),r.css("margin-top",10),o=tui.component.colorpicker.create({container:e[0]}),a=o.getColor(),e.append(r),i=t.getUI().createPopup({title:!1,content:e,$target:t.getUI().$el,css:{width:178,position:"absolute"}}),t.eventManager.listen("focus",function(){i.hide()}),t.eventManager.listen("colorButtonClicked",function(){t.eventManager.emit("closeAllPopup"),i.isShow()?i.hide():(i.$el.css({top:n.position().top+n.height()+5,left:n.position().left}),i.show())}),t.eventManager.listen("closeAllPopup",function(){i.hide()}),t.eventManager.listen("removeEditor",function(){o.off("selectColor")}),o.on("selectColor",function(e){a=e.color,"palette"===e.origin&&(t.exec("color",a),i.hide())}),i.$el.find(".te-apply-button").on("click",function(){t.exec("color",a)})}function i(t,e){return"{color:"+e+"}"+t+"{color}"}function r(t,e){return'<span style="color:'+e+'">'+t+"</span>"}function a(t){return t.replace(u,function(t,e,n,o){return e=parseInt(e,10),n=parseInt(n,10),o=parseInt(o,10),"#"+s(e.toString(16))+s(n.toString(16))+s(o.toString(16))})}function s(t){return"0"===t?"00":t}var l=n(6),c=/{color:(.+?)}(.*?){color}/g,d=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)/g,h=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)<\/span>/g,u=/rgb\((\d+)[, ]+(\d+)[, ]+(\d+)\)/g,f="#181818";l.defineExtension("colorSyntax",function(t){var e=!1;t.options.colorSyntax&&(e=!!t.options.colorSyntax.useCustomSyntax),t.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(t){var n;return n=e?t.replace(c,function(t,e,n){return r(n,e)}):t}),t.eventManager.listen("convertorAfterHtmlToMarkdownConverted",function(t){var n=e?h:d;return t.replace(n,function(t,n,o){var r;return n.match(u)&&(n=a(n)),r=e?i(o,n):t.replace(/ ?class="colour" ?/g," ").replace(u,n)})}),t.isViewOnly()||"default"!==t.getUI().name||(t.addCommand("markdown",{name:"color",exec:function(t,n){var o=t.getEditor();n&&(e?o.replaceSelection(i(o.getSelection(),n)):o.replaceSelection(r(o.getSelection(),n)),t.focus())}}),t.addCommand("wysiwyg",{name:"color",exec:function(t,e){var n=t.getEditor();e&&(n.hasFormat("PRE")||(e===f?n.changeFormat(null,{"class":"colour",tag:"span"}):n.setTextColour(e)),n.focus())}}),o(t))})},function(t,e,n){"use strict";var o=n(6),i=n(15),r=n(16),a=n(18),s=n(20),l=n(21),c=tui.util,d=100,h=/(\n)|(\r\n)|(\r)/g;o.defineExtension("mark",function(t){function e(){var e;return e=t.isViewOnly()?f:t.isWysiwygMode()?o:u}function n(){var n=e();p.getAll().forEach(function(t){n.updateMarkerWithExtraInfo(t)}),t.eventManager.emit("markerUpdated",p.getAll())}var o,u,f,p=new i,g=new r(p);t.eventManager.addEventType("markerUpdated"),t.isViewOnly()?f=new s(t.preview):(o=new a(t.getSquire()),u=new l(t.getCodeMirror())),$(window).on("resize",n),t.on("removeEditor",function(){$(window).off("resize",n)}),t.on("setValueAfter",function(){var t=e();g.resetContent(t.getTextContent())}),t.setValueWithMarkers=function(n,o){var i;return p.resetMarkers(),o.forEach(function(t){p.addMarker(t.start,t.end,t.id)}),t.setValue(n),g.resetContent(n.replace(h,"")),this.isViewOnly()||this.isWysiwygMode()?(i=e(),g.updateMarkersByContent(i.getTextContent())):i=u,p.getAll().forEach(function(t){i.updateMarkerWithExtraInfo(t)}),this.eventManager.emit("markerUpdated",p.getAll()),p.getAll()},t.getMarker=function(t){return p.getMarker(t)},t.getMarkersAll=function(){return p.getAll()},t.removeMarker=function(t){return p.removeMarker(t)},t.exportMarkers=function(){var t;return this.isMarkdownMode()?t=p.getMarkersData():(this.isViewOnly()||this.isWysiwygMode())&&(g.updateMarkersByContent(this.getValue().replace(h,"")),t=p.getMarkersData(),g.updateMarkersByContent(e().getTextContent())),t},t.selectMarker=function(t){var n=e(),o=this.getMarker(t);o&&n.selectOffsetRange(o.start,o.end)},t.addMarker=function(t,n,o){var i,r=e();return o?(i={start:t,end:n},i=r.updateMarkerWithExtraInfo(i)):(o=t,i=r.getMarkerInfoOfCurrentSelection()),i&&(i.id=o,i=p.addMarker(i),p.sortBy("end"),this.eventManager.emit("markerUpdated",[i])),i},t.clearSelect=function(){e().clearSelect()},t.isViewOnly()||(t.on("changeMode",function(){t._updateMarkers()}),t.on("change",c.debounce(function(){t._updateMarkers()},d)),t._updateMarkers=function(){var n=e();p.getAll().length&&(g.updateMarkersByContent(n.getTextContent()),p.getAll().forEach(function(t){n.updateMarkerWithExtraInfo(t)}),t.eventManager.emit("markerUpdated",p.getAll()))})})},function(t,e){"use strict";function n(){this._sortedMarkers=[],this._markersWithId={}}var o=tui.util;n.prototype.addMarker=function(t,e,n){var o;return o=n?{start:t,end:e,id:n}:t,this._markersWithId[o.id]||(this._sortedMarkers.push(o),this._markersWithId[o.id]=o),o},n.prototype.getMarker=function(t){return this._markersWithId[t]},n.prototype.removeMarker=function(t){var e,n;return e=this._markersWithId[t],delete this._markersWithId[t],n=this._sortedMarkers.indexOf(e),this._sortedMarkers.splice(n,1),e},n.prototype.updateMarker=function(t,e){var n=this.getMarker(t);return o.extend(n,e)},n.prototype.forEachByRangeAffected=function(t,e,n){var o;o=this._getMarkersByRangeAffected(t,e),o.forEach(n)},n.prototype._getMarkersByRangeAffected=function(t,e){var n;return n=this._sortedMarkers.filter(function(n){return n.end>e||n.end>t})},n.prototype.getAll=function(){return this._sortedMarkers},n.prototype.resetMarkers=function(){this._sortedMarkers=[],this._markersWithId={}},n.prototype.sortBy=function(t){this._sortedMarkers.sort(function(e,n){return e[t]-n[t]})},n.prototype.getMarkersData=function(){return this.getAll().map(function(t){return{start:t.start,end:t.end,id:t.id}})},t.exports=n},function(t,e,n){"use strict";function o(t){this._dmp=new i,this.markerList=t,this.oldTextContent=null}var i=n(17),r=tui.util,a=0,s=1,l=-1;o.prototype.resetContent=function(t){this.oldTextContent=r.isString(t)?t:null},o.prototype.updateMarkersByContent=function(t){var e;return r.isNull(this.oldTextContent)?(this.resetContent(t),[]):(e=this._makeMarkerDiffs(t),this.oldTextContent=t,this._getUpdateMarkersWithDiffs(e))},o.prototype._makeMarkerDiffs=function(t){var e=this.markerList,n=this,o={};return this._forEachChanges(t,function(t,i,r){e.forEachByRangeAffected(t,i,function(e){var a,s,l=o[e.id];a=n._calculateStartDiff(t,i,r,e),s=n._calculateEndDiff(t,i,r,e),l?(l.start+=a,l.end+=s):o[e.id]={start:a,end:s}})}),o},o.prototype._forEachChanges=function(t,e){var n=0,o=0,i=this._dmp.diff_main(this.oldTextContent,t);i.forEach(function(t){var i=t[0],r=t[1],c=0,d=r.length;return n=o,i===a?(n+=d,void(o+=d)):(i===s?c+=d:i===l&&(c-=d,o+=d),void e(n,o,c))})},o.prototype._calculateStartDiff=function(t,e,n,o){var i;return i=t<=o.start&&e<=o.start?n:t<=o.start&&e>o.start?t-o.start:0},o.prototype._calculateEndDiff=function(t,e,n,o){var i;return i=e<=o.end?n:t<=o.end&&e>o.start?t-o.end:0},o.prototype._getUpdateMarkersWithDiffs=function(t){var e=[],n=this.markerList;return r.forEachOwnProperties(t,function(t,o){var i=n.getMarker(o);n.updateMarker(o,{start:i.start+=t.start,end:i.end+=t.end}),e.push(i)}),e},t.exports=o},function(t,e){function n(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var o=-1,i=1,r=0;n.Diff,n.prototype.diff_main=function(t,e,n,o){"undefined"==typeof o&&(o=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=o;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[r,t]]:[];"undefined"==typeof n&&(n=!0);var a=n,s=this.diff_commonPrefix(t,e),l=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var c=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var d=this.diff_compute_(t,e,a,i);return l&&d.unshift([r,l]),c&&d.push([r,c]),this.diff_cleanupMerge(d),d},n.prototype.diff_compute_=function(t,e,n,a){var s;if(!t)return[[i,e]];if(!e)return[[o,t]];var l=t.length>e.length?t:e,c=t.length>e.length?e:t,d=l.indexOf(c);if(d!=-1)return s=[[i,l.substring(0,d)],[r,c],[i,l.substring(d+c.length)]],t.length>e.length&&(s[0][0]=s[2][0]=o),s;if(1==c.length)return[[o,t],[i,e]];var h=this.diff_halfMatch_(t,e);if(h){var u=h[0],f=h[1],p=h[2],g=h[3],m=h[4],v=this.diff_main(u,p,n,a),y=this.diff_main(f,g,n,a);return v.concat([[r,m]],y)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,a):this.diff_bisect_(t,e,a)},n.prototype.diff_lineMode_=function(t,e,n){var a=this.diff_linesToChars_(t,e);t=a.chars1,e=a.chars2;var s=a.lineArray,l=this.diff_main(t,e,!1,n);this.diff_charsToLines_(l,s),this.diff_cleanupSemantic(l),l.push([r,""]);for(var c=0,d=0,h=0,u="",f="";c<l.length;){switch(l[c][0]){case i:h++,f+=l[c][1];break;case o:d++,u+=l[c][1];break;case r:if(d>=1&&h>=1){l.splice(c-d-h,d+h),c=c-d-h;for(var a=this.diff_main(u,f,!1,n),p=a.length-1;p>=0;p--)l.splice(c,0,a[p]);c+=a.length}h=0,d=0,u="",f=""}c++}return l.pop(),l},n.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,a=e.length,s=Math.ceil((r+a)/2),l=s,c=2*s,d=new Array(c),h=new Array(c),u=0;u<c;u++)d[u]=-1,
h[u]=-1;d[l+1]=0,h[l+1]=0;for(var f=r-a,p=f%2!=0,g=0,m=0,v=0,y=0,_=0;_<s&&!((new Date).getTime()>n);_++){for(var w=-_+g;w<=_-m;w+=2){var C,b=l+w;C=w==-_||w!=_&&d[b-1]<d[b+1]?d[b+1]:d[b-1]+1;for(var E=C-w;C<r&&E<a&&t.charAt(C)==e.charAt(E);)C++,E++;if(d[b]=C,C>r)m+=2;else if(E>a)g+=2;else if(p){var T=l+f-w;if(T>=0&&T<c&&h[T]!=-1){var k=r-h[T];if(C>=k)return this.diff_bisectSplit_(t,e,C,E,n)}}}for(var M=-_+v;M<=_-y;M+=2){var k,T=l+M;k=M==-_||M!=_&&h[T-1]<h[T+1]?h[T+1]:h[T-1]+1;for(var x=k-M;k<r&&x<a&&t.charAt(r-k-1)==e.charAt(a-x-1);)k++,x++;if(h[T]=k,k>r)y+=2;else if(x>a)v+=2;else if(!p){var b=l+f-M;if(b>=0&&b<c&&d[b]!=-1){var C=d[b],E=l+C-b;if(k=r-k,C>=k)return this.diff_bisectSplit_(t,e,C,E,n)}}}}return[[o,t],[i,e]]},n.prototype.diff_bisectSplit_=function(t,e,n,o,i){var r=t.substring(0,n),a=e.substring(0,o),s=t.substring(n),l=e.substring(o),c=this.diff_main(r,a,!1,i),d=this.diff_main(s,l,!1,i);return c.concat(d)},n.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,r=-1,a=o.length;r<t.length-1;){r=t.indexOf("\n",n),r==-1&&(r=t.length-1);var s=t.substring(n,r+1);n=r+1,(i.hasOwnProperty?i.hasOwnProperty(s):void 0!==i[s])?e+=String.fromCharCode(i[s]):(e+=String.fromCharCode(a),i[s]=a,o[a++]=s)}return e}var o=[],i={};o[0]="";var r=n(t),a=n(e);return{chars1:r,chars2:a,lineArray:o}},n.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var o=t[n][1],i=[],r=0;r<o.length;r++)i[r]=e[o.charCodeAt(r)];t[n][1]=i.join("")}},n.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,o=Math.min(t.length,e.length),i=o,r=0;n<i;)t.substring(r,i)==e.substring(r,i)?(n=i,r=n):o=i,i=Math.floor((o-n)/2+n);return i},n.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,o=Math.min(t.length,e.length),i=o,r=0;n<i;)t.substring(t.length-i,t.length-r)==e.substring(e.length-i,e.length-r)?(n=i,r=n):o=i,i=Math.floor((o-n)/2+n);return i},n.prototype.diff_commonOverlap_=function(t,e){var n=t.length,o=e.length;if(0==n||0==o)return 0;n>o?t=t.substring(n-o):n<o&&(e=e.substring(0,n));var i=Math.min(n,o);if(t==e)return i;for(var r=0,a=1;;){var s=t.substring(i-a),l=e.indexOf(s);if(l==-1)return r;a+=l,0!=l&&t.substring(i-a)!=e.substring(0,a)||(r=a,a++)}},n.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var o,i,r,s,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,d="";(c=e.indexOf(l,c+1))!=-1;){var h=a.diff_commonPrefix(t.substring(n),e.substring(c)),u=a.diff_commonSuffix(t.substring(0,n),e.substring(0,c));d.length<u+h&&(d=e.substring(c-u,c)+e.substring(c,c+h),o=t.substring(0,n-u),i=t.substring(n+h),r=e.substring(0,c-u),s=e.substring(c+h))}return 2*d.length>=t.length?[o,i,r,s,d]:null}if(this.Diff_Timeout<=0)return null;var o=t.length>e.length?t:e,i=t.length>e.length?e:t;if(o.length<4||2*i.length<o.length)return null;var r,a=this,s=n(o,i,Math.ceil(o.length/4)),l=n(o,i,Math.ceil(o.length/2));if(!s&&!l)return null;r=l?s&&s[4].length>l[4].length?s:l:s;var c,d,h,u;t.length>e.length?(c=r[0],d=r[1],h=r[2],u=r[3]):(h=r[0],u=r[1],c=r[2],d=r[3]);var f=r[4];return[c,d,h,u,f]},n.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],a=0,s=null,l=0,c=0,d=0,h=0,u=0;l<t.length;)t[l][0]==r?(n[a++]=l,c=h,d=u,h=0,u=0,s=t[l][1]):(t[l][0]==i?h+=t[l][1].length:u+=t[l][1].length,s&&s.length<=Math.max(c,d)&&s.length<=Math.max(h,u)&&(t.splice(n[a-1],0,[o,s]),t[n[a-1]+1][0]=i,a--,a--,l=a>0?n[a-1]:-1,c=0,d=0,h=0,u=0,s=null,e=!0)),l++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),l=1;l<t.length;){if(t[l-1][0]==o&&t[l][0]==i){var f=t[l-1][1],p=t[l][1],g=this.diff_commonOverlap_(f,p),m=this.diff_commonOverlap_(p,f);g>=m?(g>=f.length/2||g>=p.length/2)&&(t.splice(l,0,[r,p.substring(0,g)]),t[l-1][1]=f.substring(0,f.length-g),t[l+1][1]=p.substring(g),l++):(m>=f.length/2||m>=p.length/2)&&(t.splice(l,0,[r,f.substring(0,m)]),t[l-1][0]=i,t[l-1][1]=p.substring(0,p.length-m),t[l+1][0]=o,t[l+1][1]=f.substring(m),l++),l++}l++}},n.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var o=t.charAt(t.length-1),i=e.charAt(0),r=o.match(n.nonAlphaNumericRegex_),a=i.match(n.nonAlphaNumericRegex_),s=r&&o.match(n.whitespaceRegex_),l=a&&i.match(n.whitespaceRegex_),c=s&&o.match(n.linebreakRegex_),d=l&&i.match(n.linebreakRegex_),h=c&&t.match(n.blanklineEndRegex_),u=d&&e.match(n.blanklineStartRegex_);return h||u?5:c||d?4:r&&!s&&l?3:s||l?2:r||a?1:0}for(var o=1;o<t.length-1;){if(t[o-1][0]==r&&t[o+1][0]==r){var i=t[o-1][1],a=t[o][1],s=t[o+1][1],l=this.diff_commonSuffix(i,a);if(l){var c=a.substring(a.length-l);i=i.substring(0,i.length-l),a=c+a.substring(0,a.length-l),s=c+s}for(var d=i,h=a,u=s,f=e(i,a)+e(a,s);a.charAt(0)===s.charAt(0);){i+=a.charAt(0),a=a.substring(1)+s.charAt(0),s=s.substring(1);var p=e(i,a)+e(a,s);p>=f&&(f=p,d=i,h=a,u=s)}t[o-1][1]!=d&&(d?t[o-1][1]=d:(t.splice(o-1,1),o--),t[o][1]=h,u?t[o+1][1]=u:(t.splice(o+1,1),o--))}o++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],a=0,s=null,l=0,c=!1,d=!1,h=!1,u=!1;l<t.length;)t[l][0]==r?(t[l][1].length<this.Diff_EditCost&&(h||u)?(n[a++]=l,c=h,d=u,s=t[l][1]):(a=0,s=null),h=u=!1):(t[l][0]==o?u=!0:h=!0,s&&(c&&d&&h&&u||s.length<this.Diff_EditCost/2&&c+d+h+u==3)&&(t.splice(n[a-1],0,[o,s]),t[n[a-1]+1][0]=i,a--,s=null,c&&d?(h=u=!0,a=0):(a--,l=a>0?n[a-1]:-1,h=u=!1),e=!0)),l++;e&&this.diff_cleanupMerge(t)},n.prototype.diff_cleanupMerge=function(t){t.push([r,""]);for(var e,n=0,a=0,s=0,l="",c="";n<t.length;)switch(t[n][0]){case i:s++,c+=t[n][1],n++;break;case o:a++,l+=t[n][1],n++;break;case r:a+s>1?(0!==a&&0!==s&&(e=this.diff_commonPrefix(c,l),0!==e&&(n-a-s>0&&t[n-a-s-1][0]==r?t[n-a-s-1][1]+=c.substring(0,e):(t.splice(0,0,[r,c.substring(0,e)]),n++),c=c.substring(e),l=l.substring(e)),e=this.diff_commonSuffix(c,l),0!==e&&(t[n][1]=c.substring(c.length-e)+t[n][1],c=c.substring(0,c.length-e),l=l.substring(0,l.length-e))),0===a?t.splice(n-s,a+s,[i,c]):0===s?t.splice(n-a,a+s,[o,l]):t.splice(n-a-s,a+s,[o,l],[i,c]),n=n-a-s+(a?1:0)+(s?1:0)+1):0!==n&&t[n-1][0]==r?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,s=0,a=0,l="",c=""}""===t[t.length-1][1]&&t.pop();var d=!1;for(n=1;n<t.length-1;)t[n-1][0]==r&&t[n+1][0]==r&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),d=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),d=!0)),n++;d&&this.diff_cleanupMerge(t)},n.prototype.diff_xIndex=function(t,e){var n,r=0,a=0,s=0,l=0;for(n=0;n<t.length&&(t[n][0]!==i&&(r+=t[n][1].length),t[n][0]!==o&&(a+=t[n][1].length),!(r>e));n++)s=r,l=a;return t.length!=n&&t[n][0]===o?l:l+(e-s)},n.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,a=/</g,s=/>/g,l=/\n/g,c=0;c<t.length;c++){var d=t[c][0],h=t[c][1],u=h.replace(n,"&amp;").replace(a,"&lt;").replace(s,"&gt;").replace(l,"&para;<br>");switch(d){case i:e[c]='<ins style="background:#e6ffe6;">'+u+"</ins>";break;case o:e[c]='<del style="background:#ffe6e6;">'+u+"</del>";break;case r:e[c]="<span>"+u+"</span>"}}return e.join("")},n.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==i&&(e[n]=t[n][1]);return e.join("")},n.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==o&&(e[n]=t[n][1]);return e.join("")},n.prototype.diff_levenshtein=function(t){for(var e=0,n=0,a=0,s=0;s<t.length;s++){var l=t[s][0],c=t[s][1];switch(l){case i:n+=c.length;break;case o:a+=c.length;break;case r:e+=Math.max(n,a),n=0,a=0}}return e+=Math.max(n,a)},n.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case i:e[n]="+"+encodeURI(t[n][1]);break;case o:e[n]="-"+t[n][1].length;break;case r:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(t,e){for(var n=[],a=0,s=0,l=e.split(/\t/g),c=0;c<l.length;c++){var d=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{n[a++]=[i,decodeURI(d)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+d)}break;case"-":case"=":var u=parseInt(d,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+d);var f=t.substring(s,s+=u);"="==l[c].charAt(0)?n[a++]=[r,f]:n[a++]=[o,f];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(s!=t.length)throw new Error("Delta length ("+s+") does not equal source text length ("+t.length+").");return n},n.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},n.prototype.match_bitap_=function(t,e,n){function o(t,o){var i=t/e.length,a=Math.abs(n-o);return r.Match_Distance?i+a/r.Match_Distance:a?1:i}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),r=this,a=this.Match_Threshold,s=t.indexOf(e,n);s!=-1&&(a=Math.min(o(0,s),a),s=t.lastIndexOf(e,n+e.length),s!=-1&&(a=Math.min(o(0,s),a)));var l=1<<e.length-1;s=-1;for(var c,d,h,u=e.length+t.length,f=0;f<e.length;f++){for(c=0,d=u;c<d;)o(f,n+d)<=a?c=d:u=d,d=Math.floor((u-c)/2+c);u=d;var p=Math.max(1,n-d+1),g=Math.min(n+d,t.length)+e.length,m=Array(g+2);m[g+1]=(1<<f)-1;for(var v=g;v>=p;v--){var y=i[t.charAt(v-1)];if(0===f?m[v]=(m[v+1]<<1|1)&y:m[v]=(m[v+1]<<1|1)&y|((h[v+1]|h[v])<<1|1)|h[v+1],m[v]&l){var _=o(f,v-1);if(_<=a){if(a=_,s=v-1,!(s>n))break;p=Math.max(1,2*n-s)}}}if(o(f+1,n)>a)break;h=m}return s},n.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},n.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),o=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)o+=this.Patch_Margin,n=e.substring(t.start2-o,t.start2+t.length1+o);o+=this.Patch_Margin;var i=e.substring(t.start2-o,t.start2);i&&t.diffs.unshift([r,i]);var a=e.substring(t.start2+t.length1,t.start2+t.length1+o);a&&t.diffs.push([r,a]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+a.length,t.length2+=i.length+a.length}},n.prototype.patch_make=function(t,e,a){var s,l;if("string"==typeof t&&"string"==typeof e&&"undefined"==typeof a)s=t,l=this.diff_main(s,e,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(t&&"object"==typeof t&&"undefined"==typeof e&&"undefined"==typeof a)l=t,s=this.diff_text1(l);else if("string"==typeof t&&e&&"object"==typeof e&&"undefined"==typeof a)s=t,l=e;else{if("string"!=typeof t||"string"!=typeof e||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");s=t,l=a}if(0===l.length)return[];for(var c=[],d=new n.patch_obj,h=0,u=0,f=0,p=s,g=s,m=0;m<l.length;m++){var v=l[m][0],y=l[m][1];switch(h||v===r||(d.start1=u,d.start2=f),v){case i:d.diffs[h++]=l[m],d.length2+=y.length,g=g.substring(0,f)+y+g.substring(f);break;case o:d.length1+=y.length,d.diffs[h++]=l[m],g=g.substring(0,f)+g.substring(f+y.length);break;case r:y.length<=2*this.Patch_Margin&&h&&l.length!=m+1?(d.diffs[h++]=l[m],d.length1+=y.length,d.length2+=y.length):y.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(d,p),c.push(d),d=new n.patch_obj,h=0,p=g,u=f)}v!==i&&(u+=y.length),v!==o&&(f+=y.length)}return h&&(this.patch_addContext_(d,p),c.push(d)),c},n.prototype.patch_deepCopy=function(t){for(var e=[],o=0;o<t.length;o++){var i=t[o],r=new n.patch_obj;r.diffs=[];for(var a=0;a<i.diffs.length;a++)r.diffs[a]=i.diffs[a].slice();r.start1=i.start1,r.start2=i.start2,r.length1=i.length1,r.length2=i.length2,e[o]=r}return e},n.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var a=0,s=[],l=0;l<t.length;l++){var c,d=t[l].start2+a,h=this.diff_text1(t[l].diffs),u=-1;if(h.length>this.Match_MaxBits?(c=this.match_main(e,h.substring(0,this.Match_MaxBits),d),c!=-1&&(u=this.match_main(e,h.substring(h.length-this.Match_MaxBits),d+h.length-this.Match_MaxBits),(u==-1||c>=u)&&(c=-1))):c=this.match_main(e,h,d),c==-1)s[l]=!1,a-=t[l].length2-t[l].length1;else{s[l]=!0,a=c-d;var f;if(f=u==-1?e.substring(c,c+h.length):e.substring(c,u+this.Match_MaxBits),h==f)e=e.substring(0,c)+this.diff_text2(t[l].diffs)+e.substring(c+h.length);else{var p=this.diff_main(h,f,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(p)/h.length>this.Patch_DeleteThreshold)s[l]=!1;else{this.diff_cleanupSemanticLossless(p);for(var g,m=0,v=0;v<t[l].diffs.length;v++){var y=t[l].diffs[v];y[0]!==r&&(g=this.diff_xIndex(p,m)),y[0]===i?e=e.substring(0,c+g)+y[1]+e.substring(c+g):y[0]===o&&(e=e.substring(0,c+g)+e.substring(c+this.diff_xIndex(p,m+y[1].length))),y[0]!==o&&(m+=y[1].length)}}}}}return e=e.substring(n.length,e.length-n.length),[e,s]},n.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",o=1;o<=e;o++)n+=String.fromCharCode(o);for(var o=0;o<t.length;o++)t[o].start1+=e,t[o].start2+=e;var i=t[0],a=i.diffs;if(0==a.length||a[0][0]!=r)a.unshift([r,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>a[0][1].length){var s=e-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],i.start1-=s,i.start2-=s,i.length1+=s,i.length2+=s}if(i=t[t.length-1],a=i.diffs,0==a.length||a[a.length-1][0]!=r)a.push([r,n]),i.length1+=e,i.length2+=e;else if(e>a[a.length-1][1].length){var s=e-a[a.length-1][1].length;a[a.length-1][1]+=n.substring(0,s),i.length1+=s,i.length2+=s}return n},n.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,a=0;a<t.length;a++)if(!(t[a].length1<=e)){var s=t[a];t.splice(a--,1);for(var l=s.start1,c=s.start2,d="";0!==s.diffs.length;){var h=new n.patch_obj,u=!0;for(h.start1=l-d.length,h.start2=c-d.length,""!==d&&(h.length1=h.length2=d.length,h.diffs.push([r,d]));0!==s.diffs.length&&h.length1<e-this.Patch_Margin;){var f=s.diffs[0][0],p=s.diffs[0][1];f===i?(h.length2+=p.length,c+=p.length,h.diffs.push(s.diffs.shift()),u=!1):f===o&&1==h.diffs.length&&h.diffs[0][0]==r&&p.length>2*e?(h.length1+=p.length,l+=p.length,u=!1,h.diffs.push([f,p]),s.diffs.shift()):(p=p.substring(0,e-h.length1-this.Patch_Margin),h.length1+=p.length,l+=p.length,f===r?(h.length2+=p.length,c+=p.length):u=!1,h.diffs.push([f,p]),p==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(p.length))}d=this.diff_text2(h.diffs),d=d.substring(d.length-this.Patch_Margin);var g=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==g&&(h.length1+=g.length,h.length2+=g.length,0!==h.diffs.length&&h.diffs[h.diffs.length-1][0]===r?h.diffs[h.diffs.length-1][1]+=g:h.diffs.push([r,g])),u||t.splice(++a,0,h)}}},n.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},n.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var a=t.split("\n"),s=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<a.length;){var c=a[s].match(l);if(!c)throw new Error("Invalid patch string: "+a[s]);var d=new n.patch_obj;for(e.push(d),d.start1=parseInt(c[1],10),""===c[2]?(d.start1--,d.length1=1):"0"==c[2]?d.length1=0:(d.start1--,d.length1=parseInt(c[2],10)),d.start2=parseInt(c[3],10),""===c[4]?(d.start2--,d.length2=1):"0"==c[4]?d.length2=0:(d.start2--,d.length2=parseInt(c[4],10)),s++;s<a.length;){var h=a[s].charAt(0);try{var u=decodeURI(a[s].substring(1))}catch(f){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==h)d.diffs.push([o,u]);else if("+"==h)d.diffs.push([i,u]);else if(" "==h)d.diffs.push([r,u]);else{if("@"==h)break;if(""!==h)throw new Error('Invalid patch mode "'+h+'" in: '+u)}s++}}return e},n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},n.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,a=["@@ -"+t+" +"+e+" @@\n"],s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case i:n="+";break;case o:n="-";break;case r:n=" "}a[s+1]=n+encodeURI(this.diffs[s][1])+"\n"}return a.join("").replace(/%20/g," ")},t.exports=n},function(t,e,n){"use strict";function o(t){this.sqe=t}var i=n(19),r=/\u200B/g;o.prototype.getTextContent=function(){return this.sqe.get$Body()[0].textContent.replace(r,"")},o.prototype.updateMarkerWithExtraInfo=function(t){var e,n,o;return e=this._findOffsetNode([t.start,t.end]),n=this.sqe.getSelection().cloneRange(),n.setStart(e[0].container,e[0].offsetInContainer),n.setEnd(e[1].container,e[1].offsetInContainer),o=this._getExtraInfoOfRange(n),t.text=o.text,t.top=o.top,t.left=o.left,t.height=o.height,t},o.prototype._getExtraInfoOfRange=function(t){var e,n,o,a,s,l,c,d,h=t.endContainer,u=t.endOffset;return e=t.cloneContents().textContent.replace(r,""),i.getChildNodeByOffset(h,u)&&(t.setStart(h,u),t.collapse(!0),a=t.getBoundingClientRect()),a&&!a.top&&this.sqe.modifyDocument(function(){l=document.createElement("SPAN"),l.textContent="​",t.endContainer.parentNode.insertBefore(l,t.endContainer),a=l.getBoundingClientRect(),c=l.parentNode,c.removeChild(l)}),a?(d=this.sqe.get$Body().parent().offset(),n=this.sqe.scrollTop()+a.top-d.top+$("body").scrollTop(),o=a.left-d.left,s=a.height):s=n=o=0,{text:e,top:n,left:o,height:s}},o.prototype.getMarkerInfoOfCurrentSelection=function(){var t,e,n,o,i;return t=this.sqe.getSelection().cloneRange(),this._extendRangeToTextNodeIfHasNone(t)?(e=t.cloneRange(),e.setStart(this.sqe.get$Body()[0],0),e.setEnd(t.startContainer,t.startOffset),i=this._getExtraInfoOfRange(t),n=e.cloneContents().textContent.length,o=n+i.text.length,{start:n,end:o,text:i.text,top:i.top,left:i.left,height:i.height}):null},o.prototype._extendRangeToTextNodeIfHasNone=function(t){var e,n=i.getChildNodeByOffset(t.endContainer,t.endOffset);if(!i.isTextNode(t.endContainer)||!n.nodeValue.replace(r,"").length)if(i.isTextNode(n))t.setEnd(n,0);else{if(e=i.getPrevTextNode(n),!e)return!1;t.setEnd(e,e.length)}return!0},o.prototype._findOffsetNode=function(t){return i.findOffsetNode(this.sqe.get$Body()[0],t,function(t){return t.replace(r,"")})},o.prototype.selectOffsetRange=function(t,e){var n=this._findOffsetNode([t,e]),o=this.sqe.getSelection().cloneRange();o.setStart(n[0].container,n[0].offsetInContainer),o.setEnd(n[1].container,n[1].offsetInContainer),this.sqe.setSelection(o)},o.prototype.clearSelect=function(){var t=this.sqe.getSelection().cloneRange();t.collapse(!0),this.sqe.setSelection(t)},t.exports=o},function(t,e){"use strict";var n=/\u200B/g,o=tui.util,i=function(t){return t&&t.nodeType===Node.TEXT_NODE},r=function(t){return t&&t.nodeType===Node.ELEMENT_NODE},a=function(t){return r(t)?t.tagName:"TEXT"},s=function(t){var e;return r(t)?e=t.textContent.replace(n,"").length:i(t)&&(e=t.nodeValue.replace(n,"").length),e},l=function(t){var e;return r(t)?e=t.childNodes.length:i(t)&&(e=t.nodeValue.replace(n,"").length),e},c=function(t){var e,n,o,i=t.parentNode.childNodes;for(e=0,n=i.length;e<n;e+=1)if(i[e]===t){o=e;break}return o},d=function(t,e){var n;return i(t)?n=t:t.childNodes.length&&e>=0&&(n=t.childNodes[e]),n},h=function(t,e,n){for(var o,i,r=t+"Sibling";e&&!e[r]&&(o=a(e.parentNode),o!==n&&"BODY"!==o);)e=e.parentNode;return e[r]&&(i=e[r]),i},u=function(t,e,n){var o;return o=e>0?d(t,e-1):h("previous",t,n)},f=function(t,e){for(var n;t.parentNode&&!e(t.parentNode);)t=t.parentNode;return e(t.parentNode)&&(n=t),n},p=function(t,e){var n;return n=o.isString(e)?f(t,function(t){return e===a(t)}):f(t,function(t){return e===t})},g=function(t,e,n){var o,i=t+"Sibling";return e=p(e,n),e&&e[i]&&(o=e[i]),o},m=function(t,e){return g("previous",t,e)},v=function(t,e){return g("next",t,e)},y=function(t){return p(t,"BODY")},_=function(t){for(t=t.previousSibling||t.parentNode;!i(t)&&"BODY"!==a(t);)if(t.previousSibling)for(t=t.previousSibling;t.lastChild;)t=t.lastChild;else t=t.parentNode;return"BODY"===a(t)&&(t=null),t},w=function(t,e,n){var i,r,a,s=[],l="",c=0;if(!e.length)return s;for(i=e.shift(),r=document.createTreeWalker(t,4,null,!1);r.nextNode();){for(l=r.currentNode.nodeValue||"",n&&(l=n(l)),a=c+l.length;a>=i;){if(s.push({container:r.currentNode,offsetInContainer:i-c,offset:i}),!e.length)return s;i=e.shift()}c=a}do s.push({container:r.currentNode,offsetInContainer:l.length,offset:i}),i=e.shift();while(!o.isUndefined(i));return s},C=function(t){var e,n={};return n.tagName=t.nodeName,t.id&&(n.id=t.id),e=t.className.trim(),e&&(n.className=e),n},b=function(t,e){for(var n=[];t&&t!==e;)r(t)&&n.unshift(C(t)),t=t.parentNode;return n},E=function(t,e){var n,o,i,r=0;if(t){if(!e)for(;t.previousElementSibling;)t=t.previousElementSibling,r+=1;if(n=t.parentNode.nextSibling,i=$(t).parents("thead")[0],n?o=n.childNodes[r]:i&&"TBODY"===i.nextElementSibling.tagName&&(o=$(i.nextElementSibling).find("td")[r]),o&&"TD"===o.tagName)return o}return null},T=function(t){var e;return e=t.nextElementSibling,!e||"TD"!==e.nodeName&&"TH"!==e.nodeName?null:e};t.exports={getNodeName:a,isTextNode:i,isElemNode:r,getTextLength:s,getOffsetLength:l,getPrevOffsetNodeUntil:u,getNodeOffsetOfParent:c,getChildNodeByOffset:d,getTopPrevNodeUnder:m,getTopNextNodeUnder:v,getParentUntil:p,getTopBlockNode:y,getPrevTextNode:_,findOffsetNode:w,getPath:b,getNodInfo:C,nextLineTableCell:E,nextTableCell:T}},function(t,e,n){"use strict";function o(t){this.preview=t}function i(){var t,e=window.getSelection();return e&&e.rangeCount?t=e.getRangeAt(0).cloneRange():(t=document.createRange(),t.selectNodeContents(this.preview.$el[0]),t.collapse(!0)),t}var r=n(19),a=/(\n)|(\r\n)|(\r)/g;o.prototype.getTextContent=function(){return this.preview.$el[0].textContent.replace(a,"")},o.prototype.updateMarkerWithExtraInfo=function(t){var e,n,o;return e=this._findOffsetNode([t.start,t.end]),n=document.createRange(),n.setStart(e[0].container,e[0].offsetInContainer),n.setEnd(e[1].container,e[1].offsetInContainer),o=this._getExtraInfoOfRange(n),t.text=o.text,t.top=o.top,t.left=o.left,t.height=o.height,t},o.prototype._getExtraInfoOfRange=function(t){var e,n,o,i,r,s,l,c;return e=t.cloneContents().textContent.replace(a,""),t.setStart(t.endContainer,t.endOffset),t.collapse(!0),i=t.getBoundingClientRect(),i&&!i.top&&(l=document.createElement("SPAN"),l.textContent="​",t.endContainer.parentNode.insertBefore(l,t.endContainer),i=l.getBoundingClientRect(),c=l.parentNode,c.removeChild(l)),i?(r=this.preview.$el.offset(),n=i.top+this.preview.$el.scrollTop()-r.top+$("body").scrollTop(),o=i.left-r.left,s=i.height):s=n=o=0,{text:e,top:n,left:o,height:s}},o.prototype.getMarkerInfoOfCurrentSelection=function(){var t,e,n,o,r,a;return t=i(),a=$.contains(this.preview.$el[0],t.commonAncestorContainer),a&&this._extendRangeToTextNodeIfHasNone(t)?(e=t.cloneRange(),e.setStart(this.preview.$el[0],0),e.setEnd(t.startContainer,t.startOffset),r=this._getExtraInfoOfRange(t),n=e.cloneContents().textContent.length,o=n+r.text.length,{start:n,end:o,text:r.text,top:r.top,left:r.left,height:r.height}):null},o.prototype._extendRangeToTextNodeIfHasNone=function(t){var e,n=r.getChildNodeByOffset(t.endContainer,t.endOffset);if(!r.isTextNode(t.endContainer))if(r.isTextNode(n))t.setEnd(n,0);else{if(e=r.getPrevTextNode(n),!e)return!1;t.setEnd(e,e.length)}return!0},o.prototype._findOffsetNode=function(t){return r.findOffsetNode(this.preview.$el[0],t,function(t){return t.replace(a,"")})},o.prototype.selectOffsetRange=function(t,e){var n=this._findOffsetNode([t,e]),o=document.createRange(),i=window.getSelection();o.setStart(n[0].container,n[0].offsetInContainer),o.setEnd(n[1].container,n[1].offsetInContainer),i.removeAllRanges(),i.addRange(o)},o.prototype.clearSelect=function(){window.getSelection().removeAllRanges()},t.exports=o},function(t,e){"use strict";function n(t){this.cm=t}var o=tui.util,i=/(\n)|(\r\n)|(\r)/g;n.prototype.getTextContent=function(){return this.cm.getValue().replace(i,"")},n.prototype.updateMarkerWithExtraInfo=function(t){var e,n,o,r,a,s;return e=this._findOffsetCursor([t.start,t.end]),o=e[0].line,n=e[0].ch,a=e[1].line,r=e[1].ch,s=this._getExtraInfoOfRange(o,n,a,r),t.text=s.text.replace(i," "),t.top=s.top,t.left=s.left,t.height=s.height,t},n.prototype._getExtraInfoOfRange=function(t,e,n,o){var i,r,a,s,l,c=this.cm.getDoc();return c.getValue().length?(i=c.getRange({line:t,ch:e},{line:n,ch:o}),r=this.cm.charCoords({line:n,ch:o},"local"),a=r.top,s=r.left,l=r.bottom-r.top):(a=s=l=0,i=""),{text:i,top:a,left:s,height:l}},n.prototype.getMarkerInfoOfCurrentSelection=function(){var t,e,n,o,r,a=this.cm.getDoc();return t=this._getSelection(),e=a.getRange({line:0,ch:0},t.anchor).replace(i,"").length,n=e+a.getSelection().replace(i,"").length,r=this._findOffsetCursor([e,n]),o=this._getExtraInfoOfRange(r[0].line,r[0].ch,r[1].line,r[1].ch),{start:e,end:n,text:o.text.replace(i," "),top:o.top,left:o.left,height:o.height}},n.prototype._getSelection=function(){var t,e,n,o,i;return t=this.cm.getDoc().listSelections()[0],n=t.anchor,e=t.head,o=n.line>e.line||n.line===e.line&&n.ch>e.ch,o&&(i=e,e=n,n=i),{anchor:n,head:e}},n.prototype._findOffsetCursor=function(t){var e,n=this.cm.getDoc(),i=0,r=0,a=[],s=0,l=n.lineCount();for(e=0;e<l;e+=1){for(i+=n.getLine(e).length;i>=t[s];)if(a.push({line:e,ch:t[s]-r}),s+=1,o.isUndefined(t[s]))return a;r=i}for(;!o.isUndefined(t[s]);)a.push({line:e,ch:i-r}),s+=1;return a},n.prototype.selectOffsetRange=function(t,e){var n=this._findOffsetCursor([t,e]);this.cm.setSelection({line:n[0].line,ch:n[0].ch},{line:n[1].line,ch:n[1].ch})},n.prototype.clearSelect=function(){var t=this.cm.getDoc().listSelections()[0];t&&this.cm.setCursor(t.to())},t.exports=n},function(t,e,n){"use strict";function o(t){var e=this;this.options=$.extend({previewStyle:"tab",initialEditType:"markdown",height:300},t),this.eventManager=new l,this.importManager=new h(this.eventManager),this.commandManager=new c(this),this.convertor=new u(this.eventManager),this.options.hooks&&Z.forEach(this.options.hooks,function(t,n){e.addHook(n,t)}),this.options.events&&Z.forEach(this.options.events,function(t,n){e.on(n,t)}),this.layout=new s(t,this.eventManager),this.setUI(this.options.UI||new g(this)),this.mdEditor=new i(this.layout.getMdEditorContainerEl(),this.eventManager),this.preview=new r(this.layout.getPreviewEl(),this.eventManager,this.convertor),this.wwEditor=a.factory(this.layout.getWwEditorContainerEl(),this.eventManager),this.changePreviewStyle(this.options.previewStyle),this.mdEditor.init(),this.changeMode(e.options.initialEditType),this.contentHeight(e.options.height),this.setValue(e.options.initialValue),d.applyExtension(e,e.options.exts),this.eventManager.emit("load",e),tt.push(this)}var i=n(23),r=n(26),a=n(28),s=n(43),l=n(44),c=n(45),d=n(6),h=n(47),u=n(49),f=n(51),p=n(50),g=n(52),m=n(63),v=n(64),y=n(65),_=n(66),w=n(67),C=n(68),b=n(69),E=n(70),T=n(71),k=n(72),M=n(73),x=n(74),S=n(75),N=n(76),B=n(77),A=n(78),I=n(79),L=n(80),R=n(81),P=n(82),O=n(83),D=n(84),H=n(85),F=n(86),U=n(87),W=n(88),V=n(89),j=n(90),K=n(91),q=n(92),Y=n(93),G=n(94),z=n(95),X=n(96),Q=n(97),J=n(98),Z=tui.util,tt=[];o.prototype.changePreviewStyle=function(t){this.layout.changePreviewStyle(t),this.mdPreviewStyle=t,this.eventManager.emit("changePreviewStyle",t)},o.prototype.exec=function(){this.commandManager.exec.apply(this.commandManager,arguments)},o.prototype.addCommand=function(t,e){e?this.commandManager.addCommand(c.command(t,e)):this.commandManager.addCommand(t)},o.prototype.on=function(t,e){this.eventManager.listen(t,e)},o.prototype.off=function(t){this.eventManager.removeEventHandler(t)},o.prototype.addHook=function(t,e){this.eventManager.removeEventHandler(t),this.eventManager.listen(t,e)},o.prototype.removeHook=function(t){this.eventManager.removeEventHandler(t)},o.prototype.getCodeMirror=function(){return this.mdEditor.getEditor()},o.prototype.getSquire=function(){return this.wwEditor.getEditor()},o.prototype.focus=function(){this.getCurrentModeEditor().focus()},o.prototype.moveCursorToEnd=function(){this.getCurrentModeEditor().moveCursorToEnd()},o.prototype.moveCursorToStart=function(){this.getCurrentModeEditor().moveCursorToStart()},o.prototype.setValue=function(t){t=t||"",this.isMarkdownMode()?this.mdEditor.setValue(t):this.wwEditor.setValue(this.convertor.toHTML(t)),this.eventManager.emit("setValueAfter",t)},o.prototype.getValue=function(){var t;return t=this.isMarkdownMode()?this.mdEditor.getValue():this.convertor.toMarkdown(this.wwEditor.getValue())},o.prototype.addWidget=function(t,e,n,o){this.getCurrentModeEditor().addWidget(t,e,n,o)},o.prototype.contentHeight=function(t){return t&&(this._contentHeight=t,this.mdEditor.setHeight(t),this.preview.setHeight(t),this.wwEditor.setHeight(t)),this._contentHeight},o.prototype.getCurrentModeEditor=function(){var t;return t=this.isMarkdownMode()?this.mdEditor:this.wwEditor},o.prototype.isMarkdownMode=function(){return"markdown"===this.currentMode},o.prototype.isWysiwygMode=function(){return"wysiwyg"===this.currentMode},o.prototype.isViewOnly=function(){return!1},o.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},o.prototype.changeMode=function(t){this.currentMode!==t&&(this.currentMode=t,this.isWysiwygMode()?(this.layout.switchToWYSIWYG(),this.wwEditor.setValue(this.convertor.toHTML(this.mdEditor.getValue())),this.eventManager.emit("changeModeToWysiwyg")):(this.layout.switchToMarkdown(),this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue())),this.getCodeMirror().refresh(),this.eventManager.emit("changeModeToMarkdown")),this.eventManager.emit("changeMode",t),this.focus())},o.prototype.remove=function(){var t=this,e=tt.length-1;for(this.wwEditor.remove(),this.mdEditor.remove(),this.layout.remove(),this.getUI()&&this.getUI().remove(),this.eventManager.emit("removeEditor"),this.eventManager.events.forEach(function(e,n){t.off(n)}),this.eventManager=null;e>=0;e-=1)tt[e]===this&&tt.splice(e,1)},o.prototype.hide=function(){this.eventManager.emit("hide",this)},o.prototype.show=function(){this.eventManager.emit("show",this),this.getCodeMirror().refresh()},o.prototype.scrollTop=function(t){return this.getCurrentModeEditor().scrollTop(t)},o.prototype.setUI=function(t){this._ui=t},o.prototype.getUI=function(){return this._ui},o.prototype.reset=function(){this.wwEditor.reset(),this.mdEditor.reset()},o.prototype.getRange=function(){return this.getCurrentModeEditor().getRange()},o.prototype.getTextObject=function(t){return this.getCurrentModeEditor().getTextObject(t)},o.getInstances=function(){return tt},o.defineExtension=function(t,e){d.defineExtension(t,e)},o.factory=function(t){var e;return t.viewOnly?e=new f(t):(e=new o(t),e.addCommand(m),e.addCommand(v),e.addCommand(_),e.addCommand(w),e.addCommand(C),e.addCommand(b),e.addCommand(E),e.addCommand(T),e.addCommand(k),e.addCommand(M),e.addCommand(x),e.addCommand(S),e.addCommand(N),e.addCommand(y),e.addCommand(B),e.addCommand(A),e.addCommand(L),e.addCommand(H),e.addCommand(F),e.addCommand(R),e.addCommand(P),e.addCommand(O),e.addCommand(D),e.addCommand(G),e.addCommand(z),e.addCommand(X),e.addCommand(U),e.addCommand(W),e.addCommand(V),e.addCommand(j),e.addCommand(K),e.addCommand(q),e.addCommand(Y),e.addCommand(Q),e.addCommand(J),e.addCommand(I)),e},o.markedRenderer=p,t.exports=o},function(t,e,n){"use strict";function o(t,e){this.eventManager=e,this.$editorContainerEl=t,this._latestState={bold:!1,italic:!1}}var i=n(24).getSharedInstance(),r=n(25),a=window.CodeMirror;o.prototype.init=function(t){var e=$("<textarea />");t&&(e.text(t),this._emitMarkdownEditorContentChangedEvent(t)),this.$editorContainerEl.append(e),this.cm=a.fromTextArea(e[0],{lineWrapping:!0,mode:"gfm",theme:"default",dragDrop:!0,allowDropFileTypes:["image"],extraKeys:{Enter:"newlineAndIndentContinue",Tab:"subListIndentTab","Shift-Tab":"indentLess"
},indentUnit:4}),this._initEvent()},o.prototype._initEvent=function(){var t=this;this.cm.getWrapperElement().addEventListener("click",function(){t.eventManager.emit("click",{source:"markdown"})}),this.cm.on("beforeChange",function(e,n){"paste"===n.origin&&t.eventManager.emit("pasteBefore",{source:"markdown",data:n})}),this.cm.on("change",function(e,n){t._emitMarkdownEditorContentChangedEvent(),t._emitMarkdownEditorChangeEvent(n)}),this.cm.on("focus",function(){t.eventManager.emit("focus",{source:"markdown"}),t.getEditor().refresh()}),this.cm.on("blur",function(){t.eventManager.emit("blur",{source:"markdown"})}),this.cm.on("scroll",function(e,n){t.eventManager.emit("scroll",{source:"markdown",data:n})}),this.cm.on("keydown",function(e,n){t.eventManager.emit("keydown",{source:"markdown",data:n}),t.eventManager.emit("keyMap",{source:"markdown",keyMap:i.convert(n),data:n})}),this.cm.on("keyup",function(e,n){t.eventManager.emit("keyup",{source:"markdown",data:n})}),this.cm.on("paste",function(e,n){t.eventManager.emit("paste",{source:"markdown",data:n})}),this.cm.on("drop",function(e,n){n.preventDefault(),t.eventManager.emit("drop",{source:"markdown",data:n})}),this.cm.on("cursorActivity",function(){var e,n,o,i;e=t.cm.getTokenAt(t.cm.getCursor()),o=e.state.base,i=e.state.overlay,n={bold:!!o.strong,italic:!!o.em,code:!!i.code,codeBlock:!!i.codeBlock,source:"markdown"},t._isStateChanged(t._latestState,n)&&(t.eventManager.emit("stateChange",n),t._latestState=n)})},o.prototype.getCurrentRange=function(){var t=this.cm.getCursor("from"),e=this.cm.getCursor("to");return{from:t,to:e,collapsed:t===e}},o.prototype.focus=function(){this.cm.focus()},o.prototype.remove=function(){this.cm.toTextArea()},o.prototype.setValue=function(t){this.getEditor().setValue(t),this._emitMarkdownEditorContentChangedEvent(),this.moveCursorToEnd(),this.getEditor().refresh()},o.prototype.getValue=function(){return this.cm.getValue("\n")},o.prototype.getEditor=function(){return this.cm},o.prototype.reset=function(){this.setValue("")},o.prototype._emitMarkdownEditorContentChangedEvent=function(){this.eventManager.emit("contentChangedFromMarkdown",this)},o.prototype._cloneCMEventObject=function(t){return{from:{line:t.from.line,ch:t.from.ch},to:{line:t.to.line,ch:t.to.ch}}},o.prototype._emitMarkdownEditorChangeEvent=function(t){var e;"setValue"!==t.origin&&(e={source:"markdown"},this.eventManager.emit("changeFromMarkdown",e),this.eventManager.emit("change",e))},o.prototype.getCaretPosition=function(){return this.cm.cursorCoords()},o.prototype.addWidget=function(t,e,n,o){o&&(t.ch+=o),this.cm.addWidget(t.end,e,!0,n)},o.prototype.replaceSelection=function(t,e){e&&this.cm.setSelection(e.from,e.to),this.cm.replaceSelection(t),this.focus()},o.prototype.replaceRelativeOffset=function(t,e,n){var o=this.cm.getCursor(),i={from:{line:o.line,ch:o.ch+e},to:{line:o.line,ch:o.ch+e+n}};this.replaceSelection(t,i)},o.prototype.setHeight=function(t){this.$editorContainerEl.height(t),"auto"===t&&this.$editorContainerEl.find(".CodeMirror").height("auto")},o.prototype.moveCursorToEnd=function(){var t=this.getEditor().getDoc(),e=t.lastLine();t.setCursor(e,t.getLine(e).length)},o.prototype.moveCursorToStart=function(){var t=this.getEditor().getDoc(),e=t.firstLine();t.setCursor(e,0)},o.prototype.scrollTop=function(t){return t&&this.cm.scrollTo(0,t),this.cm.getScrollInfo().top},o.prototype.getRange=function(){var t=this.getEditor().getCursor("from"),e=this.getEditor().getCursor("to");return{start:{line:t.line,ch:t.ch},end:{line:e.line,ch:e.ch}}},o.prototype.getTextObject=function(t){return new r(this,t)},o.prototype._isStateChanged=function(t,e){var n=!1;return tui.util.forEach(e,function(e,o){var i=!0,r=t[o]!==e;return r&&(n=!0,i=!1),i}),n},t.exports=o},function(t,e){"use strict";function n(t){this._setSplitter(t)}var o,i=["","","","CANCEL","","","HELP","","BACK_SPACE","TAB","","","CLEAR","ENTER","ENTER_SPECIAL","","","","","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","","","","","","","","","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA","","","","","","","","","","@","!",'"',"#","$","%","&","_","(",")","*","+","|","-","{","}","~","","","","","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","",";","=",",","-",".","/","`","","","","","","","","","","","","","","","","","","","","","","","","","","","[","\\","]","'","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","","WIN_ICO_CLEAR","","","WIN_OEM_RESET","WIN_OEM_JUMP","WIN_OEM_PA1","WIN_OEM_PA2","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR",""];n.prototype._setSplitter=function(t){var e=t?t.splitter:"+";this._splitter=e},n.prototype.convert=function(t){var e,n=[];return t.shiftKey&&n.push("SHIFT"),t.ctrlKey&&n.push("CTRL"),t.metaKey&&n.push("META"),t.altKey&&n.push("ALT"),e=this._getKeyCodeChar(t.keyCode),e&&n.push(e),n.join(this._splitter)},n.prototype._getKeyCodeChar=function(t){var e;return e=i[t]},n.getSharedInstance=function(){return o||(o=new n),o},t.exports=n},function(t,e){"use strict";function n(t,e){this._mde=t,this.setRange(e||t.getRange())}n.prototype._setStart=function(t){this._start=t},n.prototype._setEnd=function(t){this._end=t},n.prototype.setRange=function(t){this._setStart(t.start),this._setEnd(t.end)},n.prototype.setEndBeforeRange=function(t){this._setEnd(t.start)},n.prototype.expandStartOffset=function(){var t=this._start;0!==t.ch&&(t.ch-=1)},n.prototype.expandEndOffset=function(){var t=this._end;t.ch<this._mde.getEditor().getDoc().getLine(t.line).length&&(t.ch+=1)},n.prototype.getTextContent=function(){return this._mde.getEditor().getRange(this._start,this._end)},n.prototype.replaceContent=function(t){this._mde.getEditor().replaceRange(t,this._start,this._end,"+input")},n.prototype.deleteContent=function(){this._mde.getEditor().replaceRange("",this._start,this._end,"+delete")},n.prototype.peekStartBeforeOffset=function(t){var e;return e={line:this._start.line,ch:Math.max(this._start.ch-t,0)},this._mde.getEditor().getRange(e,this._start)},t.exports=n},function(t,e,n){"use strict";function o(t,e,n){this.eventManager=e,this.converter=n,this.$el=t,this._initContentSection(),this.lazyRunner=new i,this.lazyRunner.registerLazyRunFunction("refresh",this.refresh,800,this),this._initEvent()}var i=n(27);o.prototype._initEvent=function(){var t=this;this.eventManager.listen("contentChangedFromMarkdown",function(e){t.lazyRunner.run("refresh",e.getValue())})},o.prototype._initContentSection=function(){this.$previewContent=$('<div class="tui-editor-contents" />'),this.$el.append(this.$previewContent)},o.prototype.refresh=function(t){this.render(this.converter.toHTMLWithCodeHightlight(t))},o.prototype.render=function(t){var e,n=t;e=this.eventManager.emit("previewBeforeHook",t),e&&(n=e[0]),this.$previewContent.empty(),this.$previewContent.html(n),this.eventManager.emit("previewRenderAfter",this)},o.prototype.setHeight=function(t){this.$el.height(t)},t.exports=o},function(t,e){"use strict";function n(){this.globalTOID=null,this.lazyRunFunctions={}}var o=tui.util;n.prototype.run=function(t,e,n,i){var r;return o.isString(t)?r=this._runRegisteredRun(t,e,n,i):(r=this._runSingleRun(t,e,n,i,this.globalTOID),this.globalTOID=r),r},n.prototype.registerLazyRunFunction=function(t,e,n,o){o=o||this,this.lazyRunFunctions[t]={fn:e,delay:n,context:o,TOID:null}},n.prototype._runSingleRun=function(t,e,n,o,i){return this._clearTOIDIfNeed(i),i=setTimeout(function(){t.call(n,e)},o)},n.prototype._runRegisteredRun=function(t,e,n,o){var i,r;return r=this.lazyRunFunctions[t].fn,i=this.lazyRunFunctions[t].TOID,o=o||this.lazyRunFunctions[t].delay,n=n||this.lazyRunFunctions[t].context,i=this._runSingleRun(r,e,n,o,i),this.lazyRunFunctions[t].TOID=i,i},n.prototype._clearTOIDIfNeed=function(t){t&&clearTimeout(t)},t.exports=n},function(t,e,n){"use strict";function o(t,e){this.eventManager=e,this.$editorContainerEl=t,this._height=0,this._silentChange=!1,this._keyEventHandlers={},this._managers={},this._clipboardManager=new a(this),this._selectionMarker=new s,this._initEvent(),this._initDefaultKeyEventHandler(),this.postProcessForChange=_.debounce(function(){this._postProcessForChange()}.bind(this),0)}function i(){return this.nodeType===Node.TEXT_NODE}var r=n(19),a=n(29),s=n(32),l=n(33),c=n(34),d=n(35),h=n(36),u=n(37),f=n(38),p=n(39),g=n(40),m=n(41),v=n(24).getSharedInstance(),y=n(42),_=tui.util,w=/<(.+)>(<br>|<br \/>|<BR>|<BR \/>)<\/\1>/g,C=/(?:<br>|<br \/>|<BR>|<BR \/>)<\/(.+?)>/g,b=/\b(H[\d]|LI|P|BLOCKQUOTE|TD|PRE)\b/,E="tui-editor-contents",T="undefined"!=typeof MutationObserver;o.prototype.init=function(){var t=$("<div />");this.$editorContainerEl.append(t),this.editor=new m(t[0],{blockTag:"DIV"}),this._initSquireEvent(),this._clipboardManager.init(),this.get$Body().addClass(E),this.$editorContainerEl.css("position","relative")},o.prototype._preprocessForInlineElement=function(t){return t.replace(/<br>( *)<img/g,"<br><br>$1<img")},o.prototype._initEvent=function(){var t=this;this.eventManager.listen("wysiwygSetValueBefore",function(e){return t._preprocessForInlineElement(e)}),this.eventManager.listen("wysiwygSetValueAfter",function(){t._wrapDefaultBlockToListInner()}),this.eventManager.listen("wysiwygKeyEvent",function(e){t._runKeyEventHandlers(e.data,e.keyMap)})},o.prototype.addKeyEventHandler=function(t,e){e||(e=t,t="DEFAULT"),this._keyEventHandlers[t]||(this._keyEventHandlers[t]=[]),this._keyEventHandlers[t].push(e)},o.prototype._runKeyEventHandlers=function(t,e){var n,o,i=this.getRange();n=this._keyEventHandlers.DEFAULT,n&&_.forEachArray(n,function(n){return o=n(t,i,e)}),n=this._keyEventHandlers[e],n&&o!==!1&&_.forEachArray(n,function(n){return n(t,i,e)})},o.prototype._initSquireEvent=function(){var t=this,e=!1;this.getEditor().addEventListener("paste",function(e){t.eventManager.emit("paste",{source:"wysiwyg",data:e})}),this.getEditor().addEventListener("dragover",function(t){return t.preventDefault(),!1}),this.getEditor().addEventListener("drop",function(e){return e.preventDefault(),t.eventManager.emit("drop",{source:"wysiwyg",data:e}),!1}),this.getEditor().addEventListener("input",_.debounce(function(){var e;!t._silentChange&&t.isEditorValid()?(e={source:"wysiwyg"},t.eventManager.emit("changeFromWysiwyg",e),t.eventManager.emit("change",e),t.eventManager.emit("contentChangedFromWysiwyg",t)):t._silentChange=!1,t.getEditor().preserveLastLine()},0)),this.getEditor().addEventListener("keydown",function(n){var o=t.getEditor().getSelection();o.collapsed||(e=!0),t.eventManager.emit("keydown",{source:"wysiwyg",data:n}),t._onKeyDown(n)}),_.browser.firefox&&(this.getEditor().addEventListener("keypress",function(n){var o,i=n.keyCode;13!==i&&9!==i||(o=t.getEditor().getSelection(),o.collapsed||(e=!0),t.eventManager.emit("keydown",{source:"wysiwyg",data:n}),t._onKeyDown(n))}),t.getEditor().addEventListener("keyup",function(){var e,n,o;e=t.getRange(),r.isTextNode(e.commonAncestorContainer)&&r.isTextNode(e.commonAncestorContainer.previousSibling)&&(n=e.commonAncestorContainer.previousSibling.length,o=e.commonAncestorContainer,e.commonAncestorContainer.previousSibling.appendData(e.commonAncestorContainer.data),e.setStart(e.commonAncestorContainer.previousSibling,n+e.startOffset),e.collapse(!0),o.parentNode.removeChild(o),t.getEditor().setSelection(e),e.detach())})),this.getEditor().addEventListener("keyup",function(n){e&&(t.postProcessForChange(),e=!1),t.eventManager.emit("keyup",{source:"wysiwyg",data:n})}),this.getEditor().addEventListener("scroll",function(e){t.eventManager.emit("scroll",{source:"wysiwyg",data:e})}),this.getEditor().addEventListener("click",function(e){t.eventManager.emit("click",{source:"wysiwyg",data:e})}),this.getEditor().addEventListener("mousedown",function(e){t.eventManager.emit("mousedown",{source:"wysiwyg",data:e})}),this.getEditor().addEventListener("mouseup",function(e){t.eventManager.emit("mouseup",{source:"wysiwyg",data:e})}),this.getEditor().addEventListener("contextmenu",function(e){t.eventManager.emit("contextmenu",{source:"wysiwyg",data:e})}),this.getEditor().addEventListener("focus",function(){t.eventManager.emit("focus",{source:"wysiwyg"})}),this.getEditor().addEventListener("blur",function(){t.eventManager.emit("blur",{source:"wysiwyg"})}),this.getEditor().addEventListener("pathChange",function(e){var n=/PRE/.test(e.path),o=/>CODE$/.test(e.path),i={bold:/(>B)|(>STRONG)/.test(e.path),italic:/(>I)|(>EM)/.test(e.path),code:!n&&o,codeBlock:n&&o,source:"wysiwyg"};t.eventManager.emit("stateChange",i)})},o.prototype._onKeyDown=function(t){var e=v.convert(t);t.keyCode&&(this.eventManager.emit("keyMap",{source:"wysiwyg",keyMap:e,data:t}),this.eventManager.emit("wysiwygKeyEvent",{keyMap:e,data:t}))},o.prototype._initDefaultKeyEventHandler=function(){var t=this;this.addKeyEventHandler("ENTER",function(e,n){t._isInOrphanText(n)&&t.defer(function(){t._wrapDefaultBlockToOrphanTexts(),t.breakToNewDefaultBlock(n,"before")}),t.defer(function(){t._scrollToRangeIfNeed()})}),this.addKeyEventHandler("TAB",function(e){var n=t.getEditor(),o=!t.getManager("list").isInList();return!o||(e.preventDefault(),n.insertPlainText("    "),!1)})},o.prototype._wrapDefaultBlockToOrphanTexts=function(){var t;t=this.get$Body().contents().filter(i),t.each(function(t,e){e.nextSibling&&"BR"===e.nextSibling.tagName&&$(e.nextSibling).remove(),$(e).wrap("<div />")})},o.prototype._scrollToRangeIfNeed=function(){var t=this.getEditor().getSelection().cloneRange(),e=this.getEditor().getCursorPosition(t).top-this.$editorContainerEl.offset().top;e>=this.get$Body().height()&&t.endContainer.scrollIntoView()},o.prototype._isInOrphanText=function(t){return t.startContainer.nodeType===Node.TEXT_NODE&&t.startContainer.parentNode===this.get$Body()[0]},o.prototype._wrapDefaultBlockTo=function(t){var e,n,o,i;this.saveSelection(t),this._joinSplitedTextNodes(),this.restoreSavedSelection(),t=this.getEditor().getSelection().cloneRange(),n=t.startContainer,o=t.startOffset,e=this.getEditor().createDefaultBlock([t.startContainer]),i=r.getChildNodeByOffset(t.startContainer,t.startOffset),i?t.setStartBefore(i):t.selectNodeContents(t.startContainer),t.collapse(!0),t.insertNode(e),t.setStart(n,o),t.collapse(!0),this.getEditor().setSelection(t)},o.prototype._joinSplitedTextNodes=function(){var t,e,n,o=[];t=this.get$Body().contents().filter(i),t.each(function(t,i){e===i.previousSibling?(n.nodeValue+=i.nodeValue,o.push(i)):n=i,e=i}),$(o).remove()},o.prototype.saveSelection=function(t){var e=this.getEditor();t||(t=e.getSelection().cloneRange()),this.getEditor()._saveRangeToBookmark(t)},o.prototype.restoreSavedSelection=function(){var t=this.getEditor();t.setSelection(t._getRangeAndRemoveBookmark())},o.prototype._wrapDefaultBlockToListInner=function(){this.get$Body().find("li").each(function(t,e){$(e).find("div").length<=0&&$(e).wrapInner("<div />")})},o.prototype.reset=function(){this.setValue("")},o.prototype.changeBlockFormatTo=function(t){this.getEditor().changeBlockFormatTo(t),this.eventManager.emit("wysiwygRangeChangeAfter",this)},o.prototype.makeEmptyBlockCurrentSelection=function(){var t=this;this.getEditor().modifyBlocks(function(e){return e.textContent||(e=t.getEditor().createDefaultBlock()),e})},o.prototype.focus=function(){this.editor.focus()},o.prototype.remove=function(){this.getEditor().destroy(),this.editor=null,this.$body=null},o.prototype.setHeight=function(t){this._height=t,"auto"===t?(this.get$Body().css("overflow","visible"),this.get$Body().css("height","auto")):(this.get$Body().css("overflow","auto"),this.get$Body().css("height","100%"),this.$editorContainerEl.height(t))},o.prototype.setValue=function(t){t=this.eventManager.emitReduce("wysiwygSetValueBefore",t),this.editor.setHTML(t),this.eventManager.emit("wysiwygSetValueAfter",this),this.eventManager.emit("contentChangedFromWysiwyg",this),this.moveCursorToEnd(),this.getEditor().preserveLastLine(),this.getEditor().removeLastUndoStack(),this.getEditor().saveUndoState()},o.prototype.getValue=function(){var t;return this._prepareGetHTML(),t=this.editor.getHTML(),t=t.replace(w,function(t,e){var n;return n="li"===e?t:"td"===e||"th"===e?"<"+e+"></"+e+">":"<br />"}),t=t.replace(C,"</$1>"),t=t.replace(/<div>/g,""),t=t.replace(/<\/div>/g,"<br />"),t=this.eventManager.emitReduce("wysiwygProcessHTMLText",t)},o.prototype._prepareGetHTML=function(){var t=this;t.get$Body().attr("lastGetValue",Date.now()),t._joinSplitedTextNodes(),t.getEditor().modifyDocument(function(){t.eventManager.emit("wysiwygGetValueBefore",t)})},o.prototype._postProcessForChange=function(){var t=this;t.getEditor().modifyDocument(function(){t.eventManager.emit("wysiwygRangeChangeAfter",t)})},o.prototype.readySilentChange=function(){T&&!this.getEditor().isIgnoreChange()&&(this._silentChange=!0)},o.prototype.getEditor=function(){return this.editor},o.prototype.replaceSelection=function(t,e){this.getEditor().replaceSelection(t,e)},o.prototype.replaceRelativeOffset=function(t,e,n){this.getEditor().replaceRelativeOffset(t,e,n)},o.prototype.addWidget=function(t,e,n,o){var i=this.getEditor().getSelectionPosition(t,n,o),r=this.$editorContainerEl.offset();this.$editorContainerEl.append(e),$(e).css({position:"absolute",top:i.top-r.top,left:i.left-r.left})},o.prototype.get$Body=function(){return this.getEditor().get$Body()},o.prototype.hasFormatWithRx=function(t){return this.getEditor().getPath().match(t)},o.prototype.breakToNewDefaultBlock=function(t,e){var n,o,i;i=r.getChildNodeByOffset(t.startContainer,t.startOffset)||r.getChildNodeByOffset(t.startContainer,t.startOffset-1),o=r.getParentUntil(i,this.get$Body()[0]),n=this.editor.createDefaultBlock(),"before"===e?$(o).before(n):$(o).after(n),t.setStart(n,0),t.collapse(!0),this.editor.setSelection(t)},o.prototype.replaceContentText=function(t,e,n){var o;o=$(t).html(),$(t).html(o.replace(e,n))},o.prototype.unwrapBlockTag=function(t){t||(t=function(t){return b.test(t)}),this.getEditor().changeBlockFormat(t),this.eventManager.emit("wysiwygRangeChangeAfter",this)},o.prototype.insertSelectionMarker=function(t){return this._selectionMarker.insertMarker(t,this.getEditor())},o.prototype.restoreSelectionMarker=function(){return this._selectionMarker.restore(this.getEditor())},o.prototype.addManager=function(t,e){var n;e||(e=t,t=null),n=new e(this),this._managers[t||n.name]=n},o.prototype.getManager=function(t){return this._managers[t]},o.prototype.moveCursorToEnd=function(){this.getEditor().moveCursorToEnd(),this.getEditor().scrollTop(this.get$Body().height()),this._correctRangeAfterMoveCursor("end")},o.prototype.moveCursorToStart=function(){this.getEditor().moveCursorToStart(),this.getEditor().scrollTop(0)},o.prototype.scrollTop=function(t){return this.getEditor().scrollTop(t)},o.prototype._correctRangeAfterMoveCursor=function(t){var e=this.getEditor().getSelection().cloneRange(),n=this.get$Body()[0];if("start"===t)for(;n.firstChild;)n=n.firstChild;else for(;n.lastChild;)n=n.lastChild;"BR"===n.tagName?e.setStartBefore(n):e.setStartAfter(n),e.collapse(!0),this.getEditor().setSelection(e)},o.prototype.getRange=function(){return this.getEditor().getSelection().cloneRange()},o.prototype.getTextObject=function(t){return new y(this,t)},o.prototype.defer=function(t){var e=this;setTimeout(function(){e.isEditorValid()&&t(e)},0)},o.prototype.isEditorValid=function(){return this.getEditor()&&$.contains(this.$editorContainerEl[0].ownerDocument,this.$editorContainerEl[0])},o.factory=function(t,e){var n=new o(t,e);return n.init(),n.addManager(l),n.addManager(c),n.addManager(d),n.addManager(h),n.addManager(u),n.addManager(f),n.addManager(p),n.addManager(g),n},t.exports=o},function(t,e,n){"use strict";function o(t){this.wwe=t,this._pch=new r(this.wwe)}var i=n(19),r=n(30),a=tui.util,s=a.browser.msie||/Edge\//.test(navigator.userAgent);o.prototype.init=function(){this._initSquireEvent()},o.prototype._initSquireEvent=function(){var t=this;s?this.wwe.getEditor().addEventListener("keydown",function(e){e.ctrlKey&&67===e.keyCode?t._saveLastestClipboardRangeInfo():e.ctrlKey&&88===e.keyCode&&(t._saveLastestClipboardRangeInfo(),t.wwe.postProcessForChange())}):(this.wwe.getEditor().addEventListener("copy",function(){t._saveLastestClipboardRangeInfo()}),this.wwe.getEditor().addEventListener("cut",function(){t._saveLastestClipboardRangeInfo(),t.wwe.postProcessForChange()})),this.wwe.getEditor().addEventListener("willPaste",function(e){t._latestClipboardRangeInfo&&t._latestClipboardRangeInfo.contents.textContent===e.fragment.textContent&&(e.fragment=$(t._latestClipboardRangeInfo.contents).clone()[0],e.rangeInfo=t._latestClipboardRangeInfo),t._pch.preparePaste(e),t.wwe.eventManager.emit("pasteBefore",{source:"wysiwyg",data:e}),t._refineCursorWithPasteContentsIfNeed(e.fragment),t.wwe.postProcessForChange()})},o.prototype._refineCursorWithPasteContentsIfNeed=function(t){var e=t,n=this.wwe.getEditor().getSelection().cloneRange();if(0!==t.childNodes.length){for(;e.lastChild;)e=e.lastChild;this.wwe.defer(function(t){n.setStartAfter(e),n.collapse(!0),t.getEditor().setSelection(n)})}},o.prototype._isCopyFromEditor=function(t){var e;return!!this._latestClipboardRangeInfo&&(e=this._latestClipboardRangeInfo.contents.textContent,e.replace(/\s/g,"")===t.fragment.textContent.replace(/\s/g,""))},o.prototype._saveLastestClipboardRangeInfo=function(){var t,e=this.wwe.getEditor().getSelection().cloneRange();e=this._extendRange(e),t=e.commonAncestorContainer===this.wwe.get$Body()[0]?"BODY":e.commonAncestorContainer.tagName,this._latestClipboardRangeInfo={contents:e.cloneContents(),commonAncestorName:t}},o.prototype._extendRange=function(t){return!i.isTextNode(t.commonAncestorContainer)||0===t.startOffset&&t.commonAncestorContainer.textContent.length===t.endOffset?(0===t.startOffset&&(t=this._extendStartRange(t)),t.endOffset===i.getOffsetLength(t.endContainer)&&(t=this._extendEndRange(t)),this._isWholeCommonAncestorContainerSelected(t)&&t.selectNode(t.commonAncestorContainer),t):t},o.prototype._extendStartRange=function(t){for(var e=t.startContainer;e.parentNode!==t.commonAncestorContainer&&e.parentNode!==this.wwe.get$Body()[0]&&!e.previousSibling;)e=e.parentNode;return t.setStart(e.parentNode,i.getNodeOffsetOfParent(e)),t},o.prototype._extendEndRange=function(t){for(var e=t.endContainer,n=e.nextSibling;e.parentNode!==t.commonAncestorContainer&&e.parentNode!==this.wwe.get$Body()[0]&&(!n||"BR"===i.getNodeName(n)&&e.parentNode.lastChild===n);)e=e.parentNode,n=e.nextSibling;return t.setEnd(e.parentNode,i.getNodeOffsetOfParent(e)+1),t},o.prototype._isWholeCommonAncestorContainerSelected=function(t){return t.commonAncestorContainer.nodeType===Node.ELEMENT_NODE&&t.commonAncestorContainer!==this.wwe.get$Body()[0]&&0===t.startOffset&&t.endOffset===t.commonAncestorContainer.childNodes.length&&t.commonAncestorContainer===t.startContainer&&t.commonAncestorContainer===t.endContainer},t.exports=o},function(t,e,n){"use strict";function o(t){this.wwe=t}var i=n(19),r=n(31),a=tui.util;o.prototype.preparePaste=function(t){var e,n,o,r,s=this.wwe.getEditor().getSelection().cloneRange(),l=this.wwe.getEditor().getDocument().createDocumentFragment(),c=!1,d=this.wwe.getManager("codeblock"),h=this.wwe.getManager("table");for(t.fragment=this._pasteFirstAid(t.fragment),o=a.toArray(t.fragment.childNodes),o.length&&"DIV"===o[0].tagName&&($(l).append(this._unwrapFragmentFirstChildForPasteAsInline(o[0])),o.shift());o.length;)n=o[0],e=i.getNodeName(n),r="LI"===e||"UL"===e||"OL"===e,d.isInCodeBlock(s)?l.appendChild(d.prepareToPasteOnCodeblock(o)):h.isInTable(s)?(l=h.prepareToPasteOnTable(t,n),o.shift()):r?(l.appendChild(this._prepareToPasteList(o,t.rangeInfo,c)),c=!0):$(l).append(o.shift());t.fragment=l},o.prototype._wrapTextNodeWithDiv=function(t){var e=a.toArray(t.childNodes);a.forEachArray(e,function(e){var n,o=3===e.nodeType;o&&(n=document.createElement("div"),n.innerHTML=e.nodeValue+"<br>",t.replaceChild(n,e))})},o.prototype._pasteFirstAid=function(t){var e=this;return t=r(t),this._removeUnnecessaryBlocks(t),this._removeStyles(t),this._wrapTextNodeWithDiv(t),this._preElementAid(t),this._tableElementAid(t),$(t).find("br").remove(),$(t).find("*").each(function(){e._removeStyles(this)}),t},o.prototype._preElementAid=function(t){var e;$(t).find("PRE").each(function(t,n){$(n).has("code").length?(e=[],$(n).find("code").each(function(){e.push($(this).text().replace(/\n/g,""))})):($(n).find("br").replaceWith("\n"),e=$(n).text().split(/\n/g)),$(n).empty(),e.forEach(function(t){var e=$("<div><code /><br/></div>");e.find("code").text(t),$(n).append(e)})})},o.prototype._removeUnnecessaryBlocks=function(t){var e="div, section, article, aside, nav, menus",n=$(t).find(e);n.each(function(t,e){var n=$(e),o=0!==n.parent("li").length&&"DIV"===e.tagName;o||n.replaceWith(function(){return $(this).html()})})},o.prototype._removeStyles=function(t){var e,n=$(t);"SPAN"!==i.getNodeName(n[0])?n.removeAttr("style"):(e=n.css("color"),n.removeAttr("style"),e?n.css("color",e):n.children().unwrap())},o.prototype._prepareToPasteList=function(t,e,n){var o,r=i.getNodeName(t[0]),a=t.shift(),s=this.wwe.getEditor().getDocument().createDocumentFragment();if("LI"!==r&&t.length&&"LI"===t[0].tagName&&(r="LI",a=this._makeNodeAndAppend({tagName:r},a)),"OL"===r||"UL"===r)!n&&this.wwe.getEditor().hasFormat("LI")?$(s).append(this._wrapCurrentFormat(a)):$(s).append(a);else if("LI"===r){for(o=this.wwe.getEditor().getDocument().createDocumentFragment(),o.appendChild(a);t.length&&"LI"===t[0].tagName;)o.appendChild(t.shift());!n&&this.wwe.getEditor().hasFormat("LI")?$(s).append(this._wrapCurrentFormat(o)):!e||"UL"!==e.commonAncestorName&&"OL"!==e.commonAncestorName?$(s).append(this._makeNodeAndAppend({tagName:"UL"},o)):$(s).append(this._makeNodeAndAppend({tagName:e.commonAncestorName},o))}return s},o.prototype._unwrapFragmentFirstChildForPasteAsInline=function(t){return $(t).find("br").remove(),t.childNodes},o.prototype._wrapCurrentFormat=function(t){var e,n=this;return this._eachCurrentPath(function(o){"DIV"!==o.tagName&&(e=i.isElemNode(t)?t.tagName:t.firstChild.tagName,o.tagName!==e&&(t=n._makeNodeAndAppend(o,t)))}),t},o.prototype._eachCurrentPath=function(t){var e,n=i.getPath(this.wwe.getEditor().getSelection().startContainer,this.wwe.get$Body()[0]);for(e=n.length-1;e>-1;e-=1)t(n[e])},o.prototype._makeNodeAndAppend=function(t,e){var n=$("<"+t.tagName+"/>");return n.append(e),t.id&&n.attr("id",t.id),t.className&&n.addClass(t.className),n[0]},o.prototype._tableElementAid=function(t){var e=this.wwe.getManager("table"),n=e.wrapTheadAndTbodyIntoTableIfNeed(t),o=e.wrapDanglingTableCellsIntoTrIfNeed(t),i=e.wrapTrsIntoTbodyIfNeed(t);o?$(t).append(o):i?$(t).append(i):n&&$(t).append(n)},t.exports=o},function(t,e){"use strict";function n(t,e){var n=$("<div />");return n.append(t),o(n),i(n),r(n,e)}function o(t){t.find("script, iframe, textarea, form, button, select, .Apple-converted-space").remove()}function i(t){t.find("*").each(function(t,e){var n=a.toArray(e.attributes).filter(function(t){return!t.name.match(s)});a.forEachArray(n,function(t){e.attributes.removeNamedItem(t.name)})})}function r(t,e){var n,o;return e?n=t[0].innerHTML:(o=document.createDocumentFragment(),$(o).append(t[0].innerHTML),n=o),n}var a=tui.util,s=/^(src|href|title|data\-+|class|alt|align|style|type|checked)/g;t.exports=n},function(t,e,n){"use strict";function o(){this._markerNode=null}var i=n(19),r="tui-editor-selection-marker";o.prototype.insertMarker=function(t,e){return this._markerNode=this._makeMarker(e),t.insertNode(this._markerNode),t.setStartAfter(this._markerNode),t},o.prototype._makeMarker=function(t){return t.createElement("INPUT",{type:"hidden","class":r})},o.prototype.restore=function(t){var e=t.getSelection().cloneRange();return e.setStartBefore(this._markerNode),e.collapse(!0),t.setSelection(e),$(this._markerNode).remove(),0===e.startOffset&&i.isTextNode(e.startContainer.childNodes[0])&&!e.startContainer.childNodes[0].textContent.replace(/\u200B/,"")&&(e.setStart(e.startContainer.childNodes[0],1),t.setSelection(e)),e},t.exports=o},function(t,e){"use strict";function n(t){this.wwe=t,this.eventManager=t.eventManager,this._init()}var o=/<li/i;n.prototype.name="list",n.prototype._init=function(){this._initEvent()},n.prototype._initEvent=function(){var t=this;this.eventManager.listen("wysiwygRangeChangeAfter",function(){t._findAndRemoveEmptyList()})},n.prototype._findAndRemoveEmptyList=function(){this.wwe.get$Body().find("ul,ol").each(function(t,e){o.test(e.innerHTML)||$(e).remove()})},n.prototype.isInList=function(){var t=this.wwe.getEditor().getSelection().cloneRange();return 0!==$(t.startContainer).parents("LI").length},t.exports=n},function(t,e){"use strict";function n(t){this.wwe=t,this.eventManager=t.eventManager,this._init()}var o="task-list-item",i="data-te-task",r="checked";n.prototype.name="task",n.prototype._init=function(){this._initKeyHandler(),this._initEvent(),this.wwe.getEditor().addEventListener("click",function(t){t.target.hasAttribute(i)&&$(t.target).toggleClass(r)})},n.prototype._initEvent=function(){var t=this;this.eventManager.listen("wysiwygSetValueAfter",function(){t._removeTaskListClass()})},n.prototype._initKeyHandler=function(){var t=this;this.wwe.addKeyEventHandler("ENTER",function(e,n){t.isInTaskList(n)&&t.wwe.defer(function(){var e=t.wwe.getRange(),n=$(e.startContainer).closest("li");n.removeClass(r)})}),this.wwe.addKeyEventHandler("TAB",function(e,n){return!n.collapsed||!t.wwe.getEditor().hasFormat("LI")||(e.preventDefault(),t.eventManager.emit("command","IncreaseDepth"),!1)}),this.wwe.addKeyEventHandler("SHIFT+TAB",function(e,n){var o;return n.collapsed&&t.wwe.getEditor().hasFormat("LI")&&(e.preventDefault(),t.eventManager.emit("command","DecreaseDepth"),o=!1),o})},n.prototype.isInTaskList=function(t){var e;return t||(t=this.wwe.getEditor().getSelection().cloneRange()),e=t.startContainer.nodeType===Node.ELEMENT_NODE&&"LI"===t.startContainer.tagName?t.startContainer:$(t.startContainer).parents("li")[0],$(e).hasClass(o)},n.prototype.unformatTask=function(t){var e;e=$(t).closest("li"),e.removeClass(o),e.removeClass(r),e.removeAttr(i),e.attr("class")||e.removeAttr("class")},n.prototype.formatTask=function(t){var e,n;e=$(t),n=e.closest("li"),n.addClass(o),n.attr(i,"")},n.prototype._formatTaskIfNeed=function(){var t=this.wwe.getEditor().getSelection().cloneRange();this.isInTaskList(t)&&this.formatTask(t.startContainer)},n.prototype._removeTaskListClass=function(){this.wwe.get$Body().find(".task-list").each(function(t,e){$(e).removeClass("task-list")})},t.exports=n},function(t,e,n){"use strict";function o(t){this.wwe=t,this.eventManager=t.eventManager,this._lastCellNode=null,this._init()}function i(t,e){var n,o="";for(n=0;n<t;n+=1)o=o+"<"+e+"><br></"+e+">";return o}var r=n(19);o.prototype.name="table",o.prototype._init=function(){this._initKeyHandler(),this._initEvent()},o.prototype._initEvent=function(){var t=this;this.eventManager.listen("wysiwygRangeChangeAfter",function(){t._unwrapBlockInTable(),t.wwe.defer(t._completeTableIfNeed.bind(t))}),this.eventManager.listen("wysiwygSetValueAfter",function(){t._unwrapBlockInTable()}),this.eventManager.listen("wysiwygProcessHTMLText",function(t){return t.replace(/<br \/>(<\/td>|<\/th>)/g,"$1");
}),this.wwe.getEditor().addEventListener("paste",function(e){var n=t.wwe.getEditor().getSelection(),o=!r.isTextNode(n.commonAncestorContainer);t.isInTable(n)&&!n.collapsed&&o&&e.preventDefault(),t.wwe.defer(t._completeTableIfNeed.bind(t))})},o.prototype._initKeyHandler=function(){var t=this;this.wwe.addKeyEventHandler(function(e,n){t.isInTable(n)?t._recordUndoStateIfNeed(n):t._lastCellNode&&t._recordUndoStateAndResetCellNode(n)}),this.wwe.addKeyEventHandler("ENTER",function(e,n){var o;return t._isAfterTable(n)?(e.preventDefault(),n.setStart(n.startContainer,n.startOffset-1),t.wwe.breakToNewDefaultBlock(n),o=!1):t._isBeforeTable(n)?(e.preventDefault(),t.wwe.breakToNewDefaultBlock(n,"before"),o=!1):t.isInTable(n)&&(t._appendBrIfTdOrThNotHaveAsLastChild(n),o=!1),o}),this.wwe.addKeyEventHandler("BACK_SPACE",function(e,n){var o;return n.collapsed?t.isInTable(n)?(t._tableHandlerOnBackspace(n,e),o=!1):t._isAfterTable(n)&&(e.preventDefault(),t._removeTableOnBackspace(n),o=!1):t.isInTable(n)&&3!==n.commonAncestorContainer.nodeType&&n.commonAncestorContainer!==t.wwe.get$Body()[0]&&(e.preventDefault(),t._removeTableContents(n),n.collapse(!0),t.wwe.getEditor().setSelection(n),o=!1),o})},o.prototype.isInTable=function(t){var e,n;return t.collapsed?(e=t.startContainer,n=!!$(e).closest("table").length):(e=t.commonAncestorContainer,n=!!$(e).closest("table").length||!!$(t.cloneContents()).find("table").length),n},o.prototype._isBeforeTable=function(t){return"TABLE"===r.getNodeName(r.getChildNodeByOffset(t.startContainer,t.startOffset))},o.prototype._isAfterTable=function(t){var e=r.getPrevOffsetNodeUntil(t.startContainer,t.startOffset);return"TABLE"===r.getNodeName(e)&&t.commonAncestorContainer===this.wwe.get$Body()[0]},o.prototype._tableHandlerOnBackspace=function(t,e){var n=r.getPrevOffsetNodeUntil(t.startContainer,t.startOffset,"TR"),o=r.getNodeName(n);n&&"TD"!==o&&"TH"!==o?"BR"===o&&1!==n.parentNode.childNodes.length&&(e.preventDefault(),$(n).remove()):e.preventDefault()},o.prototype._appendBrIfTdOrThNotHaveAsLastChild=function(t){var e,n,o;o=r.getNodeName(t.startContainer),"TD"===o||"TH"===o?n=t.startContainer:(e=$(t.startContainer).parentsUntil("tr"),n=e[e.length-1]),"BR"!==r.getNodeName(n.lastChild)&&"DIV"!==r.getNodeName(n.lastChild)&&$(n).append("<br>")},o.prototype._unwrapBlockInTable=function(){this.wwe.get$Body().find("td div, th div").each(function(t,e){$(e).children().unwrap()})},o.prototype._removeTableOnBackspace=function(t){var e=r.getPrevOffsetNodeUntil(t.startContainer,t.startOffset);this.wwe.getEditor().saveUndoState(t),this.wwe.insertSelectionMarker(t),$(e).remove(),this.wwe.restoreSelectionMarker()},o.prototype._recordUndoStateIfNeed=function(t){var e=r.getParentUntil(t.startContainer,"TR");t.collapsed&&this._lastCellNode!==e&&(this.wwe.getEditor().saveUndoState(t),this._lastCellNode=e)},o.prototype._recordUndoStateAndResetCellNode=function(t){this.wwe.getEditor().saveUndoState(t),this._lastCellNode=null},o.prototype.pasteDataIntoTable=function(t){var e,n,o,i=this.wwe.getEditor().getSelection(),a=this._getTableDataFromTable(t),s=i.startContainer,l=s.parentNode,c="TD"===l.tagName||"TH"===l.tagName,d="TD"===s.tagName||"TH"===s.tagName,h=3===s.nodeType;for(e=h&&c?l:d?s:$(s).find("th,td")[0],n=e;a.length;){for(o=a.shift();n&&o.length;)n.textContent=o.shift(),n=r.nextTableCell(n);n=r.nextLineTableCell(e),e=n}},o.prototype._getTableDataFromTable=function(t){var e=$(t),n=[],o=e.find("tr");return o.each(function(t,e){var o=[],i=$(e).children();i.each(function(t,e){o.push(e.textContent)}),n.push(o)}),n},o.prototype._removeTableContents=function(t){var e,n,o,i=t.startContainer,a=$(t.cloneContents()).find("th,td").length,s=0;for(r.isTextNode(i)&&(i=i.parentNode),e=i,this.wwe.getEditor().saveUndoState();s<a;s+=1)e.innerHTML="<br>",n=r.nextTableCell(e),o=r.nextLineTableCell(e,!0),e=n?n:o?o:null},o.prototype.wrapDanglingTableCellsIntoTrIfNeed=function(t){var e,n,o=$(t).children("td,th");return o.length&&(e=$("<tr></tr>"),o.each(function(t,n){e.append(n)}),n=e[0]),n},o.prototype.wrapTrsIntoTbodyIfNeed=function(t){var e,n,o=$(t).children("tr"),i=o.find("th");return i.length&&i.each(function(t,e){var n=$(e),o=$("<td></td>");o.html(n.html()),o.insertBefore(e),n.detach()}),o.length&&(e=$("<tbody></tbody>"),o.each(function(t,n){e.append(n)}),n=e[0]),n},o.prototype.wrapTheadAndTbodyIntoTableIfNeed=function(t){var e,n,o=$(t).children("thead"),i=$(t).children("tbody");return i.length&&o.length&&(e=$("<table></table>"),e.append(o),e.append(i),n=e[0]),n},o.prototype.prepareToPasteOnTable=function(t,e){var n=document.createDocumentFragment();return this.isTableOrSubTableElement(e.nodeName)?(this.pasteDataIntoTable(t.fragment),t.fragment=n):n.textContent=n.textContent+t.fragment.textContent,n},o.prototype.isTableOrSubTableElement=function(t){return"TABLE"===t||"TBODY"===t||"THEAD"===t||"TR"===t||"TD"===t},o.prototype._stuffTableCellsIntoIncompleteRow=function(t,e){t.each(function(t,n){for(var o=$(n),a=o.find("th,td"),s=a.length,l=r.getNodeName(o.parent()[0]),c="THEAD"===l?"th":"td";s<e;s+=1)o.append($(i(1,c))[0])})},o.prototype._prepareToTableCellStuffing=function(t){var e=t.eq(0).find("th,td").length,n=!1;return t.each(function(t,o){var i=$(o).find("th,td").length;e!==i&&(n=!0,e<i&&(e=i))}),{maximumCellLength:e,needTableCellStuffingAid:n}},o.prototype._addTbodyOrTheadIfNeed=function(t){var e,n,o=!t.find("thead").length,i=!t.find("tbody").length;o?n="th":i&&(n="td"),n&&(e=$("<"+n+"><tr></tr></"+n+">")[0],t.prepend(e))},o.prototype._tableCellAppendAidForTableElement=function(t){var e,n,o=$(t),i=!1,r=null;this._addTbodyOrTheadIfNeed(o),e=o.find("tr"),r=this._prepareToTableCellStuffing(e),n=r.maximumCellLength,i=r.needTableCellStuffingAid,i&&this._stuffTableCellsIntoIncompleteRow(e,n)},o.prototype._generateTheadAndTbodyFromTbody=function(t){var e=$("<tr></tr>"),n=$("<thead></thead>");return e.append(i($(t).find("tr").eq(0).find("td").length,"th")),n.append(e),{thead:n[0],tbody:t}},o.prototype._generateTheadAndTbodyFromThead=function(t){var e=$("<tr></tr>"),n=$("<tbody></tbody>");return e.append(i($(t).find("th").length,"td")),n.append(e),{thead:t,tbody:n[0]}},o.prototype._generateTheadAndTbodyFromTr=function(t){var e,n,o=$(t),r=$("<thead></thead>"),a=$("<tbody></tbody>");return"TH"===o.children()[0].tagName?(e=t,n=i(o.find("th").length,"td")):(e=i(o.find("td").length,"th"),n=t),r.append(e),a.append(n),{thead:r[0],tbody:a[0]}},o.prototype._completeIncompleteTable=function(t){var e,n,o=t.tagName;"TABLE"===o?this._tableCellAppendAidForTableElement(t):(e=$("<table></table>"),e.insertAfter(t),"TBODY"===o?n=this._generateTheadAndTbodyFromTbody(t):"THEAD"===o?n=this._generateTheadAndTbodyFromThead(t):"TR"===o&&(n=this._generateTheadAndTbodyFromTr(t)),e.append(n.thead),e.append(n.tbody))},o.prototype._completeTableIfNeed=function(){var t=this.wwe.getEditor().get$Body(),e=this;t.children().each(function(t,n){e.isTableOrSubTableElement(n.nodeName)&&e._completeIncompleteTable(n)})},t.exports=o},function(t,e,n){"use strict";function o(t){this.wwe=t,this.eventManager=t.eventManager,this._init()}var i=n(19),r="te-cell-selected";o.prototype.name="tableSelection",o.prototype._init=function(){this._initEvent(),this._initKeyHandler(),tui.util.browser.firefox&&(document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false"))},o.prototype._initEvent=function(){var t,e,n=this;this.selectionTimer=null,this.removeSelectionTimer=null,this.isSelectionStarted=!1,this.isCellsSelected=!1,this.eventManager.listen("mousedown",function(e){t=e.data.target,n._removeCellSelectedClassFromAllCellsIfNeed(),n._setTableSelectionTimerIfNeed(t)}),this.eventManager.listen("mouseup",function(o){e=o.data.target,n._clearTableSelectionTimerIfNeed(),n.isSelectionStarted&&n._highlightSelectionIfNeed(t,e),n.isSelectionStarted=!1})},o.prototype._initKeyHandler=function(){var t=this;this.wwe.addKeyEventHandler(function(){return t._removeCellSelectedClassFromAllCellsIfNeed(),!0})},o.prototype._setTableSelectionTimerIfNeed=function(t){var e=this,n=$(t).parents("table").length;n&&(tui.util.browser.firefox&&(this.removeSelectionTimer=setInterval(function(){window.getSelection().removeAllRanges()},250)),this.selectionTimer=setTimeout(function(){e.isSelectionStarted=!0,e.isCellsSelected=!0},300))},o.prototype._clearTableSelectionTimerIfNeed=function(){clearTimeout(this.selectionTimer),tui.util.browser.firefox&&clearTimeout(this.removeSelectionTimer)},o.prototype._highlightSelectionIfNeed=function(t,e){var n=this.wwe.getEditor().getSelection();this._prepareSelection(n,t,e),this._highlightTableCellsBy(n)},o.prototype._reArrangeSelectionIfneed=function(t,e){var n=$(t).parents("table").length,o=$(e).parents("table").length,i=o&&!n,r=!o&&n;return i?t=$(e).parents("table").find("th").first()[0]:r&&(e=$(t).parents("table").find("td").last()[0]),{startContainer:t,endContainer:e}},o.prototype._applySelectionDirection=function(t,e){var n=i.getNodeOffsetOfParent,o=t.startContainer,r=t.endContainer,a=n($(o).closest("tr")[0])-n($(r).closest("tr")[0]),s=n(o)-n(r),l=0===a,c=a<0,d=s>0;return l?d?(e.setStart(r,0),e.setEnd(o,1)):(e.setStart(o,0),e.setEnd(r,1)):c?(e.setStart(o,0),e.setEnd(r,1)):(e.setStart(r,0),e.setEnd(o,1)),e},o.prototype._prepareSelection=function(t,e,n){var o=this._reArrangeSelectionIfneed(e,n),i=this._applySelectionDirection(o,t);this.wwe.getEditor().setSelection(i)},o.prototype._getTableCell=function(t){return 3===t.nodeType?$(t).parent("td,th")[0]:t},o.prototype.getSelectionRangeFromTable=function(t){var e=i.getNodeOffsetOfParent,n=t.commonAncestorContainer,o=n.nodeName,r=e(this._getTableCell(t.startContainer).parentNode),a=e(this._getTableCell(t.endContainer).parentNode),s=e(this._getTableCell(t.startContainer)),l=e(this._getTableCell(t.endContainer)),c="TABLE"===o,d=!!$(n).parents("tbody").length,h="TBODY"===o||d;return c?a+=1:h&&(r+=1,a+=1),{from:{row:r,cell:s},to:{row:a,cell:l}}},o.prototype._highlightTableCellsBy=function(t){var e=$(t.startContainer).parents("table").find("tr"),n=this.getSelectionRangeFromTable(t),o=n.from.row,i=n.from.cell,a=n.to.row,s=n.to.cell;e.each(function(t,e){$(e).find("td,th").each(function(e,n){var l=$(n),c=t===o,d=t===a;c&&e<i||d&&e>s||t<o||t>a?l.removeClass(r):l.addClass(r)})})},o.prototype._removeCellSelectedClassFromAllCellsIfNeed=function(){this.isCellsSelected&&$("table").find("td,th").each(function(t,e){$(e).removeClass(r)})},t.exports=o},function(t,e,n){"use strict";function o(t){this.wwe=t,this.eventManager=t.eventManager,this._init()}function i(){return this.nodeType===Node.TEXT_NODE}var r=n(19);o.prototype.name="hr",o.prototype._init=function(){this._initKeyHandler(),this._initEvent()},o.prototype._initEvent=function(){var t=this;this.eventManager.listen("wysiwygSetValueAfter",function(){t._unwrapDivOnHr()}),this.eventManager.listen("wysiwygGetValueBefore",function(){t._wrapDefaultBlockToOrphanTexts()})},o.prototype._initKeyHandler=function(){var t=this;this.wwe.addKeyEventHandler(function(e,n){return t._onTypedInHr(n)}),this.wwe.addKeyEventHandler("ENTER",function(e,n){return!n.collapsed||t._removeHrOnEnter(n,e)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(e,n){return!n.collapsed||t._removeHrOnBackspace(n,e)})},o.prototype._isInHr=function(t){return"HR"===r.getNodeName(t.startContainer.childNodes[t.startOffset])},o.prototype._isNearHr=function(t){var e=r.getChildNodeByOffset(t.startContainer,t.startOffset-1);return"HR"===r.getNodeName(e)},o.prototype._onTypedInHr=function(t){var e=this;(this._isInHr(t)||this._isNearHr(t))&&this.wwe.defer(function(t){t.saveSelection(),e._wrapDefaultBlockToOrphanTexts(),t.restoreSavedSelection()})},o.prototype._removeHrOnEnter=function(t,e){var n,o;return this._isInHr(t)?n=r.getChildNodeByOffset(t.startContainer,t.startOffset):this._isNearHr(t)&&(n=r.getChildNodeByOffset(t.startContainer,t.startOffset-1),o="before"),this._changeHrToNewDefaultBlock(n,t,e,o)},o.prototype._removeHrOnBackspace=function(t,e){var n,o;return this._isInHr(t)?n=r.getChildNodeByOffset(t.startContainer,t.startOffset):0===t.startOffset?(n=r.getTopPrevNodeUnder(t.startContainer,this.wwe.get$Body()[0]),o="none"):this._isNearHr(t)&&(n=r.getChildNodeByOffset(t.startContainer,t.startOffset-1),o="before"),this._changeHrToNewDefaultBlock(n,t,e,o)},o.prototype._changeHrToNewDefaultBlock=function(t,e,n,o){return!t||"HR"!==r.getNodeName(t)||(n.preventDefault(),"none"!==o&&this.wwe.breakToNewDefaultBlock(e,o),$(t).remove(),!1)},o.prototype._unwrapDivOnHr=function(){this.wwe.get$Body().find("hr").each(function(t,e){$(e).parent().is("div")&&($(e).parent().find("br").remove(),$(e).unwrap())})},o.prototype._wrapDefaultBlockToOrphanTexts=function(){var t;t=this.wwe.get$Body().contents().filter(i),t.each(function(t,e){$(e).wrap("<div />")})},t.exports=o},function(t,e){"use strict";function n(t){this.wwe=t,this.eventManager=t.eventManager,this._init()}n.prototype.name="p",n.prototype._init=function(){this._initEvent()},n.prototype._initEvent=function(){var t=this;this.eventManager.listen("wysiwygSetValueAfter",function(){t._ensurePtagContentWrappedWithDiv(),t._unwrapPtags()})},n.prototype._ensurePtagContentWrappedWithDiv=function(){this.wwe.get$Body().find("p").each(function(t,e){$(e).find("div").length<=0&&$(e).wrapInner("<div />"),$(e).next().is("p")&&$(e).append("<div><br></div>")})},n.prototype._unwrapPtags=function(){this.wwe.get$Body().find("div").each(function(t,e){$(e).parent().is("p")&&$(e).unwrap()})},t.exports=n},function(t,e,n){"use strict";function o(t){this.wwe=t,this.eventManager=t.eventManager,this._init()}var i=n(19),r=/h[\d]/i;o.prototype.name="heading",o.prototype._init=function(){this._initKeyHandler()},o.prototype._initKeyHandler=function(){var t=this;this.wwe.addKeyEventHandler("ENTER",function(e,n){return!t.wwe.hasFormatWithRx(r)||(t._onEnter(e,n),!1)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(e,n){return!t.wwe.hasFormatWithRx(r)||(t._removePrevTopNodeIfNeed(e,n),!1)})},o.prototype._unwrapHeading=function(){this.wwe.unwrapBlockTag(function(t){return r.test(t)})},o.prototype._onEnter=function(t,e){var n=this;e.startOffset>0?this.wwe.defer(function(t){n._unwrapHeading(),t.getEditor().removeLastUndoStack()}):(t.preventDefault(),this._insertEmptyBlockToPrevious(e))},o.prototype._insertEmptyBlockToPrevious=function(t){this.wwe.getEditor().saveUndoState(t),$("<div><br></div>").insertBefore(i.getParentUntil(t.startContainer,this.wwe.get$Body()[0]))},o.prototype._removePrevTopNodeIfNeed=function(t,e){var n,o;return e.collapsed&&(o=i.getTopPrevNodeUnder(e.startContainer,this.wwe.get$Body()[0]),0===e.startOffset&&o&&!o.textContent.length&&(t.preventDefault(),this.wwe.getEditor().saveUndoState(e),$(o).remove(),n=!0)),n},t.exports=o},function(t,e,n){"use strict";function o(t){this.wwe=t,this.eventManager=t.eventManager,this._init()}function i(t){return t.replace(/[<>&]/g,function(t){return s[t]||t})}var r=n(19),a=tui.util,s={"&":"&amp;","<":"&lt;",">":"&gt;"},l=/\u200B/g,c="data-te-codeblock";o.prototype.name="codeblock",o.prototype._init=function(){this._initKeyHandler(),this._initEvent()},o.prototype._initKeyHandler=function(){this.wwe.addKeyEventHandler("BACK_SPACE",this._removeCodeblockIfNeed.bind(this))},o.prototype._initEvent=function(){var t=this;this.eventManager.listen("wysiwygSetValueAfter",function(){t._splitCodeblockToEachLine()}),this.eventManager.listen("wysiwygProcessHTMLText",function(e){return t._mergeCodeblockEachlinesFromHTMLText(e)})},o.prototype.prepareToPasteOnCodeblock=function(t){var e=this.wwe.getEditor().getSelection().cloneRange(),n=this.wwe.getEditor().getDocument().createDocumentFragment();return 1===t.length&&this._isCodeBlock(t[0])?n.appendChild(this._copyCodeblockTypeFromRangeCodeblock(t.shift(),e)):n.appendChild(this._copyCodeblockTypeFromRangeCodeblock(this.convertToCodeblock(t),e)),n},o.prototype.convertToCodeblock=function(t){for(var e=$("<pre />"),n=this,o=t.shift();o;)e.append(n._makeCodeBlockLineHtml(o.textContent)),o=t.shift();return e.attr(c,""),e[0]},o.prototype._copyCodeblockTypeFromRangeCodeblock=function(t,e){var n,o;return n=r.getParentUntil(e.commonAncestorContainer,this.wwe.get$Body()[0]),"PRE"===r.getNodeName(n)&&(o=$(n).prop("attributes"),a.forEach(o,function(e){$(t).attr(e.name,e.value)})),t},o.prototype._mergeCodeblockEachlinesFromHTMLText=function(t){return t=t.replace(/<pre( .*?)?>(.*?)<\/pre>/g,function(t,e,n){return n=n.replace(/<br \/>/g,"\n"),n=n.replace(/<div ?(.*?)>/g,""),n=n.replace(/\n$/,""),"<pre><code"+(e||"")+">"+n+"</code></pre>"})},o.prototype._splitCodeblockToEachLine=function(){var t=this;this.wwe.get$Body().find("pre").each(function(e,n){var o=n.textContent.replace(/\n+$/,"").split("\n"),i=$(n).find("code").attr("data-language");i&&($(n).attr("data-language",i),$(n).addClass("lang-"+i)),$(n).empty(),a.forEach(o,function(e){$(n).append(t._makeCodeBlockLineHtml(e))}),$(n).attr(c,"")})},o.prototype._makeCodeBlockLineHtml=function(t){return t=t?i(t):"<br>","<div>"+t+"</div>"},o.prototype._removeCodeblockIfNeed=function(t,e){var n,o,i,r=this;return!this.isInCodeBlock(e)||(n=$(e.startContainer).closest("pre"),o=$(n).find("div").eq(0),i=o.text().replace(l,""),0!==e.startOffset&&0!==i.length||!($(n).find("div").length<=1)||(this.wwe.getEditor().modifyBlocks(function(){var t,e=r.wwe.getEditor().getDocument().createDocumentFragment();return t=0===i.length?"<br>":o.html().replace(l,""),$(e).append($("<div>"+t+"</div>")),e}),!1))},o.prototype.isInCodeBlock=function(t){var e;return e=t.collapsed?t.startContainer:t.commonAncestorContainer,this._isCodeBlock(e)},o.prototype._isCodeBlock=function(t){return!!$(t).closest("pre").length},t.exports=o},function(t,e,n){"use strict";function o(){r.apply(this,arguments),this._decorateHandlerToCancelable("copy"),this._decorateHandlerToCancelable(l?"beforepaste":"paste")}var i=n(19),r=window.Squire,a=tui.util,s=/\b(H[\d]|LI|P|BLOCKQUOTE|TD)\b/,l=/Trident\/[456]\./.test(navigator.userAgent);o.prototype=a.extend({},r.prototype),o.prototype.get$Body=function(){return this.$body=this.$body||$(this.getRoot()),this.$body},o.prototype._decorateHandlerToCancelable=function(t){var e,n;if(e=this._events[t],e.length>1)throw new Error("too many"+t+" handlers in squire");n=e[0].bind(this),e[0]=function(t){t.defaultPrevented||n(t)}},o.prototype.changeBlockFormat=function(t,e){var n=this;this.modifyBlocks(function(o){var r,s,l,c,d,h,u;if(o.childNodes.length?r=o.childNodes[0]:(r=n.createDefaultBlock(),o.appendChild(r)),t){for(;r.firstChild;)r=r.firstChild;for(u=function(t){c.appendChild(t)};r!==o;){if(d=r.tagName,a.isFunction(t)?t(d):d===t){c=r.childNodes[0],(!i.isElemNode(c)||r.childNodes.length>1)&&(c=n.createDefaultBlock(),a.forEachArray(a.toArray(r.childNodes),u),h=c.lastChild,h&&"BR"===i.getNodeName(h)&&c.removeChild(h)),l=e?n.createElement(e,[c]):c,s=n.getDocument().createDocumentFragment(),s.appendChild(l),o=s;break}r=r.parentNode}}return s&&t||!e||"DIV"!==i.getNodeName(o.childNodes[0])||(o=n.createElement(e,[o.childNodes[0]])),o})},o.prototype.changeBlockFormatTo=function(t){this.changeBlockFormat(function(t){return s.test(t)},t)},o.prototype.getCaretPosition=function(){return this.getCursorPosition()},o.prototype.replaceSelection=function(t,e){e&&this.setSelection(e),this._ignoreChange=!0,this.insertHTML(t)},o.prototype.replaceRelativeOffset=function(t,e,n){var o;o=this.getSelection().cloneRange(),this._replaceRelativeOffsetOfSelection(t,e,n,o)},o.prototype._replaceRelativeOffsetOfSelection=function(t,e,n,o){var r,a,s,l=o.endContainer,c=o.endOffset;"TEXT"!==i.getNodeName(l)&&(l=this._getClosestTextNode(l,c),l&&(c=i.isTextNode(l)?l.nodeValue.length:l.textContent.length)),l?(r=this.getSelectionInfoByOffset(l,c+e),o.setStart(r.element,r.offset),s=c+(e+n),a=this.getSelectionInfoByOffset(l,s),o.setEnd(a.element,a.offset),this.replaceSelection(t,o)):this.replaceSelection(t)},o.prototype._getClosestTextNode=function(t,e){var n=i.getChildNodeByOffset(t,e-1);return"TEXT"!==i.getNodeName(n)&&(n=n.previousSibling),n},o.prototype.getSelectionInfoByOffset=function(t,e){var n,o,r,a,s=e>=0?"next":"previous",l=Math.abs(e),c=n;for(n="next"===s?t:t.previousSibling,r=l,a=0;n&&(o=i.isTextNode(n)?n.nodeValue.length:n.textContent.length,a+=o,!(l<=a));)r-=o,i.getTextLength(n)>0&&(c=n),n=n[s+"Sibling"];return n||(n=c,r=i.getTextLength(n)),"previous"===s&&(r=i.getTextLength(n)-r),{element:n,offset:r}},o.prototype.getSelectionPosition=function(t,e,n){var o,i,r,a=this.createElement("INPUT");return i=t.cloneRange(),i.setStart(i.startContainer,i.startOffset),r=this.getSelectionInfoByOffset(t.endContainer,t.endOffset+(n||0)),i.setEnd(r.element,r.offset),this._ignoreChange=!0,this.insertElement(a,i),o=$(a).offset(),"over"!==e&&(o.top+=$(a).outerHeight()),a.parentNode.removeChild(a),t.setStart(t.endContainer,t.endOffset),t.collapse(!0),this.setSelection(t),o},o.prototype.removeLastUndoStack=function(){this._undoStack.length&&(this._undoStackLength-=1,this._undoIndex-=1,this._undoStack.pop(),this._isInUndoState=!1)},o.prototype.replaceParent=function(t,e,n){var o;o=$(t).closest(e),o.length&&(o.wrapInner("<"+n+"/>"),o.children().unwrap())},o.prototype.preserveLastLine=function(){var t=this.get$Body().children().last();"DIV"!==i.getNodeName(t[0])&&(this._ignoreChange=!0,$(this.createDefaultBlock()).insertAfter(t))},o.prototype.scrollTop=function(t){return a.isUndefined(t)?this.get$Body().scrollTop():this.get$Body().scrollTop(t)},o.prototype.isIgnoreChange=function(){return this._ignoreChange},t.exports=o},function(t,e,n){"use strict";function o(t,e){this._wwe=t,s&&(this.isComposition=!1,this._initCompositionEvent()),this.setRange(e||this._wwe.getRange())}var i=n(19),r=tui.util.browser.msie&&11===tui.util.browser.version,a=navigator.appVersion.indexOf("Win")!==-1&&tui.util.browser.chrome,s=r||a;o.prototype._initCompositionEvent=function(){var t=this;this._wwe.getEditor().addEventListener("compositionstart",function(){t.isComposition=!0}),this._wwe.getEditor().addEventListener("compositionend",function(){t.isComposition=!1})},o.prototype.setRange=function(t){this._range&&this._range.detach(),this._range=t},o.prototype.expandStartOffset=function(){var t=this._range;i.isTextNode(t.startContainer)&&t.startOffset>0&&t.setStart(t.startContainer,t.startOffset-1)},o.prototype.expandEndOffset=function(){var t=this._range;i.isTextNode(t.endContainer)&&t.endOffset<t.endContainer.nodeValue.length&&t.setEnd(t.endContainer,t.endOffset+1)},o.prototype.setEndBeforeRange=function(t){var e=t.startOffset;this.isComposition&&(e+=1),this._range.setEnd(t.startContainer,e)},o.prototype.getTextContent=function(){return this._range.cloneContents().textContent},o.prototype.replaceContent=function(t){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(t),this._range=this._wwe.getRange()},o.prototype.deleteContent=function(){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(""),this._range=this._wwe.getRange()},o.prototype.peekStartBeforeOffset=function(t){var e=this._range.cloneRange();return e.setStart(e.startContainer,Math.max(e.startOffset-t,0)),e.setEnd(this._range.startContainer,this._range.startOffset),e.cloneContents().textContent},t.exports=o},function(t,e){"use strict";function n(t,e){this.$el=$(t.el),this.height=t.height,this.type=t.initialEditType,this.eventManager=e,this.init(),this._initEvent()}var o=['<div class="tui-editor">','<div class="te-md-container">','<div class="te-editor" />','<div class="te-md-splitter" />','<div class="te-preview" />',"</div>",'<div class="te-ww-container">','<div class="te-editor" />',"</div>","</div>"].join("");n.prototype.init=function(){this._renderLayout(),this._initMarkdownAndPreviewSection(),this._initWysiwygSection()},n.prototype._initEvent=function(){this.eventManager.listen("hide",this.hide.bind(this)),this.eventManager.listen("show",this.show.bind(this))},n.prototype._renderLayout=function(){this.$containerEl=$(o).appendTo(this.$el)},n.prototype.switchToWYSIWYG=function(){this.$containerEl.removeClass("te-md-mode"),this.$containerEl.addClass("te-ww-mode")},n.prototype.switchToMarkdown=function(){this.$containerEl.removeClass("te-ww-mode"),this.$containerEl.addClass("te-md-mode")},n.prototype._initMarkdownAndPreviewSection=function(){this.$mdEditorContainerEl=this.$containerEl.find(".te-md-container .te-editor"),this.$previewEl=this.$containerEl.find(".te-md-container .te-preview")},n.prototype._initWysiwygSection=function(){this.$wwEditorContainerEl=this.$containerEl.find(".te-ww-container .te-editor")},n.prototype._verticalSplitStyle=function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-tab"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-vertical")},n.prototype._tabStyle=function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-vertical"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-tab")},n.prototype.changePreviewStyle=function(t){"tab"===t?this._tabStyle():"vertical"===t&&this._verticalSplitStyle()},n.prototype.hide=function(){this.$el.find(".tui-editor").addClass("te-hide")},n.prototype.show=function(){this.$el.find(".tui-editor").removeClass("te-hide")},n.prototype.remove=function(){this.$el.find(".tui-editor").remove()},n.prototype.getEditorEl=function(){return this.$containerEl},n.prototype.getPreviewEl=function(){return this.$previewEl},n.prototype.getMdEditorContainerEl=function(){return this.$mdEditorContainerEl},n.prototype.getWwEditorContainerEl=function(){return this.$wwEditorContainerEl},t.exports=n},function(t,e){"use strict";function n(){this.events=new o.Map,this.TYPE=new o.Enum(i)}var o=tui.util,i=["previewBeforeHook","previewRenderAfter","addImageBlobHook","setValueAfter","contentChangedFromWysiwyg","changeFromWysiwyg","contentChangedFromMarkdown","changeFromMarkdown","change","changeModeToWysiwyg","changeModeToMarkdown","changeMode","changePreviewStyle","openPopupAddLink","openPopupAddImage","openPopupAddTable","openPopupTableUtils","openHeadingSelect","closeAllPopup","command","htmlUpdate","markdownUpdate","renderedHtmlUpdated","removeEditor","convertorAfterMarkdownToHtmlConverted","convertorAfterHtmlToMarkdownConverted","stateChange","wysiwygSetValueAfter","wysiwygSetValueBefore","wysiwygGetValueBefore","wysiwygProcessHTMLText","wysiwygRangeChangeAfter","wysiwygKeyEvent","pasteBefore","scroll","click","mousedown","mouseup","contextmenu","keydown","keyup","keyMap","load","focus","blur","paste","copy","drop","show","hide"];n.prototype.listen=function(t,e){var n,o=this._getTypeInfo(t);if(!this._hasEventType(o.type))throw new Error("There is no event type "+o.type);n=this.events.get(o.type)||[],o.namespace&&(e.namespace=o.namespace),n.push(e),this.events.set(o.type,n)},n.prototype.emit=function(){var t,e,n=o.toArray(arguments),i=n.shift(),r=this._getTypeInfo(i),a=this.events.get(r.type);return a&&o.forEach(a,function(i){t=i.apply(null,n),o.isUndefined(t)||(e=e||[],e.push(t))}),e},n.prototype.emitReduce=function(){var t=o.toArray(arguments),e=t.shift(),n=this.events.get(e);return n&&o.forEach(n,function(e){var n=e.apply(null,t);o.isFalsy(n)||(t[0]=n)}),t[0]},n.prototype._getTypeInfo=function(t){var e=t.split(".");return{type:e[0],namespace:e[1]}},n.prototype._hasEventType=function(t){return!o.isUndefined(this.TYPE[t.split(".")[0]])},n.prototype.addEventType=function(t){if(this._hasEventType(t))throw new Error("There is already have event type "+t);this.TYPE.set(t)},n.prototype.removeEventHandler=function(t){var e=this,n=this._getTypeInfo(t),o=n.namespace;t=n.type,t&&!o?this.events["delete"](t):!t&&o?this.events.forEach(function(t,n){e._removeEventHandlerWithTypeInfo(n,o)}):t&&o&&e._removeEventHandlerWithTypeInfo(t,o)},n.prototype._removeEventHandlerWithTypeInfo=function(t,e){var n,i=[];n=this.events.get(t),o.forEach(n,function(t){t.namespace!==e&&i.push(t)}),this.events.set(t,i)},t.exports=n},function(t,e,n){"use strict";function o(t){this._command=new i.Map,this._mdCommand=new i.Map,this._wwCommand=new i.Map,this.base=t,this.keyMapCommand={},this._initEvent()}var i=tui.util,r=n(46),a=/Mac/.test(navigator.platform),s=a?1:0;o.prototype.addCommand=function(t){var e,n;return 2===arguments.length&&(t=o.command(arguments[0],arguments[1])),e=t.getName(),t.isMDType()?n=this._mdCommand:t.isWWType()?n=this._wwCommand:t.isGlobalType()&&(n=this._command),n.set(e,t),t.keyMap&&(this.keyMapCommand[t.keyMap[s]]=e),t},o.prototype._initEvent=function(){var t=this;this.base.eventManager.listen("command",function(){t.exec.apply(t,arguments)}),this.base.eventManager.listen("keyMap",function(e){var n=t.keyMapCommand[e.keyMap];n&&(e.data.preventDefault(),t.exec(n))})},o.prototype.exec=function(t){var e,n,o=this.base,r=i.toArray(arguments);return r.shift(),e=this._command.get(t),e||(this.base.isMarkdownMode()?(e=this._mdCommand.get(t),o=this.base.mdEditor):(e=this._wwCommand.get(t),o=this.base.wwEditor)),e&&(r.unshift(o),n=e.exec.apply(e,r)),n},o.command=function(t,e){var n;return n=r.factory(t,e.name,e.keyMap),i.extend(n,e),n},t.exports=o},function(t,e){"use strict";function n(t,e,n){this.name=t,this.type=e,n&&this.setKeyMap(n)}var o=tui.util;n.prototype.getName=function(){return this.name},n.prototype.getType=function(){return this.type},n.prototype.isMDType=function(){return this.type===n.TYPE.MD},n.prototype.isWWType=function(){return this.type===n.TYPE.WW},n.prototype.isGlobalType=function(){return this.type===n.TYPE.GB},n.prototype.setKeyMap=function(t,e){this.keyMap=[t,e]},n.factory=function(t,e){var i,r;return"markdown"===t?r=n.TYPE.MD:"wysiwyg"===t?r=n.TYPE.WW:"global"===t&&(r=n.TYPE.GB),i=new n(e.name,r),o.extend(i,e),i},n.TYPE={MD:0,WW:1,GB:2},t.exports=n},function(t,e,n){"use strict";function o(t){this.eventManager=t,this._initDropEvent(),this._initPasteEvent(),this._initDefaultImageImporter()}var i=n(48),r=tui.util,a=/^(([^\n\r]*|"[^"]+")(\t([^\n\r]*?|"[^"]+")){1,}[\r\n]*){1,}$/;o.prototype._initDropEvent=function(){var t=this;this.eventManager.listen("drop",function(e){var n=e.data.dataTransfer&&e.data.dataTransfer.files;t._processBlobItems(n,e.data)})},o.prototype._initPasteEvent=function(){var t=this;this.eventManager.listen("paste",function(e){t._processClipboard(e.data)})},o.prototype._initDefaultImageImporter=function(){this.eventManager.listen("addImageBlobHook",function(t,e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)})},o.prototype._emitAddImageBlobHook=function(t){var e=this,n=t.name?t:t.getAsFile();this.eventManager.emit("addImageBlobHook",n,function(t){e.eventManager.emit("command","AddImage",{imageUrl:t,altText:n.name||"image"})})},o.prototype._addExcelTable=function(t){var e=i(t);this.eventManager.emit("command","Table",e.col,e.row,e.data)},o.prototype._processClipboard=function(t){var e,n,o;n=t.clipboardData||window.clipboardData,e=n&&n.items,o=n.types,e&&o&&1===o.length&&r.inArray("Files",o)!==-1?this._processBlobItems(e,t):this._precessDataTransfer(n,t)},o.prototype._processBlobItems=function(t,e){var n=this;t&&r.forEachArray(t,function(t){return t.type.indexOf("image")===-1||(e.preventDefault(),e.codemirrorIgnore=!0,n._emitAddImageBlobHook(t),!1)})},o.prototype._precessDataTransfer=function(t,e){var n;n=t.getData("text"),a.test(n)&&confirm("테이블 포맷으로 붙여넣겠습니까?")&&(e.preventDefault(),e.codemirrorIgnore=!0,this._addExcelTable(n))},t.exports=o},function(t,e){"use strict";function n(t){var e=o(t),n=[],i=e.length,r=0;return e.forEach(function(t){var e=t.split("\t");e&&(r||(r=e.length),n=n.concat(e))}),{col:r,row:i,data:n}}function o(t){return t=t.replace(/"([^"]+)"/g,function(t,e){return e.replace(/(\r\n)|(\r)/g,"<br/>")}),t=t.replace(/(\r\n$)|(\r$)|(\n$)/,""),t=t.replace(/(\r\n)|(\r)/g,"\n"),t.split("\n")}t.exports=n},function(t,e,n){"use strict";function o(t){this.eventManager=t}var i=n(31),r=n(50),a=window.marked,s=window.toMark,l=window.hljs;o.prototype._markdownToHtmlWithCodeHighlight=function(t){return t=t.replace(/\\\|/g,":ESCAPE_VERTICAL_BAR:"),a(t,{
renderer:r,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,highlight:function(t,e){return l.getLanguage(e)?l.highlight(e,t).value:t}}).replace(/:ESCAPE_VERTICAL_BAR:/g,"|")},o.prototype._markdownToHtml=function(t){return t=t.replace(/\\\|/g,":ESCAPE_VERTICAL_BAR:"),a(t,{renderer:r,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1}).replace(/:ESCAPE_VERTICAL_BAR:/g,"|")},o.prototype.toHTMLWithCodeHightlight=function(t){var e=this._markdownToHtmlWithCodeHighlight(t);return e=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",e),i(e,!0)},o.prototype.toHTML=function(t){var e=this._markdownToHtml(t);return e=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",e),i(e,!0)},o.prototype.toMarkdown=function(t){var e=s(t);return e=this.eventManager.emitReduce("convertorAfterHtmlToMarkdownConverted",e)},o.factory=function(t){return new o(t)},t.exports=o},function(t,e){"use strict";function n(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var o=new window.marked.Renderer,i=/^((?:<p>|))(\[(?:x| )\]) /i;o.listitem=function(t){var e,n,o="";return e=i.exec(t),e&&(t=t.substring(e[0].length),n="[x]"===e[2].toLowerCase()?" checked":"",o=' class="task-list-item'+n+'"'),"<li data-te-task"+o+">"+t+"</li>\n"},o.code=function(t,e,o){var i;return this.options.highlight&&(i=this.options.highlight(t,e),null!==i&&i!==t&&(o=!0,t=i)),e?'<pre><code class="'+this.options.langPrefix+n(e,!0)+'" data-language="'+n(e,!0)+'">'+(o?t:n(t,!0))+"\n</code></pre>\n":"<pre><code>"+(o?t:n(t,!0))+"\n</code></pre>"},o.tablecell=function(t,e){var n=e.header?"th":"td",o=$("<"+n+"></"+n+">");return e.align&&o.attr("align",e.align),o.html(t),o[0].outerHTML+"\n"},o.table=function(t,e){var n=t.match(/\/th/g).length,o=e.match(/<tr>[\s\S]*?<\/tr>/g),i=o[o.length-1];return i&&i.match(/\/td/g).length<n&&(e=e.replace(/<\/td>\n<\/tr>\n$/g,"</td>\n<td></td>\n</tr>\n")),"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},o.del=function(t){var e="";return t&&(e="<s>"+t+"</s>"),e},t.exports=o},function(t,e,n){"use strict";function o(t){var e=this;this.options=t,this.eventManager=new r,this.commandManager=new a(this),this.convertor=new l(this.eventManager),this.options.hooks&&c.forEach(this.options.hooks,function(t,n){e.addHook(n,t)}),this.options.events&&c.forEach(this.options.events,function(t,n){e.on(n,t)}),this.preview=new i($(e.options.el),this.eventManager,this.convertor),this.preview.$el.on("click",function(t){t.target.hasAttribute(d)&&($(t.target).toggleClass(h),e.eventManager.emit("change",{source:"viewOnly"}))}),s.applyExtension(e,e.options.exts),e.setValue(e.options.initialValue),e.eventManager.emit("load",e)}var i=n(26),r=n(44),a=n(45),s=n(6),l=n(49),c=tui.util,d="data-te-task",h="checked";o.prototype.setValue=function(t){this.markdownValue=t=t||"",this.preview.refresh(this.markdownValue),this.eventManager.emit("setValueAfter",this.markdownValue)},o.prototype.getValue=function(){return this.convertor.toMarkdown(this.preview.$el.html())},o.prototype.on=function(t,e){this.eventManager.listen(t,e)},o.prototype.off=function(t){this.eventManager.removeEventHandler(t)},o.prototype.remove=function(){this.eventManager.emit("removeEditor"),this.options=null,this.eventManager=null,this.commandManager=null,this.convertor=null,this.preview=null},o.prototype.addHook=function(t,e){this.eventManager.removeEventHandler(t),this.eventManager.listen(t,e)},o.prototype.isViewOnly=function(){return!0},o.prototype.isMarkdownMode=function(){return!1},o.prototype.isWysiwygMode=function(){return!1},t.exports=o},function(t,e,n){"use strict";function o(t){this.name="default",this.type=t.options.initialEditType,this.editor=t,this.init(t.options.el),this._initEvent()}var i=n(53),r=n(54),a=n(56),s=n(57),l=n(58),c=n(59),d=n(60),h=n(61),u=n(62),f=['<div class="tui-editor-defaultUI">','<div class="te-toolbar-section"></div>','<div class="te-markdown-tab-section"></div>','<div class="te-editor-section"></div>','<div class="te-mode-switch-section"></div>',"</div>"].join("");o.prototype.init=function(t){this._renderLayout(t),this._initEditorSection(),this._initToolbar(),this._initModeSwitch(),this._initPopupAddLink(),this._initPopupAddImage(),this._initPopupAddTable(),this._initPopupAddHeading(),this._initPopupTableUtils(),this._initMarkdownTab()},o.prototype._initEditorSection=function(){this.$el.find(".te-editor-section").append(this.editor.layout.getEditorEl())},o.prototype._initEvent=function(){var t=this;this.editor.eventManager.listen("hide",this.hide.bind(this)),this.editor.eventManager.listen("show",this.show.bind(this)),this.editor.eventManager.listen("changeMode",function(){t.markdownTabControl()}),this.editor.eventManager.listen("changePreviewStyle",function(){t.markdownTabControl()})},o.prototype._renderLayout=function(t){this.$el=$(f).appendTo(t)},o.prototype._initToolbar=function(){this.toolbar=new i(this.editor.eventManager),this.$el.find(".te-toolbar-section").append(this.toolbar.$el)},o.prototype._initModeSwitch=function(){var t=this;this.modeSwitch=new s("markdown"===this.type?s.TYPE.MARKDOWN:s.TYPE.WYSIWYG),this.$el.find(".te-mode-switch-section").append(this.modeSwitch.$el),this.modeSwitch.on("modeSwitched",function(e,n){t.editor.changeMode(n)})},o.prototype.markdownTabControl=function(){this.editor.isMarkdownMode()&&"tab"===this.editor.getCurrentPreviewStyle()?(this.$el.find(".te-markdown-tab-section").show(),this.markdownTab.activate("Editor")):this.$el.find(".te-markdown-tab-section").hide()},o.prototype._initMarkdownTab=function(){this.markdownTab=new r({items:["Editor","Preview"],sections:[this.editor.layout.getMdEditorContainerEl(),this.editor.layout.getPreviewEl()]}),this.$el.find(".te-markdown-tab-section").append(this.markdownTab.$el)},o.prototype._initPopupAddLink=function(){this.popupAddLink=new l({$target:this.$el,eventManager:this.editor.eventManager})},o.prototype._initPopupAddImage=function(){this.popupAddImage=new c({$target:this.$el,eventManager:this.editor.eventManager})},o.prototype._initPopupAddTable=function(){this.popupAddTable=new h({$target:this.$el,eventManager:this.editor.eventManager,$button:this.$el.find("button.tui-table"),css:{position:"absolute"}})},o.prototype._initPopupAddHeading=function(){this.popupAddHeading=new u({$target:this.$el,eventManager:this.editor.eventManager,$button:this.$el.find("button.tui-heading"),css:{position:"absolute"}})},o.prototype._initPopupTableUtils=function(){var t=this;this.editor.eventManager.listen("contextmenu",function(e){$(e.data.target).parents("table").length>0&&(e.data.preventDefault(),t.editor.eventManager.emit("openPopupTableUtils",e.data))}),this.popupTableUtils=new d({$target:this.$el,eventManager:this.editor.eventManager})},o.prototype.hide=function(){this.$el.addClass("te-hide")},o.prototype.show=function(){this.$el.removeClass("te-hide")},o.prototype.remove=function(){this.$el.remove()},o.prototype.createPopup=function(t){return a.factory(t)},t.exports=o},function(t,e,n){"use strict";function o(t){i.call(this,{tagName:"div",className:"tui-editor-defaultUI-toolbar"}),this.buttons=[],this.eventManager=t,this.render(),this._initButton()}var i=n(11),r=n(10),a=tui.util;o.prototype=a.extend({},i.prototype),o.prototype.render=function(){this.$buttonContainer=this.$el},o.prototype.addButton=function(t,e){var n=this.eventManager;t.render||(t=new r(t)),t.on("command",function(t,e){n.emit("command",e)}),t.on("event",function(t,e){n.emit(e)}),this.buttons.push(t),e?this.$buttonContainer.find("button").eq(e-1).after(t.$el):this.$buttonContainer.append(t.$el)},o.prototype._initButton=function(){this.addButton(new r({className:"tui-heading",event:"openHeadingSelect",tooltip:"제목크기"})),this.addButton(new r({className:"tui-bold",command:"Bold",tooltip:"굵게"})),this.addButton(new r({className:"tui-italic",command:"Italic",tooltip:"기울임꼴"})),this.addButton(new r({className:"tui-strike",command:"Strike",text:"~",tooltip:"취소선"})),this.addButton(new r({className:"tui-hrline",command:"HR",tooltip:"문단나눔"})),this.addButton(new r({className:"tui-quote",command:"Blockquote",tooltip:"인용구"})),this.addButton(new r({className:"tui-ul",command:"UL",tooltip:"글머리 기호"})),this.addButton(new r({className:"tui-ol",command:"OL",tooltip:"번호 매기기"})),this.addButton(new r({className:"tui-task",command:"Task",tooltip:"체크박스"})),this.addButton(new r({className:"tui-table",event:"openPopupAddTable",tooltip:"표 삽입"})),this.addButton(new r({className:"tui-link",event:"openPopupAddLink",tooltip:"링크 삽입"})),this.addButton(new r({className:"tui-codeblock",command:"CodeBlock",text:"CB",tooltip:"코드블럭 삽입"})),this.addButton(new r({className:"tui-code",command:"Code",tooltip:"코드 삽입"})),this.addButton(new r({className:"tui-image",event:"openPopupAddImage",tooltip:"이미지 삽입"}))},t.exports=o},function(t,e,n){"use strict";function o(t){i.call(this,{tagName:"div",className:"te-tab"}),t=a.extend({},t),this.items=t.items,this.sections=t.sections,this._$activeButton=null,this.render(),this._initItemClickEvent(t.onItemClick),this._applyInitName(t.initName)}var i=n(11),r=n(55),a=tui.util,s='<button type="button" data-index="${index}">${name}</button>';o.prototype=a.extend({},i.prototype),o.prototype.render=function(){var t;t=r(s,this._getButtonData()),this.$el.html(t),this.attachEvents({"click button":"_onButtonClick"})},o.prototype._applyInitName=function(t){t&&this.activate(t)},o.prototype._getButtonData=function(){var t,e,n=[];for(t=0,e=this.items.length;t<e;t+=1)n.push({name:this.items[t],index:t});return n},o.prototype._onButtonClick=function(t){var e=$(t.target);this._activateTabByButton(e)},o.prototype._deactivate=function(){this._$activeButton&&(this._$activeButton.removeClass("te-tab-active"),this.sections&&this.sections[this._$activeButton.attr("data-index")].removeClass("te-tab-active"))},o.prototype._activateButton=function(t){this._$activeButton=t,this._$activeButton.addClass("te-tab-active")},o.prototype._activateSection=function(t){this.sections&&this.sections[t].addClass("te-tab-active")},o.prototype.activate=function(t){var e=this.$el.find('button:contains("'+t+'")');this._activateTabByButton(e)},o.prototype._activateTabByButton=function(t){this._isActivatedButton(t)||(this._deactivate(),this._activateButton(t),this._activateSection(t.attr("data-index")),this.trigger("itemClick",t.text()))},o.prototype._isActivatedButton=function(t){return this._$activeButton&&this._$activeButton.text()===t.text()},o.prototype._initItemClickEvent=function(t){t&&this.on("itemClick",t)},t.exports=o},function(t,e){"use strict";function n(t,e){var n,i=[];return o.isArray(e)||(e=[e]),o.forEach(e,function(e){n=t.replace(/\${([\w]+)}/g,function(t,n){return o.isExisty(e,n)?e[n].toString():""}),i.push(n)}),i}var o=tui.util;t.exports=n},function(t,e,n){"use strict";function o(t){t=r.extend({},t),i.call(this,{tagName:"div",className:s+"wrapper",rootElement:t.$el}),t=r.extend({},t),this._setId(),this._initTarget(t),this._initExternalPopupHtmlIfNeed(t),this._initCloserOpener(t),this._initContent(t),this._initTitle(t),this._initClassName(t),this._initCssStyles(t)}var i=n(11),r=tui.util,a=0,s="tui-popup-",l=['<div class="'+s+'header">','<span class="'+s+'title"></span>','<button class="'+s+'close-button">x</button>',"</div>",'<div class="'+s+'body"></div>'].join("");o.prototype=r.extend({},i.prototype),o.prototype._initTarget=function(t){this.$target=t.$target||$("body")},o.prototype._initExternalPopupHtmlIfNeed=function(t){t.$el&&(this.$el=t.$el,this._isExternalHtmlUse=!0)},o.prototype._initCloserOpener=function(t){this.openerCssQuery=t.openerCssQuery,this.closerCssQuery=t.closerCssQuery},o.prototype._initContent=function(t){t.content?this.$content=$(t.content):t.textContent&&(this.$content=t.textContent)},o.prototype._initTitle=function(t){this.title=t.title},o.prototype._initClassName=function(t){t.className&&(this.className=t.className)},o.prototype.render=function(){this._renderLayout(),this._renderTitle(),this._renderContent(),this._attachPopupEvent()},o.prototype._renderLayout=function(){this._isExternalHtmlUse?(this.hide(),this.$target&&this.$target.append(this.$el)):(this.$el.html(l),this.$el.addClass(this.className),this.hide(),this.$target.append(this.$el),this.$body=this.$el.find(this._getFullClassName("body")),this.title===!1&&this.$el.find(this._getFullClassName("header")).remove())},o.prototype._renderContent=function(){this._isExternalHtmlUse||this.setContent(this.$content)},o.prototype._renderTitle=function(){this._isExternalHtmlUse||this.title===!1||this.setTitle(this.title)},o.prototype._getFullClassName=function(t){return"."+s+t},o.prototype._attachOpenerCloserEvent=function(){var t=this;this.openerCssQuery&&$(this.openerCssQuery).on("click."+this._getId(),function(){t.show()}),this.closerCssQuery&&$(this.closerCssQuery).on("click."+this._getId(),function(){t.hide()})},o.prototype._detachOpenerCloserEvent=function(){this.openerCssQuery&&$(this.openerCssQuery).off("."+this._getId()),this.closerCssQuery&&$(this.closerCssQuery).off("."+this._getId())},o.prototype._attachPopupControlEvent=function(){var t=this;this.on("click "+this._getFullClassName("close-button"),function(){t.hide()})},o.prototype._detachPopupEvent=function(){this.off(),this._detachOpenerCloserEvent()},o.prototype._attachPopupEvent=function(){this._attachPopupControlEvent(),this._attachOpenerCloserEvent()},o.prototype._setId=function(){this._id=a,a+=1},o.prototype._getId=function(){return this._id},o.prototype.setContent=function(t){this.$body.empty(),this.$body.append(t)},o.prototype.setTitle=function(t){var e=this.$el.find(this._getFullClassName("title"));e.empty(),e.append(t)},o.prototype.hide=function(){this.$el.css("display","none"),this._isShow=!1,this.trigger("hidden",this)},o.prototype.show=function(){this.$el.css("display","block"),this._isShow=!0,this.trigger("shown",this)},o.prototype.isShow=function(){return this._isShow},o.prototype.remove=function(){this.trigger("remove",this),this._detachPopupEvent(),this.$el.empty(),this.$el.remove()},o.prototype.css=function(){this.$el.css.apply(this.$el,arguments)},o.prototype._initCssStyles=function(t){t.css&&this.css(t.css)},o.factory=function(t){var e=new o(t);return e.render(),e},o.CLASS_PREFIX=s,t.exports=o},function(t,e,n){"use strict";function o(t){i.call(this,{tagName:"div",className:"te-mode-switch"}),this._render(),this._switchType(r.isExisty(t)?t:a.MARKDOWN)}var i=n(11),r=tui.util,a={MARKDOWN:"markdown",WYSIWYG:"wysiwyg"};o.prototype=r.extend({},i.prototype),o.prototype._render=function(){this.$buttons={},this.$buttons.markdown=$('<button class="te-switch-button markdown" type="button">Markdown</button>'),this.$buttons.wysiwyg=$('<button class="te-switch-button wysiwyg" type="button">WYSIWYG</button>'),this.$el.append(this.$buttons.markdown),this.$el.append(this.$buttons.wysiwyg),this.attachEvents({"click .markdown":"_changeMarkdown","click .wysiwyg":"_changeWysiwyg"})},o.prototype._changeMarkdown=function(){this._switchType(a.MARKDOWN)},o.prototype._changeWysiwyg=function(){this._switchType(a.WYSIWYG)},o.prototype._setActiveButton=function(t){r.forEach(this.$buttons,function(t){t.removeClass("active")}),this.$buttons[t].addClass("active")},o.prototype._switchType=function(t){this.type!==t&&(this.type=t,this._setActiveButton(t),this.trigger("modeSwitched",this.type))},o.TYPE=a,t.exports=o},function(t,e,n){"use strict";function o(t){t=r.extend({title:"링크 추가",className:"te-popup-add-link tui-editor-popup",content:a},t),i.call(this,t),this.render(),this._bindContentEvent(),this._linkWithEventManager(t.eventManager)}var i=n(56),r=tui.util,a=['<label for="linkText">링크에 표시할 내용</label>','<input type="text" class="te-link-text-input" />','<label for="url">URL</label>','<input type="text" class="te-url-input" />','<div class="te-button-section">','<button type="button" class="te-ok-button">확인</button>','<button type="button" class="te-close-button">취소</button>',"</div>"].join("");o.prototype=r.extend({},i.prototype),o.prototype._bindContentEvent=function(){var t=this;this.on("click .te-ok-button",function(){t.trigger("okButtonClicked",t),t.hide()}),this.on("click .te-close-button",function(){t.trigger("closeButtonClicked",t),t.hide()}),this.on("shown",function(){t.$el.find(".te-link-text-input").focus()}),this.on("hidden",function(){t.resetInputs()})},o.prototype._linkWithEventManager=function(t){var e=this;t.listen("focus",function(){e.hide()}),t.listen("openPopupAddLink",function(){t.emit("closeAllPopup"),e.show()}),t.listen("closeAllPopup",function(){e.hide()}),this.on("okButtonClicked",function(){t.emit("command","AddLink",e.getValue())})},o.prototype.getValue=function(){return{linkText:this.$el.find(".te-link-text-input").val(),url:this.$el.find(".te-url-input").val().replace(/\(/g,"%28").replace(/\)/g,"%29")}},o.prototype.resetInputs=function(){this.$el.find("input").val("")},t.exports=o},function(t,e,n){"use strict";function o(t){t=a.extend({title:"이미지 삽입",className:"te-popup-add-image tui-editor-popup",content:s},t),i.call(this,t),this.eventManager=t.eventManager,this.render(),this._bindContentEvent(),this._linkWithEventManager(),this._initApplyImageBindContext()}var i=n(56),r=n(54),a=tui.util,s=['<div class="te-tab-section"></div>','<div class="te-url-type">','<label for="">이미지 URL</label>','<input type="text" class="te-image-url-input" />',"</div>",'<form enctype="multipart/form-data" class="te-file-type">','<label for="">이미지 선택</label>','<input type="file" class="te-image-file-input" accept="image/*" />',"</form>",'<label for="url">설명</label>','<input type="text" class="te-alt-text-input" />','<div class="te-button-section">','<button type="button" class="te-ok-button">삽입</button>','<button type="button" class="te-close-button">취소</button>',"</div>"].join("");o.prototype=a.extend({},i.prototype),o.prototype._bindContentEvent=function(){var t=this;this.on("click .te-ok-button",function(){t.trigger("okButtonClicked",t),t.hide()}),this.on("click .te-close-button",function(){t.trigger("closeButtonClicked",t),t.hide()}),this.on("shown",function(){t.$el.find(".te-image-url-input").focus()}),this.on("hidden",function(){t.resetInputs()}),this.tab.on("itemClick",function(){t.resetInputs()}),this.on("change .te-image-file-input",function(){var e=t.$el.find(".te-image-file-input").val().split("\\").pop();t.$el.find(".te-alt-text-input").val(e)})},o.prototype._linkWithEventManager=function(){var t=this;this.eventManager.listen("focus",function(){t.hide()}),this.eventManager.listen("openPopupAddImage",function(){t.eventManager.emit("closeAllPopup"),t.show()}),this.eventManager.listen("closeAllPopup",function(){t.hide()}),this.on("okButtonClicked",function(){t._isUrlType()?t.applyImage():(t._preAltValue=t.$el.find(".te-alt-text-input").val(),t.eventManager.emit("addImageBlobHook",t.$el.find(".te-image-file-input")[0].files[0],t.applyImage))})},o.prototype._initApplyImageBindContext=function(){var t=this;this.applyImage=function(e){var n;n=e?t._getImageInfoWithGivenUrl(e):t._getImageInfo(),t.eventManager.emit("command","AddImage",n),t.hide()}},o.prototype._isUrlType=function(){return!!this.$el.find(".te-image-url-input").val()},o.prototype._renderContent=function(){var t=this.$el;i.prototype._renderContent.call(this),this.tab=new r({initName:"File",items:["File","URL"],sections:[t.find(".te-file-type"),t.find(".te-url-type")]}),this.$body.find(".te-tab-section").append(this.tab.$el)},o.prototype._getImageInfoWithGivenUrl=function(t){var e=this._preAltValue;return this._preAltValue="",this._makeImageInfo(t,e)},o.prototype._getImageInfo=function(){var t=this.$el.find(".te-image-url-input").val(),e=this.$el.find(".te-alt-text-input").val();return this._makeImageInfo(t,e)},o.prototype._makeImageInfo=function(t,e){return{imageUrl:t,altText:e}},o.prototype._getImageFileForm=function(){return this.$el.find("form")},o.prototype.resetInputs=function(){this.$el.find("input").val("")},t.exports=o},function(t,e,n){"use strict";function o(t){t=r.extend({title:!1,className:"te-popup-table-utils",content:a},t),i.call(this,t),this.eventManager=t.eventManager,this.render(),this._bindContentEvent(),this._linkWithEventManager()}var i=n(56),r=tui.util,a=['<button type="button" class="te-table-add-row">행 삽입</button>','<button type="button" class="te-table-add-col">열 삽입</button>','<button type="button" class="te-table-remove-row">행 삭제</button>','<button type="button" class="te-table-remove-col">열 삭제</button>','<button type="button" class="te-table-col-align-left">열 왼쪽 정렬</button>','<button type="button" class="te-table-col-align-center">열 가운데 정렬</button>','<button type="button" class="te-table-col-align-right">열 오른쪽 정렬</button>','<button type="button" class="te-table-remove">표 삭제</button>'].join("");o.prototype=r.extend({},i.prototype),o.prototype._bindContentEvent=function(){var t=this;this.on("click .te-table-add-row",function(){t.eventManager.emit("command","AddRow")}),this.on("click .te-table-add-col",function(){t.eventManager.emit("command","AddCol")}),this.on("click .te-table-remove-row",function(){t.eventManager.emit("command","RemoveRow")}),this.on("click .te-table-col-align-left",function(){t.eventManager.emit("command","AlignCol","left")}),this.on("click .te-table-col-align-center",function(){t.eventManager.emit("command","AlignCol","center")}),this.on("click .te-table-col-align-right",function(){t.eventManager.emit("command","AlignCol","right")}),this.on("click .te-table-remove-col",function(){t.eventManager.emit("command","RemoveCol")}),this.on("click .te-table-remove",function(){t.eventManager.emit("command","RemoveTable")})},o.prototype._linkWithEventManager=function(){var t=this;this.eventManager.listen("focus",function(){t.hide()}),this.eventManager.listen("mousedown",function(){t.hide()}),this.eventManager.listen("openPopupTableUtils",function(e){t.eventManager.emit("closeAllPopup"),t.$el.css({position:"absolute",top:e.layerY+30,left:e.layerX+20}),t.show()}),this.eventManager.listen("closeAllPopup",function(){t.hide()})},t.exports=o},function(t,e,n){"use strict";function o(t){t=r.extend({title:!1,className:"te-popup-add-table",content:a},t),i.call(this,t),this._selectedBound={},this._tableBound={},this.eventManager=t.eventManager,this.$button=t.$button,this.render(),this._cacheElements(),this._bindContentEvent(),this._linkWithEventManager(),this._setTableSizeByBound(h,c)}var i=n(56),r=tui.util,a=['<div class="te-table-selection">','<div class="te-table-header"></div>','<div class="te-table-body"></div>','<div class="te-selection-area"></div>',"</div>",'<p class="te-description"></p>'].join(""),s=25,l=17,c=7,d=14,h=5,u=9,f=1,p=1,g=1,m=1;o.prototype=r.extend({},i.prototype),o.prototype._cacheElements=function(){this.$header=this.$el.find(".te-table-header"),this.$body=this.$el.find(".te-table-body"),this.$selection=this.$el.find(".te-selection-area"),this.$desc=this.$el.find(".te-description")},o.prototype._bindContentEvent=function(){var t=this;this.on("mousemove .te-table-selection",function(e){var n,o=e.pageX-t._selectionOffset.left,i=e.pageY-t._selectionOffset.top;n=t._getSelectionBoundByOffset(o,i),t._resizeTableBySelectionIfNeed(n.col,n.row),t._setSelectionAreaByBound(n.col,n.row),t._setDisplayText(n.col,n.row),t._setSelectedBound(n.col,n.row)}),this.on("click .te-table-selection",function(){var e=t._getSelectedTableSize();t.eventManager.emit("command","Table",e.col,e.row)})},o.prototype._linkWithEventManager=function(){var t=this;this.eventManager.listen("focus",function(){t.hide()}),this.eventManager.listen("openPopupAddTable",function(){t.eventManager.emit("closeAllPopup"),t.$el.css({top:t.$button.position().top+t.$button.height()+5,left:t.$button.position().left}),t.show(),t._selectionOffset=t.$el.find(".te-table-selection").offset()}),this.eventManager.listen("closeAllPopup",function(){t.hide()})},o.prototype._resizeTableBySelectionIfNeed=function(t,e){var n=this._getResizedTableBound(t,e);n&&this._setTableSizeByBound(n.col,n.row)},o.prototype._getResizedTableBound=function(t,e){var n,o,i;return t>=h&&t<u?n=t+1:t<h&&(n=h),e>=c&&e<d?o=e+1:e<c&&(o=c),this._isNeedResizeTable(n,o)&&(i={row:o||this._tableBound.row,col:n||this._tableBound.col}),i},o.prototype._isNeedResizeTable=function(t,e){return t&&t!==this._tableBound.col||e&&e!==this._tableBound.row},o.prototype._getBoundByOffset=function(t,e){var n=parseInt(e/l,10),o=parseInt(t/s,10);return{row:n,col:o}},o.prototype._getOffsetByBound=function(t,e){var n=t*s+s,o=e*l+l;return{x:n,y:o}},o.prototype._setTableSizeByBound=function(t,e){var n=this._getOffsetByBound(t,e-g);this._setTableSize(n.x,n.y),this._tableBound.row=e,this._tableBound.col=t},o.prototype._getSelectionBoundByOffset=function(t,e){var n=this._getBoundByOffset(t,e);return n.row<f?n.row=f:n.row>this._tableBound.row&&(n.row=this._tableBound.row),n.col<p?n.col=p:n.col>this._tableBound.col&&(n.col=this._tableBound.col),n},o.prototype._setSelectionAreaByBound=function(t,e){var n;n=this._getOffsetByBound(t,e),this._setSelectionArea(n.x,n.y)},o.prototype._setSelectedBound=function(t,e){this._selectedBound.col=t,this._selectedBound.row=e},o.prototype._getSelectedTableSize=function(){return{row:this._selectedBound.row+1,col:this._selectedBound.col+1}},o.prototype._setDisplayText=function(t,e){this.$desc.html(t+1+" x "+(e+1))},o.prototype._setTableSize=function(t,e){t+=m,e+=m,this.$header.css({height:l,width:t}),this.$body.css({height:e,width:t}),this.$el.css({width:t+30})},o.prototype._setSelectionArea=function(t,e){t+=m,e+=m,this.$selection.css({height:e,width:t})},o.CELL_WIDTH=s,o.CELL_HEIGHT=l,o.MIN_ROW_SELECTION_INDEX=f,o.MIN_COL_SELECTION_INDEX=p,t.exports=o},function(t,e,n){"use strict";function o(t){t=r.extend({title:!1,className:"te-heading-add",content:a},t),i.call(this,t),this.eventManager=t.eventManager,this.$button=t.$button,this.render(),this._linkWithEventManager(),this._bindEvent()}var i=n(56),r=tui.util,a=["<ul>",'<li data-value="1"><h1>제목</h1></li>','<li data-value="2"><h2>제목</h2></li>','<li data-value="3"><h3>제목</h3></li>','<li data-value="4"><h4>제목</h4></li>','<li data-value="5"><h5>제목</h5></li>','<li data-value="6"><h6>제목</h6></li>',"</ul>"].join("");o.prototype=r.extend({},i.prototype),o.prototype._linkWithEventManager=function(){var t=this;this.eventManager.listen("focus",function(){t.hide()}),this.eventManager.listen("openHeadingSelect",function(){t.eventManager.emit("closeAllPopup"),t.$el.css({top:t.$button.position().top+t.$button.height()+5,left:t.$button.position().left}),t.show()}),this.eventManager.listen("closeAllPopup",function(){t.hide()})},o.prototype._bindEvent=function(){var t=this;this.on("click li",function(){t.eventManager.emit("command","Heading",$(this).data("value"))})},t.exports=o},function(t,e,n){"use strict";var o=n(45),i=/^[\*_]{2,}[^\*_]*[\*_]{2,}$/,r=o.command("markdown",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(t){var e,n,o,i,r,a,s=t.getEditor(),l=s.getDoc();e=l.getCursor(),n=l.getSelection(),a=!n,a&&e.ch>1&&(o=this.expendSelection(l,e),n=o||n),i=this.isNeedRemove(n),r=i?this.remove(n):this.append(n),l.replaceSelection(r,"around"),a&&!i&&this.setCursorToCenter(l,e),s.focus()},isNeedRemove:function(t){return i.test(t)},append:function(t){return"**"+t+"**"},remove:function(t){return t.substr(2,t.length-4)},expendSelection:function(t,e){var n,o=t.getSelection();return t.setSelection({line:e.line,ch:e.ch-2},{line:e.line,ch:e.ch+2}),"****"===o||"____"===o?n=o:t.setSelection(e),n},setCursorToCenter:function(t,e){t.setCursor(e.line,e.ch+2)}});t.exports=r},function(t,e,n){"use strict";var o=n(45),i=/^[\*_]{3,}[^\*_]*[\*_]{3,}$/,r=/^[\*_][^\*_]*[\*_]$/,a=o.command("markdown",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(t){var e,n,o,i,r,a,s,l=t.getEditor(),c=l.getDoc();e=c.getCursor(),n=c.getSelection(),a=!n,s=!1,a&&(e.ch>2&&(o=this.expendWithBoldSelection(c,e),o&&(s="with")),"with"!==s&&e.ch>1&&(s=this.expendOnlyBoldSelection(c,e)),!s&&e.ch>0&&(this.expendSelection(c,e),n=o||n)),i=this.isNeedRemove(n),r=i?this.remove(n):this.append(n),c.replaceSelection(r,"around"),a&&this.setCursorToCenter(c,e,i),l.focus()},isNeedRemove:function(t){return r.test(t)||i.test(t)},append:function(t){return"_"+t+"_"},remove:function(t){return t.substr(1,t.length-2)},expendWithBoldSelection:function(t,e){var n,o=t.getSelection();return t.setSelection({line:e.line,ch:e.ch-3},{line:e.line,ch:e.ch+3}),"******"===o||"______"===o?n=o:t.setSelection(e),n},expendOnlyBoldSelection:function(t,e){var n=t.getSelection(),o=!1;return t.setSelection({line:e.line,ch:e.ch-2},{line:e.line,ch:e.ch+2}),"****"!==n&&"____"!==n||(t.setSelection(e),o="only"),o},expendSelection:function(t,e){var n,o=t.getSelection();return t.setSelection({line:e.line,ch:e.ch-2},{line:e.line,ch:e.ch+2}),"****"===o||"____"===o?n=o:t.setSelection(e),n},setCursorToCenter:function(t,e,n){var o=n?-1:1;t.setCursor(e.line,e.ch+o)}});t.exports=a},function(t,e,n){"use strict";var o=n(45),i=/^[~~](.*[\s\n]*.*)*[~~]$/,r=o.command("markdown",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(t){var e,n,o,i=t.getEditor(),r=i.getDoc(),a=r.getCursor(),s=r.getSelection();e=this.hasStrikeSyntax(s),o=e?this.remove(s):this.append(s),r.replaceSelection(o,"around"),n=!s,n&&!e&&this.setCursorToCenter(r,a,e),i.focus()},hasStrikeSyntax:function(t){return i.test(t)},append:function(t){return"~~"+t+"~~"},remove:function(t){return t.substr(2,t.length-4)},setCursorToCenter:function(t,e,n){var o=n?-2:2;t.setCursor(e.line,e.ch+o)}});t.exports=r},function(t,e,n){"use strict";var o=n(45),i=o.command("markdown",{name:"Blockquote",keyMap:["CTRL+Q","META+Q"],exec:function(t){var e,n,o,i,r,a,s,l=t.getEditor(),c=l.getDoc();for(n=t.getCurrentRange(),o={line:n.from.line,ch:0},i={line:n.to.line,ch:c.getLineHandle(n.to.line).text.length},e=c.getRange(o,i),r=e.split("\n"),a=r.length,s=0;s<a;s+=1)r[s]=">"+r[s];c.replaceRange(r.join("\n"),o,i),n.to.ch+=1,c.setCursor(n.to),l.focus()}});t.exports=i},function(t,e,n){"use strict";function o(t,e){var n=t.match(s),o="";do o+="#",e-=1;while(e>0);return n&&(t=t.split(n[0])[1]),o+" "+t}var i=n(45),r=tui.util,a=i.command("markdown",{name:"Heading",exec:function(t,e){var n,i,a,s,l,c,d=t.getEditor(),h=d.getDoc();i=t.getCurrentRange(),a={line:i.from.line,ch:0},s={line:i.to.line,ch:h.getLineHandle(i.to.line).text.length},c=h.getLine(s.line).length,n=h.getRange(a,s),l=n.split("\n"),r.forEachArray(l,function(t,n){l[n]=o(t,e)}),h.replaceRange(l.join("\n"),a,s),i.to.ch+=h.getLine(s.line).length-c,h.setCursor(i.to),d.focus()}}),s=/^#+\s/g;t.exports=a},function(t,e,n){"use strict";var o=n(45),i=o.command("markdown",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(t){var e,n,o,i=t.getEditor(),r="",a=i.getDoc();e=t.getCurrentRange(),n={line:e.from.line,ch:e.from.ch},o={line:e.to.line,ch:e.to.ch},e.collapsed&&(r=a.getLine(n.line),n.ch=0,o.ch=a.getLineHandle(e.to.line).text.length),r+=a.getLine(n.line).length?"\n\n* * *\n\n":"\n* * *\n",a.replaceRange(r,n,o),i.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("markdown",{name:"AddLink",exec:function(t,e){var n,o,i,r,a=t.getEditor(),s=a.getDoc();o=t.getCurrentRange(),i={line:o.from.line,ch:o.from.ch},r={line:o.to.line,ch:o.to.ch},n="["+e.linkText+"]("+e.url+")",s.replaceRange(n,i,r),a.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("markdown",{name:"AddImage",exec:function(t,e){var n,o,i,r,a=t.getEditor(),s=a.getDoc();o=t.getCurrentRange(),i={line:o.from.line,ch:o.from.ch},r={line:o.to.line,ch:o.to.ch},n="!["+e.altText+"]("+e.imageUrl+")",s.replaceRange(n,i,r,"+addImage"),a.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=/^[ \t]*[\d]+\. .*/,r=/^[ \t]*\* .*/,a=o.command("markdown",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(t){var e,n,o,a,s=t.getEditor(),l=s.getDoc();e=t.getCurrentRange(),n={line:e.from.line,ch:0},o=l.getLine(n.line),o.match(i)?(o=o.replace(/[\d]+\. /,"* "),a={line:n.line,ch:o.length+1
},l.replaceRange(o,n,a)):o.match(r)||l.replaceRange("* ",n),s.focus()}});t.exports=a},function(t,e,n){"use strict";var o=n(45),i=/^[ \t]*[\d]+\. .*/,r=/^[ \t]*\* .*/,a=o.command("markdown",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(t){var e,n,o,a,s=t.getEditor(),l=s.getDoc();e=t.getCurrentRange(),n={line:e.from.line,ch:0},o=l.getLine(n.line),o.match(r)?(o=o.replace(/\* /,"1. "),a={line:n.line,ch:o.length-1},l.replaceRange(o,n,a)):o.match(i)||l.replaceRange("1. ",n),s.focus()}});t.exports=a},function(t,e,n){"use strict";function o(t,e){for(var n="|",o="|",i=0;t;)e?(n+=" "+e[i]+" |",i+=1):n+="  |",o+=" --- |",t-=1;return n+"\n"+o+"\n"}function i(t,e,n){var o,i,r="",a=t;for(o=0;o<e;o+=1){for(r+="|",i=0;i<t;i+=1)n?(r+=" "+n[a]+" |",a+=1):r+="  |";r+="\n"}return r=r.replace(/\n$/g,"")}var r=n(45),a=r.command("markdown",{name:"Table",exec:function(t,e,n,r){var a=t.getEditor(),s=a.getDoc(),l="\n";a.getCursor().ch>0&&(l+="\n"),l+=o(e,r),l+=i(e,n-1,r),s.replaceSelection(l),r||a.setCursor(a.getCursor().line-n,2),t.focus()}});t.exports=a},function(t,e,n){"use strict";var o=n(45),i=o.command("markdown",{name:"Task",keyMap:["CTRL+T","META+T"],exec:function(t){var e,n,o,i,r=t.getEditor(),a=r.getDoc();n=t.getCurrentRange(),o={line:n.from.line,ch:n.from.ch},i={line:n.to.line,ch:n.to.ch},e="* [ ] ",a.replaceRange(e,o,i),r.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("markdown",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(t){var e,n,o=t.getEditor(),i=o.getDoc();n=i.getSelection(),e=o.getCursor(),i.replaceSelection(this.append(n),"around"),n||i.setCursor(e.line,e.ch+1),o.focus()},append:function(t){return"`"+t+"`"}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("markdown",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(t){var e,n,o=t.getEditor(),i="",r=o.getDoc();e=o.getCursor(),r.getLine(e.line).length?(i+="\n``` \n\n```\n\n",r.setCursor(e.line+1,0),n=3):(i+="\n``` \n\n```\n",n=2),r.replaceSelection(i),o.setCursor(r.getCursor().line-n,0),o.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(t){var e=t.getEditor();e.hasFormat("b")||e.hasFormat("strong")?e.changeFormat(null,{tag:"b"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.bold()),e.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(t){var e=t.getEditor();e.hasFormat("i")||e.hasFormat("em")?e.changeFormat(null,{tag:"i"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.italic()),e.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(t){var e=t.getEditor();e.hasFormat("S")?e.changeFormat(null,{tag:"S"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.strikethrough()),e.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"Blockquote",keyMap:["CTRL+Q","META+Q"],exec:function(t){var e=t.getEditor();e.hasFormat("TABLE")||e.hasFormat("PRE")||(t.unwrapBlockTag(),e.increaseQuoteLevel()),e.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"AddImage",exec:function(t,e){var n=t.getEditor();n.hasFormat("PRE")||n.insertImage(e.imageUrl),n.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"AddLink",exec:function(t,e){var n,o=t.getEditor();o.hasFormat("PRE")||(o.removeAllFormatting(),o.getSelectedText()?o.makeLink(e.url):(n=o.createElement("A",{href:e.url}),$(n).text(e.linkText),o.insertElement(n))),o.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=n(19),r=o.command("wysiwyg",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(t){var e,n,o,r,a=t.getEditor(),s=a.getSelection();!s.collapsed||a.hasFormat("TABLE")||a.hasFormat("PRE")||(e=i.getChildNodeByOffset(s.startContainer,s.startOffset),n=i.getTopNextNodeUnder(e,t.get$Body()[0]),n||(n=a.createDefaultBlock(),t.get$Body().append(n)),o=a.createElement("HR"),a.modifyBlocks(function(t){return t.appendChild(o),t}),r=o.previousSibling,r&&i.isTextNode(r)&&0===i.getTextLength(r)&&o.parentNode.removeChild(r),s.selectNodeContents(n),s.collapse(!0),a.setSelection(s)),a.focus()}});t.exports=r},function(t,e,n){"use strict";var o=n(45),i=n(19),r=o.command("wysiwyg",{name:"Heading",exec:function(t,e){var n=t.getEditor(),o=n.getSelection().cloneRange();n.hasFormat("TABLE")||n.hasFormat("PRE")||(o.collapsed||"DIV"===i.getNodeName(o.commonAncestorContainer)||"TEXT"===i.getNodeName(o.commonAncestorContainer))&&t.changeBlockFormatTo("H"+e),n.focus()}});t.exports=r},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(t){var e=t.getEditor(),n=e.getSelection();n.collapsed&&(e.hasFormat("LI")?(t.saveSelection(n),e.saveUndoState(n),t.getManager("task").unformatTask(n.startContainer),e.replaceParent(n.startContainer,"ol","ul"),t.restoreSavedSelection()):e.hasFormat("TABLE")||e.hasFormat("PRE")||(t.unwrapBlockTag(),e.makeUnorderedList()),e.focus())}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(t){var e=t.getEditor(),n=e.getSelection();n.collapsed&&(e.hasFormat("LI")?(e.saveUndoState(n),t.saveSelection(n),t.getManager("task").unformatTask(n.startContainer),e.replaceParent(n.startContainer,"ul","ol"),t.restoreSavedSelection()):e.hasFormat("TABLE")||e.hasFormat("PRE")||(t.unwrapBlockTag(),e.makeOrderedList()),e.focus())}});t.exports=i},function(t,e,n){"use strict";function o(t,e){var n;n=t.getSelection(),n.selectNodeContents(e.find("th")[0]),n.collapse(!0),t.setSelection(n)}function i(t,e){for(var n="<thead><tr>",o=0;t;)n+="<th>",e&&(n+=e[o],o+=1),n+="</th>",t-=1;return n+="</tr></thead>"}function r(t,e,n){var o,i,r="<tbody>",a=t;for(o=0;o<e;o+=1){for(r+="<tr>",i=0;i<t;i+=1)r+="<td>",n&&(r+=n[a],a+=1),r+="</td>";r+="</tr>"}return r+="</tbody>"}var a=n(45),s=0,l="te-content-table-",c=a.command("wysiwyg",{name:"Table",exec:function(t,e,n,a){var c,d=t.getEditor();return!d.getSelection().collapsed||d.hasFormat("TABLE")||d.hasFormat("PRE")?void d.focus():(c='<table class="'+l+s+'">',c+=i(e,a),c+=r(e,n-1,a),c+="</table>",d.insertHTML(c),d.focus(),a||o(d,t.get$Body().find("."+l+s)),void(s+=1))}});t.exports=c},function(t,e,n){"use strict";function o(t){var e=t.clone();return e.find("td").html("<br>"),e}function i(t,e){var n;n=t.getSelection(),n.selectNodeContents(e.find("td")[0]),n.collapse(!0),t.setSelection(n)}var r=n(45),a=r.command("wysiwyg",{name:"AddRow",exec:function(t){var e,n,r=t.getEditor(),a=r.getSelection().cloneRange();r.hasFormat("TD")?(r.saveUndoState(a),e=$(a.startContainer).closest("tr"),n=o(e),n.insertAfter(e),r.focus(),i(r,n)):r.hasFormat("TH")?(r.saveUndoState(a),e=$(a.startContainer).parents("thead").next("tbody").children("tr").eq(0),n=o(e),n.insertBefore(e),r.focus(),i(r,n)):r.focus()}});t.exports=a},function(t,e,n){"use strict";function o(t){var e=s.getChildNodeByOffset(t.startContainer,t.startOffset);return e="TD"===s.getNodeName(e)||"TH"===s.getNodeName(e)?$(e):$(e).parentsUntil("tr")}function i(t){var e,n=t.index();t.parents("table").find("tr").each(function(t,o){e="TBODY"===s.getNodeName(o.parentNode)?$("<td><br></td>"):$("<th><br></th>"),$(e).insertAfter($(o).children().eq(n))})}function r(t,e){var n;n=t.getSelection(),n.selectNodeContents(e.next()[0]),n.collapse(!0),t.setSelection(n)}var a=n(45),s=n(19),l=a.command("wysiwyg",{name:"AddCol",exec:function(t){var e,n=t.getEditor(),a=n.getSelection().cloneRange();n.hasFormat("TR")?(n.saveUndoState(a),e=o(a),i(e),n.focus(),r(n,e)):n.focus()}});t.exports=l},function(t,e,n){"use strict";function o(t,e){var n;n=t.getSelection(),n.selectNodeContents(e.find("td")[0]),n.collapse(!0),t.setSelection(n)}var i=n(45),r=i.command("wysiwyg",{name:"RemoveRow",exec:function(t){var e,n,i,r,a,s=t.getEditor(),l=s.getSelection().cloneRange(),c=t.getManager("tableSelection").getSelectionRangeFromTable(l),d=$(l.startContainer).parents("table"),h=d.find("tbody tr"),u=$(l.startContainer).parents("thead").length;e=u?c.from.row+1:c.from.row,n=c.to.row,a=!(1===e&&n===h.length)||u&&n===h,a||(n-=1),r=d.find("tr").slice(e,n+1),(s.hasFormat("TD")||s.hasFormat("TABLE"))&&h.length>1?(s.saveUndoState(l),i=r.last().next().length?r.last().next():r.first().prev(),r.remove(),s.focus(),i.length&&o(s,i)):s.focus()}});t.exports=r},function(t,e,n){"use strict";function o(t){var e=s.getChildNodeByOffset(t.startContainer,t.startOffset);return e="TD"===s.getNodeName(e)||"TH"===s.getNodeName(e)?$(e):$(e).parentsUntil("tr")}function i(t){var e=t.index();t.parents("table").find("tr").each(function(t,n){$(n).children().eq(e).remove()})}function r(t,e){var n;e.length&&(n=t.getSelection(),n.selectNodeContents(e[0]),n.collapse(!0),t.setSelection(n))}var a=n(45),s=n(19),l=a.command("wysiwyg",{name:"RemoveCol",exec:function(t){var e,n,a=t.getEditor(),s=a.getSelection().cloneRange();a.hasFormat("TR")&&$(s.startContainer).closest("table").find("thead tr th").length>1?(a.saveUndoState(s),e=o(s),n=e.next().length?e.next():e.prev(),i(e),a.focus(),r(a,n)):a.focus()}});t.exports=l},function(t,e,n){"use strict";function o(t){var e=t.startContainer;return e="TH"===a.getNodeName(e)||"TD"===a.getNodeName(e)?$(e):$(e).parentsUntil("tr")}function i(t,e,n,o,i){var r=i.isDivided,a=i.columnLength;t.find("tr").each(function(t,i){$(i).children("td,th").each(function(t,i){r&&(e<=t&&t<=a||t<=n)?$(i).attr("align",o):e<=t&&t<=n&&$(i).attr("align",o)})})}var r=n(45),a=n(19),s=r.command("wysiwyg",{name:"AlignCol",exec:function(t,e){var n,r,a,s,l,c=t.getEditor(),d=c.getSelection().cloneRange(),h=t.getManager("tableSelection").getSelectionRangeFromTable(d),u=!1;c.hasFormat("TR")&&(c.saveUndoState(d),a=o(d),r=a.parents("table"),n=r.find("tr").eq(0).find("td,th").length,h.from.row===h.to.row?(s=h.from.cell,l=h.to.cell):h.from.row<h.to.row&&(h.from.cell<=h.to.cell?(s=0,l=n-1):(s=h.from.cell,l=h.to.cell,u=!0)),i(r,s,l,e,{isDivided:u,columnLength:n})),c.focus()}});t.exports=s},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"RemoveTable",exec:function(t){var e,n=t.getEditor(),o=n.getSelection().cloneRange();n.hasFormat("TABLE")&&(n.saveUndoState(o),e=$(o.startContainer).closest("table"),e.remove()),n.focus()}});t.exports=i},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"IncreaseDepth",exec:function(t){var e,n,o,i,r,a=t.getEditor().getSelection(),s=$(a.startContainer).closest("li");n=s.prev(),n.length&&s.length&&(e=s.find("li").eq(0),t.getEditor().saveUndoState(),i=s.attr("class"),o=n.attr("class"),r=e.attr("class"),s.removeAttr("class"),n.removeAttr("class"),e.length&&!e.children("div").length&&e.removeAttr("class"),t.getEditor().increaseListLevel(),s.attr("class",i),n.attr("class",o),e.attr("class",r))}});t.exports=i},function(t,e,n){"use strict";function o(t){var e=t.getEditor().getSelection();return $(e.startContainer).closest("li")}var i=n(45),r=i.command("wysiwyg",{name:"DecreaseDepth",exec:function(t){var e,n=o(t);n.length&&(t.getEditor().saveUndoState(),e=n.attr("class"),t.getEditor().decreaseListLevel(),n=o(t),n.attr("class",e))}});t.exports=r},function(t,e,n){"use strict";var o=n(45),i=o.command("wysiwyg",{name:"Task",keyMap:["CTRL+T","META+T"],exec:function(t){var e,n=t.getEditor();e=n.getSelection().cloneRange(),!e.collapsed||n.hasFormat("TABLE")||n.hasFormat("PRE")||(n.hasFormat("li")||(t.unwrapBlockTag(),n.makeUnorderedList(),e=n.getSelection().cloneRange()),n.saveUndoState(e),t.getManager("task").formatTask(e.startContainer)),n.focus()}});t.exports=i},function(t,e,n){"use strict";function o(t){"CODE"===r.getNodeName(t.startContainer.nextSibling)&&0===r.getTextLength(t.startContainer.nextSibling)&&$(t.startContainer.nextSibling).remove()}var i=n(45),r=n(19),a=i.command("wysiwyg",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(t){var e,n=t.getEditor();!n.hasFormat("PRE")&&n.hasFormat("code")?(n.changeFormat(null,{tag:"code"}),o(t.getEditor().getSelection().cloneRange())):n.hasFormat("a")||n.hasFormat("PRE")||(n.hasFormat("b")?n.removeBold():n.hasFormat("i")&&n.removeItalic(),n.changeFormat({tag:"code"}),e=n.getSelection().cloneRange(),e.setStart(e.endContainer,e.endOffset),e.collapse(!0),n.setSelection(e)),n.focus()}});t.exports=a},function(t,e,n){"use strict";function o(t,e){var n=e.getEditor().getSelection().cloneRange();n.setStartBefore(t.find("div")[0].firstChild),n.collapse(!0),e.getEditor().setSelection(n)}function i(t,e){var n,o,i,r=e.getManager("codeblock");return t.collapsed?i=[$("<div><br></div>")[0]]:(o=t.extractContents(),i=[].slice.call(o.childNodes)),n=r.convertToCodeblock(i).innerHTML}var r=n(45),a=0,s="te-content-codeblock-",l="data-te-codeblock",c=r.command("wysiwyg",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(t,e){var n,r,c=t.getEditor(),d=c.getSelection().cloneRange();c.hasFormat("PRE")||(n=l+' class = "'+s+a+'"',e&&(n+=' data-language="'+e+'"'),r=i(d,t),c.insertHTML("<pre "+n+">"+r+"</pre>"),o(t.get$Body().find("."+s+a),t),a+=1),c.focus()}});t.exports=c}]);